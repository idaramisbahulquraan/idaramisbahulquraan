function Cb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Pb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N_={exports:{}},Zu={},A_={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta=Symbol.for("react.element"),kb=Symbol.for("react.portal"),Db=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),Vb=Symbol.for("react.profiler"),Ob=Symbol.for("react.provider"),Lb=Symbol.for("react.context"),Mb=Symbol.for("react.forward_ref"),Fb=Symbol.for("react.suspense"),Ub=Symbol.for("react.memo"),Bb=Symbol.for("react.lazy"),vg=Symbol.iterator;function zb(t){return t===null||typeof t!="object"?null:(t=vg&&t[vg]||t["@@iterator"],typeof t=="function"?t:null)}var R_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C_=Object.assign,P_={};function Mi(t,e,n){this.props=t,this.context=e,this.refs=P_,this.updater=n||R_}Mi.prototype.isReactComponent={};Mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k_(){}k_.prototype=Mi.prototype;function If(t,e,n){this.props=t,this.context=e,this.refs=P_,this.updater=n||R_}var Ef=If.prototype=new k_;Ef.constructor=If;C_(Ef,Mi.prototype);Ef.isPureReactComponent=!0;var _g=Array.isArray,D_=Object.prototype.hasOwnProperty,bf={current:null},j_={key:!0,ref:!0,__self:!0,__source:!0};function V_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)D_.call(e,r)&&!j_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ta,type:t,key:i,ref:o,props:s,_owner:bf.current}}function $b(t,e){return{$$typeof:Ta,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ta}function qb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xg=/\/+/g;function cd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qb(""+t.key):e.toString(36)}function Vl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ta:case kb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cd(o,0):r,_g(s)?(n="",t!=null&&(n=t.replace(xg,"$&/")+"/"),Vl(s,e,n,"",function(d){return d})):s!=null&&(Tf(s)&&(s=$b(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_g(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+cd(i,a);o+=Vl(i,e,n,u,s)}else if(u=zb(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+cd(i,a++),o+=Vl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cl(t,e,n){if(t==null)return t;var r=[],s=0;return Vl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Kb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Ol={transition:null},Gb={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:bf};function O_(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:cl,forEach:function(t,e,n){cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cl(t,function(){e++}),e},toArray:function(t){return cl(t,function(e){return e})||[]},only:function(t){if(!Tf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Mi;se.Fragment=Db;se.Profiler=Vb;se.PureComponent=If;se.StrictMode=jb;se.Suspense=Fb;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gb;se.act=O_;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=C_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)D_.call(e,u)&&!j_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ta,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Lb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ob,_context:t},t.Consumer=t};se.createElement=V_;se.createFactory=function(t){var e=V_.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Mb,render:t}};se.isValidElement=Tf;se.lazy=function(t){return{$$typeof:Bb,_payload:{_status:-1,_result:t},_init:Kb}};se.memo=function(t,e){return{$$typeof:Ub,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};se.unstable_act=O_;se.useCallback=function(t,e){return bt.current.useCallback(t,e)};se.useContext=function(t){return bt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};se.useEffect=function(t,e){return bt.current.useEffect(t,e)};se.useId=function(){return bt.current.useId()};se.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return bt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};se.useRef=function(t){return bt.current.useRef(t)};se.useState=function(t){return bt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return bt.current.useTransition()};se.version="18.3.1";A_.exports=se;var k=A_.exports;const L_=Pb(k),Wb=Cb({__proto__:null,default:L_},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=k,Qb=Symbol.for("react.element"),Xb=Symbol.for("react.fragment"),Yb=Object.prototype.hasOwnProperty,Jb=Hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zb={key:!0,ref:!0,__self:!0,__source:!0};function M_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Yb.call(e,r)&&!Zb.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Qb,type:t,key:i,ref:o,props:s,_owner:Jb.current}}Zu.Fragment=Xb;Zu.jsx=M_;Zu.jsxs=M_;N_.exports=Zu;var c=N_.exports,Xd={},F_={exports:{}},Ut={},U_={exports:{}},B_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,J){var te=K.length;K.push(J);e:for(;0<te;){var Ne=te-1>>>1,me=K[Ne];if(0<s(me,J))K[Ne]=J,K[te]=me,te=Ne;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],te=K.pop();if(te!==J){K[0]=te;e:for(var Ne=0,me=K.length,Le=me>>>1;Ne<Le;){var Rn=2*(Ne+1)-1,Cn=K[Rn],Pn=Rn+1,kn=K[Pn];if(0>s(Cn,te))Pn<me&&0>s(kn,Cn)?(K[Ne]=kn,K[Pn]=te,Ne=Pn):(K[Ne]=Cn,K[Rn]=te,Ne=Rn);else if(Pn<me&&0>s(kn,te))K[Ne]=kn,K[Pn]=te,Ne=Pn;else break e}}return J}function s(K,J){var te=K.sortIndex-J.sortIndex;return te!==0?te:K.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],f=1,p=null,m=3,y=!1,S=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=K)r(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(d)}}function O(K){if(N=!1,b(K),!S)if(n(u)!==null)S=!0,Wi(M);else{var J=n(d);J!==null&&An(O,J.startTime-K)}}function M(K,J){S=!1,N&&(N=!1,_(x),x=-1),y=!0;var te=m;try{for(b(J),p=n(u);p!==null&&(!(p.expirationTime>J)||K&&!C());){var Ne=p.callback;if(typeof Ne=="function"){p.callback=null,m=p.priorityLevel;var me=Ne(p.expirationTime<=J);J=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(u)&&r(u),b(J)}else r(u);p=n(u)}if(p!==null)var Le=!0;else{var Rn=n(d);Rn!==null&&An(O,Rn.startTime-J),Le=!1}return Le}finally{p=null,m=te,y=!1}}var P=!1,I=null,x=-1,T=5,A=-1;function C(){return!(t.unstable_now()-A<T)}function j(){if(I!==null){var K=t.unstable_now();A=K;var J=!0;try{J=I(!0,K)}finally{J?R():(P=!1,I=null)}}else P=!1}var R;if(typeof w=="function")R=function(){w(j)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,Gr=zt.port2;zt.port1.onmessage=j,R=function(){Gr.postMessage(null)}}else R=function(){E(j,0)};function Wi(K){I=K,P||(P=!0,R())}function An(K,J){x=E(function(){K(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,Wi(M))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var te=m;m=J;try{return K()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var te=m;m=K;try{return J()}finally{m=te}},t.unstable_scheduleCallback=function(K,J,te){var Ne=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ne+te:Ne):te=Ne,K){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=te+me,K={id:f++,callback:J,priorityLevel:K,startTime:te,expirationTime:me,sortIndex:-1},te>Ne?(K.sortIndex=te,e(d,K),n(u)===null&&K===n(d)&&(N?(_(x),x=-1):N=!0,An(O,te-Ne))):(K.sortIndex=me,e(u,K),S||y||(S=!0,Wi(M))),K},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(K){var J=m;return function(){var te=m;m=J;try{return K.apply(this,arguments)}finally{m=te}}}})(B_);U_.exports=B_;var eT=U_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=k,Mt=eT;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z_=new Set,Wo={};function Ps(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(Wo[t]=e,t=0;t<e.length;t++)z_.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yd=Object.prototype.hasOwnProperty,nT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wg={},Ig={};function rT(t){return Yd.call(Ig,t)?!0:Yd.call(wg,t)?!1:nT.test(t)?Ig[t]=!0:(wg[t]=!0,!1)}function sT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iT(t,e,n,r){if(e===null||typeof e>"u"||sT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sf=/[\-:]([a-z])/g;function Nf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sf,Nf);st[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sf,Nf);st[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sf,Nf);st[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Af(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iT(e,n,s,r)&&(n=null),r||s===null?rT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=tT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),Zs=Symbol.for("react.portal"),ei=Symbol.for("react.fragment"),Rf=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),$_=Symbol.for("react.provider"),q_=Symbol.for("react.context"),Cf=Symbol.for("react.forward_ref"),Zd=Symbol.for("react.suspense"),eh=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),K_=Symbol.for("react.offscreen"),Eg=Symbol.iterator;function ao(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,dd;function wo(t){if(dd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dd=e&&e[1]||""}return`
`+dd+t}var hd=!1;function fd(t,e){if(!t||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wo(t):""}function oT(t){switch(t.tag){case 5:return wo(t.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return t=fd(t.type,!1),t;case 11:return t=fd(t.type.render,!1),t;case 1:return t=fd(t.type,!0),t;default:return""}}function th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ei:return"Fragment";case Zs:return"Portal";case Jd:return"Profiler";case Rf:return"StrictMode";case Zd:return"Suspense";case eh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q_:return(t.displayName||"Context")+".Consumer";case $_:return(t._context.displayName||"Context")+".Provider";case Cf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pf:return e=t.displayName||null,e!==null?e:th(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return th(t(e))}catch{}}return null}function aT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return th(e);case 8:return e===Rf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function G_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lT(t){var e=G_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hl(t){t._valueTracker||(t._valueTracker=lT(t))}function W_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H_(t,e){e=e.checked,e!=null&&Af(t,"checked",e,!1)}function rh(t,e){H_(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sh(t,e.type,n):e.hasOwnProperty("defaultValue")&&sh(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sh(t,e,n){(e!=="number"||au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Io=Array.isArray;function hi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ih(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Io(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Q_(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ng(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function X_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?X_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,Y_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uT=["Webkit","ms","Moz","O"];Object.keys(ko).forEach(function(t){uT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ko[e]=ko[t]})});function J_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ko.hasOwnProperty(t)&&ko[t]?(""+e).trim():e+"px"}function Z_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=J_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cT=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ah(t,e){if(e){if(cT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uh=null;function kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ch=null,fi=null,pi=null;function Ag(t){if(t=Aa(t)){if(typeof ch!="function")throw Error(B(280));var e=t.stateNode;e&&(e=sc(e),ch(t.stateNode,t.type,e))}}function e0(t){fi?pi?pi.push(t):pi=[t]:fi=t}function t0(){if(fi){var t=fi,e=pi;if(pi=fi=null,Ag(t),e)for(t=0;t<e.length;t++)Ag(e[t])}}function n0(t,e){return t(e)}function r0(){}var pd=!1;function s0(t,e,n){if(pd)return t(e,n);pd=!0;try{return n0(t,e,n)}finally{pd=!1,(fi!==null||pi!==null)&&(r0(),t0())}}function Qo(t,e){var n=t.stateNode;if(n===null)return null;var r=sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var dh=!1;if(Kn)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){dh=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{dh=!1}function dT(t,e,n,r,s,i,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Do=!1,lu=null,uu=!1,hh=null,hT={onError:function(t){Do=!0,lu=t}};function fT(t,e,n,r,s,i,o,a,u){Do=!1,lu=null,dT.apply(hT,arguments)}function pT(t,e,n,r,s,i,o,a,u){if(fT.apply(this,arguments),Do){if(Do){var d=lu;Do=!1,lu=null}else throw Error(B(198));uu||(uu=!0,hh=d)}}function ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rg(t){if(ks(t)!==t)throw Error(B(188))}function mT(t){var e=t.alternate;if(!e){if(e=ks(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rg(s),t;if(i===r)return Rg(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function o0(t){return t=mT(t),t!==null?a0(t):null}function a0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a0(t);if(e!==null)return e;t=t.sibling}return null}var l0=Mt.unstable_scheduleCallback,Cg=Mt.unstable_cancelCallback,gT=Mt.unstable_shouldYield,yT=Mt.unstable_requestPaint,Me=Mt.unstable_now,vT=Mt.unstable_getCurrentPriorityLevel,Df=Mt.unstable_ImmediatePriority,u0=Mt.unstable_UserBlockingPriority,cu=Mt.unstable_NormalPriority,_T=Mt.unstable_LowPriority,c0=Mt.unstable_IdlePriority,ec=null,yn=null;function xT(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:ET,wT=Math.log,IT=Math.LN2;function ET(t){return t>>>=0,t===0?32:31-(wT(t)/IT|0)|0}var pl=64,ml=4194304;function Eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function du(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Eo(a):(i&=o,i!==0&&(r=Eo(i)))}else o=n&~s,o!==0?r=Eo(o):i!==0&&(r=Eo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function bT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=bT(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d0(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function ST(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function h0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f0,Vf,p0,m0,g0,ph=!1,gl=[],xr=null,wr=null,Ir=null,Xo=new Map,Yo=new Map,ur=[],NT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(e.pointerId)}}function uo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Aa(e),e!==null&&Vf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function AT(t,e,n,r,s){switch(e){case"focusin":return xr=uo(xr,t,e,n,r,s),!0;case"dragenter":return wr=uo(wr,t,e,n,r,s),!0;case"mouseover":return Ir=uo(Ir,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xo.set(i,uo(Xo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yo.set(i,uo(Yo.get(i)||null,t,e,n,r,s)),!0}return!1}function y0(t){var e=os(t.target);if(e!==null){var n=ks(e);if(n!==null){if(e=n.tag,e===13){if(e=i0(n),e!==null){t.blockedOn=e,g0(t.priority,function(){p0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ll(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uh=r,n.target.dispatchEvent(r),uh=null}else return e=Aa(n),e!==null&&Vf(e),t.blockedOn=n,!1;e.shift()}return!0}function kg(t,e,n){Ll(t)&&n.delete(e)}function RT(){ph=!1,xr!==null&&Ll(xr)&&(xr=null),wr!==null&&Ll(wr)&&(wr=null),Ir!==null&&Ll(Ir)&&(Ir=null),Xo.forEach(kg),Yo.forEach(kg)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,ph||(ph=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,RT)))}function Jo(t){function e(s){return co(s,t)}if(0<gl.length){co(gl[0],t);for(var n=1;n<gl.length;n++){var r=gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&co(xr,t),wr!==null&&co(wr,t),Ir!==null&&co(Ir,t),Xo.forEach(e),Yo.forEach(e),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)y0(n),n.blockedOn===null&&ur.shift()}var mi=Jn.ReactCurrentBatchConfig,hu=!0;function CT(t,e,n,r){var s=fe,i=mi.transition;mi.transition=null;try{fe=1,Of(t,e,n,r)}finally{fe=s,mi.transition=i}}function PT(t,e,n,r){var s=fe,i=mi.transition;mi.transition=null;try{fe=4,Of(t,e,n,r)}finally{fe=s,mi.transition=i}}function Of(t,e,n,r){if(hu){var s=mh(t,e,n,r);if(s===null)Td(t,e,r,fu,n),Pg(t,r);else if(AT(s,t,e,n,r))r.stopPropagation();else if(Pg(t,r),e&4&&-1<NT.indexOf(t)){for(;s!==null;){var i=Aa(s);if(i!==null&&f0(i),i=mh(t,e,n,r),i===null&&Td(t,e,r,fu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Td(t,e,r,null,n)}}var fu=null;function mh(t,e,n,r){if(fu=null,t=kf(r),t=os(t),t!==null)if(e=ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fu=t,null}function v0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vT()){case Df:return 1;case u0:return 4;case cu:case _T:return 16;case c0:return 536870912;default:return 16}default:return 16}}var gr=null,Lf=null,Ml=null;function _0(){if(Ml)return Ml;var t,e=Lf,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ml=s.slice(t,1<r?1-r:void 0)}function Fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function Dg(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yl:Dg,this.isPropagationStopped=Dg,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=Bt(Fi),Na=De({},Fi,{view:0,detail:0}),kT=Bt(Na),gd,yd,ho,tc=De({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ho&&(ho&&t.type==="mousemove"?(gd=t.screenX-ho.screenX,yd=t.screenY-ho.screenY):yd=gd=0,ho=t),gd)},movementY:function(t){return"movementY"in t?t.movementY:yd}}),jg=Bt(tc),DT=De({},tc,{dataTransfer:0}),jT=Bt(DT),VT=De({},Na,{relatedTarget:0}),vd=Bt(VT),OT=De({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),LT=Bt(OT),MT=De({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FT=Bt(MT),UT=De({},Fi,{data:0}),Vg=Bt(UT),BT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$T[t])?!!e[t]:!1}function Ff(){return qT}var KT=De({},Na,{key:function(t){if(t.key){var e=BT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ff,charCode:function(t){return t.type==="keypress"?Fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GT=Bt(KT),WT=De({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=Bt(WT),HT=De({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ff}),QT=Bt(HT),XT=De({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),YT=Bt(XT),JT=De({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZT=Bt(JT),eS=[9,13,27,32],Uf=Kn&&"CompositionEvent"in window,jo=null;Kn&&"documentMode"in document&&(jo=document.documentMode);var tS=Kn&&"TextEvent"in window&&!jo,x0=Kn&&(!Uf||jo&&8<jo&&11>=jo),Lg=" ",Mg=!1;function w0(t,e){switch(t){case"keyup":return eS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ti=!1;function nS(t,e){switch(t){case"compositionend":return I0(e);case"keypress":return e.which!==32?null:(Mg=!0,Lg);case"textInput":return t=e.data,t===Lg&&Mg?null:t;default:return null}}function rS(t,e){if(ti)return t==="compositionend"||!Uf&&w0(t,e)?(t=_0(),Ml=Lf=gr=null,ti=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x0&&e.locale!=="ko"?null:e.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sS[t.type]:e==="textarea"}function E0(t,e,n,r){e0(r),e=pu(e,"onChange"),0<e.length&&(n=new Mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vo=null,Zo=null;function iS(t){j0(t,0)}function nc(t){var e=si(t);if(W_(e))return t}function oS(t,e){if(t==="change")return e}var b0=!1;if(Kn){var _d;if(Kn){var xd="oninput"in document;if(!xd){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),xd=typeof Ug.oninput=="function"}_d=xd}else _d=!1;b0=_d&&(!document.documentMode||9<document.documentMode)}function Bg(){Vo&&(Vo.detachEvent("onpropertychange",T0),Zo=Vo=null)}function T0(t){if(t.propertyName==="value"&&nc(Zo)){var e=[];E0(e,Zo,t,kf(t)),s0(iS,e)}}function aS(t,e,n){t==="focusin"?(Bg(),Vo=e,Zo=n,Vo.attachEvent("onpropertychange",T0)):t==="focusout"&&Bg()}function lS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(Zo)}function uS(t,e){if(t==="click")return nc(e)}function cS(t,e){if(t==="input"||t==="change")return nc(e)}function dS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:dS;function ea(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yd.call(e,s)||!an(t[s],e[s]))return!1}return!0}function zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=zg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zg(n)}}function S0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N0(){for(var t=window,e=au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=au(t.document)}return e}function Bf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hS(t){var e=N0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S0(n.ownerDocument.documentElement,n)){if(r!==null&&Bf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$g(n,i);var o=$g(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fS=Kn&&"documentMode"in document&&11>=document.documentMode,ni=null,gh=null,Oo=null,yh=!1;function qg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yh||ni==null||ni!==au(r)||(r=ni,"selectionStart"in r&&Bf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&ea(Oo,r)||(Oo=r,r=pu(gh,"onSelect"),0<r.length&&(e=new Mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ni)))}function vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ri={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},wd={},A0={};Kn&&(A0=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function rc(t){if(wd[t])return wd[t];if(!ri[t])return t;var e=ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A0)return wd[t]=e[n];return t}var R0=rc("animationend"),C0=rc("animationiteration"),P0=rc("animationstart"),k0=rc("transitionend"),D0=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){D0.set(t,e),Ps(e,[t])}for(var Id=0;Id<Kg.length;Id++){var Ed=Kg[Id],pS=Ed.toLowerCase(),mS=Ed[0].toUpperCase()+Ed.slice(1);Mr(pS,"on"+mS)}Mr(R0,"onAnimationEnd");Mr(C0,"onAnimationIteration");Mr(P0,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(k0,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function Gg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pT(r,e,void 0,t),t.currentTarget=null}function j0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Gg(s,a,d),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Gg(s,a,d),i=u}}}if(uu)throw t=hh,uu=!1,hh=null,t}function xe(t,e){var n=e[Ih];n===void 0&&(n=e[Ih]=new Set);var r=t+"__bubble";n.has(r)||(V0(e,t,2,!1),n.add(r))}function bd(t,e,n){var r=0;e&&(r|=4),V0(n,t,r,e)}var _l="_reactListening"+Math.random().toString(36).slice(2);function ta(t){if(!t[_l]){t[_l]=!0,z_.forEach(function(n){n!=="selectionchange"&&(gS.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_l]||(e[_l]=!0,bd("selectionchange",!1,e))}}function V0(t,e,n,r){switch(v0(e)){case 1:var s=CT;break;case 4:s=PT;break;default:s=Of}n=s.bind(null,e,n,t),s=void 0,!dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Td(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=os(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}s0(function(){var d=i,f=kf(n),p=[];e:{var m=D0.get(t);if(m!==void 0){var y=Mf,S=t;switch(t){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":y=GT;break;case"focusin":S="focus",y=vd;break;case"focusout":S="blur",y=vd;break;case"beforeblur":case"afterblur":y=vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=jT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=QT;break;case R0:case C0:case P0:y=LT;break;case k0:y=YT;break;case"scroll":y=kT;break;case"wheel":y=ZT;break;case"copy":case"cut":case"paste":y=FT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Og}var N=(e&4)!==0,E=!N&&t==="scroll",_=N?m!==null?m+"Capture":null:m;N=[];for(var w=d,b;w!==null;){b=w;var O=b.stateNode;if(b.tag===5&&O!==null&&(b=O,_!==null&&(O=Qo(w,_),O!=null&&N.push(na(w,O,b)))),E)break;w=w.return}0<N.length&&(m=new y(m,S,null,n,f),p.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==uh&&(S=n.relatedTarget||n.fromElement)&&(os(S)||S[Gn]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=d,S=S?os(S):null,S!==null&&(E=ks(S),S!==E||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=d),y!==S)){if(N=jg,O="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=Og,O="onPointerLeave",_="onPointerEnter",w="pointer"),E=y==null?m:si(y),b=S==null?m:si(S),m=new N(O,w+"leave",y,n,f),m.target=E,m.relatedTarget=b,O=null,os(f)===d&&(N=new N(_,w+"enter",S,n,f),N.target=b,N.relatedTarget=E,O=N),E=O,y&&S)t:{for(N=y,_=S,w=0,b=N;b;b=$s(b))w++;for(b=0,O=_;O;O=$s(O))b++;for(;0<w-b;)N=$s(N),w--;for(;0<b-w;)_=$s(_),b--;for(;w--;){if(N===_||_!==null&&N===_.alternate)break t;N=$s(N),_=$s(_)}N=null}else N=null;y!==null&&Wg(p,m,y,N,!1),S!==null&&E!==null&&Wg(p,E,S,N,!0)}}e:{if(m=d?si(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var M=oS;else if(Fg(m))if(b0)M=cS;else{M=lS;var P=aS}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=uS);if(M&&(M=M(t,d))){E0(p,M,n,f);break e}P&&P(t,m,d),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&sh(m,"number",m.value)}switch(P=d?si(d):window,t){case"focusin":(Fg(P)||P.contentEditable==="true")&&(ni=P,gh=d,Oo=null);break;case"focusout":Oo=gh=ni=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,qg(p,n,f);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":qg(p,n,f)}var I;if(Uf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ti?w0(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(x0&&n.locale!=="ko"&&(ti||x!=="onCompositionStart"?x==="onCompositionEnd"&&ti&&(I=_0()):(gr=f,Lf="value"in gr?gr.value:gr.textContent,ti=!0)),P=pu(d,x),0<P.length&&(x=new Vg(x,t,null,n,f),p.push({event:x,listeners:P}),I?x.data=I:(I=I0(n),I!==null&&(x.data=I)))),(I=tS?nS(t,n):rS(t,n))&&(d=pu(d,"onBeforeInput"),0<d.length&&(f=new Vg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=I))}j0(p,e)})}function na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qo(t,n),i!=null&&r.unshift(na(t,i,s)),i=Qo(t,e),i!=null&&r.push(na(t,i,s))),t=t.return}return r}function $s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,s?(u=Qo(n,i),u!=null&&o.unshift(na(n,u,a))):s||(u=Qo(n,i),u!=null&&o.push(na(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yS=/\r\n?/g,vS=/\u0000|\uFFFD/g;function Hg(t){return(typeof t=="string"?t:""+t).replace(yS,`
`).replace(vS,"")}function xl(t,e,n){if(e=Hg(e),Hg(t)!==e&&n)throw Error(B(425))}function mu(){}var vh=null,_h=null;function xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wh=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(t){return Qg.resolve(null).then(t).catch(wS)}:wh;function wS(t){setTimeout(function(){throw t})}function Sd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jo(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ui,ra="__reactProps$"+Ui,Gn="__reactContainer$"+Ui,Ih="__reactEvents$"+Ui,IS="__reactListeners$"+Ui,ES="__reactHandles$"+Ui;function os(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[fn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function Aa(t){return t=t[fn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function sc(t){return t[ra]||null}var Eh=[],ii=-1;function Fr(t){return{current:t}}function we(t){0>ii||(t.current=Eh[ii],Eh[ii]=null,ii--)}function ve(t,e){ii++,Eh[ii]=t.current,t.current=e}var Dr={},ft=Fr(Dr),Ct=Fr(!1),ps=Dr;function Ei(t,e){var n=t.type.contextTypes;if(!n)return Dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function gu(){we(Ct),we(ft)}function Yg(t,e,n){if(ft.current!==Dr)throw Error(B(168));ve(ft,e),ve(Ct,n)}function O0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,aT(t)||"Unknown",s));return De({},n,r)}function yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,ps=ft.current,ve(ft,t),ve(Ct,Ct.current),!0}function Jg(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=O0(t,e,ps),r.__reactInternalMemoizedMergedChildContext=t,we(Ct),we(ft),ve(ft,t)):we(Ct),ve(Ct,n)}var On=null,ic=!1,Nd=!1;function L0(t){On===null?On=[t]:On.push(t)}function bS(t){ic=!0,L0(t)}function Ur(){if(!Nd&&On!==null){Nd=!0;var t=0,e=fe;try{var n=On;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,ic=!1}catch(s){throw On!==null&&(On=On.slice(t+1)),l0(Df,Ur),s}finally{fe=e,Nd=!1}}return null}var oi=[],ai=0,vu=null,_u=0,$t=[],qt=0,ms=null,Ln=1,Mn="";function Jr(t,e){oi[ai++]=_u,oi[ai++]=vu,vu=t,_u=e}function M0(t,e,n){$t[qt++]=Ln,$t[qt++]=Mn,$t[qt++]=ms,ms=t;var r=Ln;t=Mn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ln=1<<32-sn(e)+s|n<<s|r,Mn=i+t}else Ln=1<<i|n<<s|r,Mn=t}function zf(t){t.return!==null&&(Jr(t,1),M0(t,1,0))}function $f(t){for(;t===vu;)vu=oi[--ai],oi[ai]=null,_u=oi[--ai],oi[ai]=null;for(;t===ms;)ms=$t[--qt],$t[qt]=null,Mn=$t[--qt],$t[qt]=null,Ln=$t[--qt],$t[qt]=null}var Lt=null,Vt=null,be=!1,nn=null;function F0(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Vt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Ln,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Vt=null,!0):!1;default:return!1}}function bh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Th(t){if(be){var e=Vt;if(e){var n=e;if(!Zg(t,e)){if(bh(t))throw Error(B(418));e=Er(n.nextSibling);var r=Lt;e&&Zg(t,e)?F0(r,n):(t.flags=t.flags&-4097|2,be=!1,Lt=t)}}else{if(bh(t))throw Error(B(418));t.flags=t.flags&-4097|2,be=!1,Lt=t}}}function ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function wl(t){if(t!==Lt)return!1;if(!be)return ey(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xh(t.type,t.memoizedProps)),e&&(e=Vt)){if(bh(t))throw U0(),Error(B(418));for(;e;)F0(t,e),e=Er(e.nextSibling)}if(ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Lt?Er(t.stateNode.nextSibling):null;return!0}function U0(){for(var t=Vt;t;)t=Er(t.nextSibling)}function bi(){Vt=Lt=null,be=!1}function qf(t){nn===null?nn=[t]:nn.push(t)}var TS=Jn.ReactCurrentBatchConfig;function fo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Il(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ty(t){var e=t._init;return e(t._payload)}function B0(t){function e(_,w){if(t){var b=_.deletions;b===null?(_.deletions=[w],_.flags|=16):b.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Nr(_,w),_.index=0,_.sibling=null,_}function i(_,w,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<w?(_.flags|=2,w):b):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,b,O){return w===null||w.tag!==6?(w=jd(b,_.mode,O),w.return=_,w):(w=s(w,b),w.return=_,w)}function u(_,w,b,O){var M=b.type;return M===ei?f(_,w,b.props.children,O,b.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ar&&ty(M)===w.type)?(O=s(w,b.props),O.ref=fo(_,w,b),O.return=_,O):(O=Gl(b.type,b.key,b.props,null,_.mode,O),O.ref=fo(_,w,b),O.return=_,O)}function d(_,w,b,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Vd(b,_.mode,O),w.return=_,w):(w=s(w,b.children||[]),w.return=_,w)}function f(_,w,b,O,M){return w===null||w.tag!==7?(w=cs(b,_.mode,O,M),w.return=_,w):(w=s(w,b),w.return=_,w)}function p(_,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=jd(""+w,_.mode,b),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dl:return b=Gl(w.type,w.key,w.props,null,_.mode,b),b.ref=fo(_,null,w),b.return=_,b;case Zs:return w=Vd(w,_.mode,b),w.return=_,w;case ar:var O=w._init;return p(_,O(w._payload),b)}if(Io(w)||ao(w))return w=cs(w,_.mode,b,null),w.return=_,w;Il(_,w)}return null}function m(_,w,b,O){var M=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:a(_,w,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return b.key===M?u(_,w,b,O):null;case Zs:return b.key===M?d(_,w,b,O):null;case ar:return M=b._init,m(_,w,M(b._payload),O)}if(Io(b)||ao(b))return M!==null?null:f(_,w,b,O,null);Il(_,b)}return null}function y(_,w,b,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return _=_.get(b)||null,a(w,_,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case dl:return _=_.get(O.key===null?b:O.key)||null,u(w,_,O,M);case Zs:return _=_.get(O.key===null?b:O.key)||null,d(w,_,O,M);case ar:var P=O._init;return y(_,w,b,P(O._payload),M)}if(Io(O)||ao(O))return _=_.get(b)||null,f(w,_,O,M,null);Il(w,O)}return null}function S(_,w,b,O){for(var M=null,P=null,I=w,x=w=0,T=null;I!==null&&x<b.length;x++){I.index>x?(T=I,I=null):T=I.sibling;var A=m(_,I,b[x],O);if(A===null){I===null&&(I=T);break}t&&I&&A.alternate===null&&e(_,I),w=i(A,w,x),P===null?M=A:P.sibling=A,P=A,I=T}if(x===b.length)return n(_,I),be&&Jr(_,x),M;if(I===null){for(;x<b.length;x++)I=p(_,b[x],O),I!==null&&(w=i(I,w,x),P===null?M=I:P.sibling=I,P=I);return be&&Jr(_,x),M}for(I=r(_,I);x<b.length;x++)T=y(I,_,x,b[x],O),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?x:T.key),w=i(T,w,x),P===null?M=T:P.sibling=T,P=T);return t&&I.forEach(function(C){return e(_,C)}),be&&Jr(_,x),M}function N(_,w,b,O){var M=ao(b);if(typeof M!="function")throw Error(B(150));if(b=M.call(b),b==null)throw Error(B(151));for(var P=M=null,I=w,x=w=0,T=null,A=b.next();I!==null&&!A.done;x++,A=b.next()){I.index>x?(T=I,I=null):T=I.sibling;var C=m(_,I,A.value,O);if(C===null){I===null&&(I=T);break}t&&I&&C.alternate===null&&e(_,I),w=i(C,w,x),P===null?M=C:P.sibling=C,P=C,I=T}if(A.done)return n(_,I),be&&Jr(_,x),M;if(I===null){for(;!A.done;x++,A=b.next())A=p(_,A.value,O),A!==null&&(w=i(A,w,x),P===null?M=A:P.sibling=A,P=A);return be&&Jr(_,x),M}for(I=r(_,I);!A.done;x++,A=b.next())A=y(I,_,x,A.value,O),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?x:A.key),w=i(A,w,x),P===null?M=A:P.sibling=A,P=A);return t&&I.forEach(function(j){return e(_,j)}),be&&Jr(_,x),M}function E(_,w,b,O){if(typeof b=="object"&&b!==null&&b.type===ei&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:e:{for(var M=b.key,P=w;P!==null;){if(P.key===M){if(M=b.type,M===ei){if(P.tag===7){n(_,P.sibling),w=s(P,b.props.children),w.return=_,_=w;break e}}else if(P.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ar&&ty(M)===P.type){n(_,P.sibling),w=s(P,b.props),w.ref=fo(_,P,b),w.return=_,_=w;break e}n(_,P);break}else e(_,P);P=P.sibling}b.type===ei?(w=cs(b.props.children,_.mode,O,b.key),w.return=_,_=w):(O=Gl(b.type,b.key,b.props,null,_.mode,O),O.ref=fo(_,w,b),O.return=_,_=O)}return o(_);case Zs:e:{for(P=b.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(_,w.sibling),w=s(w,b.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Vd(b,_.mode,O),w.return=_,_=w}return o(_);case ar:return P=b._init,E(_,w,P(b._payload),O)}if(Io(b))return S(_,w,b,O);if(ao(b))return N(_,w,b,O);Il(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,b),w.return=_,_=w):(n(_,w),w=jd(b,_.mode,O),w.return=_,_=w),o(_)):n(_,w)}return E}var Ti=B0(!0),z0=B0(!1),xu=Fr(null),wu=null,li=null,Kf=null;function Gf(){Kf=li=wu=null}function Wf(t){var e=xu.current;we(xu),t._currentValue=e}function Sh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function gi(t,e){wu=t,Kf=li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(Kf!==t)if(t={context:t,memoizedValue:e,next:null},li===null){if(wu===null)throw Error(B(308));li=t,wu.dependencies={lanes:0,firstContext:t}}else li=li.next=t;return e}var as=null;function Hf(t){as===null?as=[t]:as.push(t)}function $0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wn(t,n)}return s=r.interleaved,s===null?(e.next=e,Hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wn(t,n)}function Ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}function ny(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Iu(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,N=a;switch(m=e,y=n,N.tag){case 1:if(S=N.payload,typeof S=="function"){p=S.call(y,p,m);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=N.payload,m=typeof S=="function"?S.call(y,p,m):S,m==null)break e;p=De({},p,m);break e;case 2:lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=y,u=p):f=f.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ys|=o,t.lanes=o,t.memoizedState=p}}function ry(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ra={},vn=Fr(Ra),sa=Fr(Ra),ia=Fr(Ra);function ls(t){if(t===Ra)throw Error(B(174));return t}function Xf(t,e){switch(ve(ia,e),ve(sa,t),ve(vn,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=oh(e,t)}we(vn),ve(vn,e)}function Si(){we(vn),we(sa),we(ia)}function K0(t){ls(ia.current);var e=ls(vn.current),n=oh(e,t.type);e!==n&&(ve(sa,t),ve(vn,n))}function Yf(t){sa.current===t&&(we(vn),we(sa))}var Re=Fr(0);function Eu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ad=[];function Jf(){for(var t=0;t<Ad.length;t++)Ad[t]._workInProgressVersionPrimary=null;Ad.length=0}var Bl=Jn.ReactCurrentDispatcher,Rd=Jn.ReactCurrentBatchConfig,gs=0,Pe=null,Ke=null,Ye=null,bu=!1,Lo=!1,oa=0,SS=0;function lt(){throw Error(B(321))}function Zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function ep(t,e,n,r,s,i){if(gs=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bl.current=t===null||t.memoizedState===null?CS:PS,t=n(r,s),Lo){i=0;do{if(Lo=!1,oa=0,25<=i)throw Error(B(301));i+=1,Ye=Ke=null,e.updateQueue=null,Bl.current=kS,t=n(r,s)}while(Lo)}if(Bl.current=Tu,e=Ke!==null&&Ke.next!==null,gs=0,Ye=Ke=Pe=null,bu=!1,e)throw Error(B(300));return t}function tp(){var t=oa!==0;return oa=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Pe.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Yt(){if(Ke===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ye===null?Pe.memoizedState:Ye.next;if(e!==null)Ye=e,Ke=t;else{if(t===null)throw Error(B(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ye===null?Pe.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function aa(t,e){return typeof e=="function"?e(t):e}function Cd(t){var e=Yt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,d=i;do{var f=d.lane;if((gs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,Pe.lanes|=f,ys|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=a,an(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,ys|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pd(t){var e=Yt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function G0(){}function W0(t,e){var n=Pe,r=Yt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,np(X0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,la(9,Q0.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(B(349));gs&30||H0(n,e,s)}return s}function H0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q0(t,e,n,r){e.value=n,e.getSnapshot=r,Y0(e)&&J0(t)}function X0(t,e,n){return n(function(){Y0(e)&&J0(t)})}function Y0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function J0(t){var e=Wn(t,1);e!==null&&on(e,t,1,-1)}function sy(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:t},e.queue=t,t=t.dispatch=RS.bind(null,Pe,t),[e.memoizedState,t]}function la(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z0(){return Yt().memoizedState}function zl(t,e,n,r){var s=hn();Pe.flags|=t,s.memoizedState=la(1|e,n,void 0,r===void 0?null:r)}function oc(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Zf(r,o.deps)){s.memoizedState=la(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=la(1|e,n,i,r)}function iy(t,e){return zl(8390656,8,t,e)}function np(t,e){return oc(2048,8,t,e)}function ex(t,e){return oc(4,2,t,e)}function tx(t,e){return oc(4,4,t,e)}function nx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rx(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,nx.bind(null,e,t),n)}function rp(){}function sx(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ix(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ox(t,e,n){return gs&21?(an(n,e)||(n=d0(),Pe.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function NS(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Rd.transition;Rd.transition={};try{t(!1),e()}finally{fe=n,Rd.transition=r}}function ax(){return Yt().memoizedState}function AS(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lx(t))ux(e,n);else if(n=$0(t,e,n,r),n!==null){var s=_t();on(n,t,r,s),cx(n,e,r)}}function RS(t,e,n){var r=Sr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lx(t))ux(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,an(a,o)){var u=e.interleaved;u===null?(s.next=s,Hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=$0(t,e,s,r),n!==null&&(s=_t(),on(n,t,r,s),cx(n,e,r))}}function lx(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function ux(t,e){Lo=bu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}var Tu={readContext:Xt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},CS={readContext:Xt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:iy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zl(4194308,4,nx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return zl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AS.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:rp,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=NS.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=hn();if(be){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Je===null)throw Error(B(349));gs&30||H0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,iy(X0.bind(null,r,i,t),[t]),r.flags|=2048,la(9,Q0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=Je.identifierPrefix;if(be){var n=Mn,r=Ln;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PS={readContext:Xt,useCallback:sx,useContext:Xt,useEffect:np,useImperativeHandle:rx,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Cd,useRef:Z0,useState:function(){return Cd(aa)},useDebugValue:rp,useDeferredValue:function(t){var e=Yt();return ox(e,Ke.memoizedState,t)},useTransition:function(){var t=Cd(aa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:G0,useSyncExternalStore:W0,useId:ax,unstable_isNewReconciler:!1},kS={readContext:Xt,useCallback:sx,useContext:Xt,useEffect:np,useImperativeHandle:rx,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Pd,useRef:Z0,useState:function(){return Pd(aa)},useDebugValue:rp,useDeferredValue:function(t){var e=Yt();return Ke===null?e.memoizedState=t:ox(e,Ke.memoizedState,t)},useTransition:function(){var t=Pd(aa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:G0,useSyncExternalStore:W0,useId:ax,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Sr(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(on(e,t,s,r),Ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Sr(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(on(e,t,s,r),Ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Sr(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(on(e,t,r,n),Ul(e,t,r))}};function oy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ea(n,r)||!ea(s,i):!0}function dx(t,e,n){var r=!1,s=Dr,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Pt(e)?ps:ft.current,r=e.contextTypes,i=(r=r!=null)?Ei(t,s):Dr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ay(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function Ah(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Pt(e)?ps:ft.current,s.context=Ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ac.enqueueReplaceState(s,s.state,null),Iu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",r=e;do n+=oT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DS=typeof WeakMap=="function"?WeakMap:Map;function hx(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nu||(Nu=!0,Fh=r),Rh(t,e)},n}function fx(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Rh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rh(t,e),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ly(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WS.bind(null,t,e,n),e.then(t,t))}function uy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var jS=Jn.ReactCurrentOwner,At=!1;function gt(t,e,n,r){e.child=t===null?z0(e,null,n,r):Ti(e,t.child,n,r)}function dy(t,e,n,r,s){n=n.render;var i=e.ref;return gi(e,s),r=ep(t,e,n,r,i,s),n=tp(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hn(t,e,s)):(be&&n&&zf(e),e.flags|=1,gt(t,e,r,s),e.child)}function hy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,px(t,e,i,r,s)):(t=Gl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ea,n(o,r)&&t.ref===e.ref)return Hn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function px(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ea(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Hn(t,e,s)}return Ch(t,e,n,r,s)}function mx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ci,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(ci,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(ci,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(ci,jt),jt|=r;return gt(t,e,s,n),e.child}function gx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ch(t,e,n,r,s){var i=Pt(n)?ps:ft.current;return i=Ei(e,i),gi(e,s),n=ep(t,e,n,r,i,s),r=tp(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hn(t,e,s)):(be&&r&&zf(e),e.flags|=1,gt(t,e,n,s),e.child)}function fy(t,e,n,r,s){if(Pt(n)){var i=!0;yu(e)}else i=!1;if(gi(e,s),e.stateNode===null)$l(t,e),dx(e,n,r),Ah(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Xt(d):(d=Pt(n)?ps:ft.current,d=Ei(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==d)&&ay(e,o,r,d),lr=!1;var m=e.memoizedState;o.state=m,Iu(e,r,o,s),u=e.memoizedState,a!==r||m!==u||Ct.current||lr?(typeof f=="function"&&(Nh(e,n,f,r),u=e.memoizedState),(a=lr||oy(e,n,a,r,m,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:en(e.type,a),o.props=d,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xt(u):(u=Pt(n)?ps:ft.current,u=Ei(e,u));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==u)&&ay(e,o,r,u),lr=!1,m=e.memoizedState,o.state=m,Iu(e,r,o,s);var S=e.memoizedState;a!==p||m!==S||Ct.current||lr?(typeof y=="function"&&(Nh(e,n,y,r),S=e.memoizedState),(d=lr||oy(e,n,d,r,m,S,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ph(t,e,n,r,i,s)}function Ph(t,e,n,r,s,i){gx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Jg(e,n,!1),Hn(t,e,i);r=e.stateNode,jS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ti(e,t.child,null,i),e.child=Ti(e,null,a,i)):gt(t,e,a,i),e.memoizedState=r.state,s&&Jg(e,n,!0),e.child}function yx(t){var e=t.stateNode;e.pendingContext?Yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yg(t,e.context,!1),Xf(t,e.containerInfo)}function py(t,e,n,r,s){return bi(),qf(s),e.flags|=256,gt(t,e,n,r),e.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Dh(t){return{baseLanes:t,cachePool:null,transitions:null}}function vx(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Re,s&1),t===null)return Th(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cc(o,r,0,null),t=cs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Dh(n),e.memoizedState=kh,t):sp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return VS(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Nr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Nr(a,i):(i=cs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Dh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=kh,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sp(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function El(t,e,n,r){return r!==null&&qf(r),Ti(e,t.child,null,n),t=sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(B(422))),El(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cc({mode:"visible",children:r.children},s,0,null),i=cs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ti(e,t.child,null,o),e.child.memoizedState=Dh(o),e.memoizedState=kh,i);if(!(e.mode&1))return El(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=kd(i,r,void 0),El(t,e,o,r)}if(a=(o&t.childLanes)!==0,At||a){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wn(t,s),on(r,t,s,-1))}return cp(),r=kd(Error(B(421))),El(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=Er(s.nextSibling),Lt=e,be=!0,nn=null,t!==null&&($t[qt++]=Ln,$t[qt++]=Mn,$t[qt++]=ms,Ln=t.id,Mn=t.overflow,ms=e),e=sp(e,r.children),e.flags|=4096,e)}function my(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sh(t.return,e,n)}function Dd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _x(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&my(t,n,e);else if(t.tag===19)my(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Eu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Eu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dd(e,!0,n,null,i);break;case"together":Dd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OS(t,e,n){switch(e.tag){case 3:yx(e),bi();break;case 5:K0(e);break;case 1:Pt(e.type)&&yu(e);break;case 4:Xf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(xu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?vx(t,e,n):(ve(Re,Re.current&1),t=Hn(t,e,n),t!==null?t.sibling:null);ve(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _x(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,mx(t,e,n)}return Hn(t,e,n)}var xx,jh,wx,Ix;xx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jh=function(){};wx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ls(vn.current);var i=null;switch(n){case"input":s=nh(t,s),r=nh(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=ih(t,s),r=ih(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mu)}ah(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&xe("scroll",t),i||a===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ix=function(t,e,n,r){n!==r&&(e.flags|=4)};function po(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LS(t,e,n){var r=e.pendingProps;switch($f(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Pt(e.type)&&gu(),ut(e),null;case 3:return r=e.stateNode,Si(),we(Ct),we(ft),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(zh(nn),nn=null))),jh(t,e),ut(e),null;case 5:Yf(e);var s=ls(ia.current);if(n=e.type,t!==null&&e.stateNode!=null)wx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ut(e),null}if(t=ls(vn.current),wl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[ra]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<bo.length;s++)xe(bo[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":bg(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Sg(r,i),xe("invalid",r)}ah(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,a,t),s=["children",""+a]):Wo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":hl(r),Tg(r,i,!0);break;case"textarea":hl(r),Ng(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=X_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[ra]=r,xx(t,e,!1,!1),e.stateNode=t;e:{switch(o=lh(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<bo.length;s++)xe(bo[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":bg(t,r),s=nh(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Sg(t,r),s=ih(t,r),xe("invalid",t);break;default:s=r}ah(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?Z_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Y_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ho(t,u):typeof u=="number"&&Ho(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&xe("scroll",t):u!=null&&Af(t,i,u,o))}switch(n){case"input":hl(t),Tg(t,r,!1);break;case"textarea":hl(t),Ng(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?hi(t,!!r.multiple,i,!1):r.defaultValue!=null&&hi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)Ix(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ls(ia.current),ls(vn.current),wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return ut(e),null;case 13:if(we(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Vt!==null&&e.mode&1&&!(e.flags&128))U0(),bi(),e.flags|=98560,i=!1;else if(i=wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[fn]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else nn!==null&&(zh(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ge===0&&(Ge=3):cp())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Si(),jh(t,e),t===null&&ta(e.stateNode.containerInfo),ut(e),null;case 10:return Wf(e.type._context),ut(e),null;case 17:return Pt(e.type)&&gu(),ut(e),null;case 19:if(we(Re),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)po(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Eu(t),o!==null){for(e.flags|=128,po(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Ai&&(e.flags|=128,r=!0,po(i,!1),e.lanes=4194304)}else{if(!r)if(t=Eu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),po(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return ut(e),null}else 2*Me()-i.renderingStartTime>Ai&&n!==1073741824&&(e.flags|=128,r=!0,po(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Re.current,ve(Re,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function MS(t,e){switch($f(e),e.tag){case 1:return Pt(e.type)&&gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Si(),we(Ct),we(ft),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yf(e),null;case 13:if(we(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Re),null;case 4:return Si(),null;case 10:return Wf(e.type._context),null;case 22:case 23:return up(),null;case 24:return null;default:return null}}var bl=!1,dt=!1,FS=typeof WeakSet=="function"?WeakSet:Set,G=null;function ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Vh(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var gy=!1;function US(t,e){if(vh=hu,t=N0(),Bf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,d=0,f=0,p=t,m=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++d===s&&(a=o),m===i&&++f===r&&(u=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(_h={focusedElem:t,selectionRange:n},hu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var N=S.memoizedProps,E=S.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?N:en(e.type,N),E);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(O){Ve(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return S=gy,gy=!1,S}function Mo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vh(e,n,i)}s=s.next}while(s!==r)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Oh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ex(t){var e=t.alternate;e!==null&&(t.alternate=null,Ex(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[ra],delete e[Ih],delete e[IS],delete e[ES])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bx(t){return t.tag===5||t.tag===3||t.tag===4}function yy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mu));else if(r!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}var et=null,tn=!1;function rr(t,e,n){for(n=n.child;n!==null;)Tx(t,e,n),n=n.sibling}function Tx(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:dt||ui(n,e);case 6:var r=et,s=tn;et=null,rr(t,e,n),et=r,tn=s,et!==null&&(tn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(tn?(t=et,n=n.stateNode,t.nodeType===8?Sd(t.parentNode,n):t.nodeType===1&&Sd(t,n),Jo(t)):Sd(et,n.stateNode));break;case 4:r=et,s=tn,et=n.stateNode.containerInfo,tn=!0,rr(t,e,n),et=r,tn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Vh(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!dt&&(ui(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ve(n,e,a)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,rr(t,e,n),dt=r):rr(t,e,n);break;default:rr(t,e,n)}}function vy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FS),e.forEach(function(r){var s=QS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,tn=!1;break e;case 3:et=a.stateNode.containerInfo,tn=!0;break e;case 4:et=a.stateNode.containerInfo,tn=!0;break e}a=a.return}if(et===null)throw Error(B(160));Tx(i,o,s),et=null,tn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ve(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sx(e,t),e=e.sibling}function Sx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),dn(t),r&4){try{Mo(3,t,t.return),lc(3,t)}catch(N){Ve(t,t.return,N)}try{Mo(5,t,t.return)}catch(N){Ve(t,t.return,N)}}break;case 1:Zt(e,t),dn(t),r&512&&n!==null&&ui(n,n.return);break;case 5:if(Zt(e,t),dn(t),r&512&&n!==null&&ui(n,n.return),t.flags&32){var s=t.stateNode;try{Ho(s,"")}catch(N){Ve(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&H_(s,i),lh(a,o);var d=lh(a,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Z_(s,p):f==="dangerouslySetInnerHTML"?Y_(s,p):f==="children"?Ho(s,p):Af(s,f,p,d)}switch(a){case"input":rh(s,i);break;case"textarea":Q_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?hi(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?hi(s,!!i.multiple,i.defaultValue,!0):hi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ra]=i}catch(N){Ve(t,t.return,N)}}break;case 6:if(Zt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ve(t,t.return,N)}}break;case 3:if(Zt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(N){Ve(t,t.return,N)}break;case 4:Zt(e,t),dn(t);break;case 13:Zt(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ap=Me())),r&4&&vy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,Zt(e,t),dt=d):Zt(e,t),dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(p=G=f;G!==null;){switch(m=G,y=m.child,m.tag){case 0:case 11:case 14:case 15:Mo(4,m,m.return);break;case 1:ui(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(N){Ve(r,n,N)}}break;case 5:ui(m,m.return);break;case 22:if(m.memoizedState!==null){xy(p);continue}}y!==null?(y.return=m,G=y):xy(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=J_("display",o))}catch(N){Ve(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){Ve(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zt(e,t),dn(t),r&4&&vy(t);break;case 21:break;default:Zt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bx(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ho(s,""),r.flags&=-33);var i=yy(t);Mh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yy(t);Lh(t,a,o);break;default:throw Error(B(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BS(t,e,n){G=t,Nx(t)}function Nx(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||dt;a=bl;var d=dt;if(bl=o,(dt=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?wy(s):u!==null?(u.return=o,G=u):wy(s);for(;i!==null;)G=i,Nx(i),i=i.sibling;G=s,bl=a,dt=d}_y(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):_y(t)}}function _y(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ry(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ry(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Jo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}dt||e.flags&512&&Oh(e)}catch(m){Ve(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function xy(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function wy(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(u){Ve(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ve(e,s,u)}}var i=e.return;try{Oh(e)}catch(u){Ve(e,i,u)}break;case 5:var o=e.return;try{Oh(e)}catch(u){Ve(e,o,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var zS=Math.ceil,Su=Jn.ReactCurrentDispatcher,ip=Jn.ReactCurrentOwner,Wt=Jn.ReactCurrentBatchConfig,le=0,Je=null,Ue=null,rt=0,jt=0,ci=Fr(0),Ge=0,ua=null,ys=0,uc=0,op=0,Fo=null,Nt=null,ap=0,Ai=1/0,Vn=null,Nu=!1,Fh=null,Tr=null,Tl=!1,yr=null,Au=0,Uo=0,Uh=null,ql=-1,Kl=0;function _t(){return le&6?Me():ql!==-1?ql:ql=Me()}function Sr(t){return t.mode&1?le&2&&rt!==0?rt&-rt:TS.transition!==null?(Kl===0&&(Kl=d0()),Kl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:v0(t.type)),t):1}function on(t,e,n,r){if(50<Uo)throw Uo=0,Uh=null,Error(B(185));Sa(t,n,r),(!(le&2)||t!==Je)&&(t===Je&&(!(le&2)&&(uc|=n),Ge===4&&cr(t,rt)),kt(t,r),n===1&&le===0&&!(e.mode&1)&&(Ai=Me()+500,ic&&Ur()))}function kt(t,e){var n=t.callbackNode;TT(t,e);var r=du(t,t===Je?rt:0);if(r===0)n!==null&&Cg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cg(n),e===1)t.tag===0?bS(Iy.bind(null,t)):L0(Iy.bind(null,t)),xS(function(){!(le&6)&&Ur()}),n=null;else{switch(h0(r)){case 1:n=Df;break;case 4:n=u0;break;case 16:n=cu;break;case 536870912:n=c0;break;default:n=cu}n=Vx(n,Ax.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ax(t,e){if(ql=-1,Kl=0,le&6)throw Error(B(327));var n=t.callbackNode;if(yi()&&t.callbackNode!==n)return null;var r=du(t,t===Je?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ru(t,r);else{e=r;var s=le;le|=2;var i=Cx();(Je!==t||rt!==e)&&(Vn=null,Ai=Me()+500,us(t,e));do try{KS();break}catch(a){Rx(t,a)}while(!0);Gf(),Su.current=i,le=s,Ue!==null?e=0:(Je=null,rt=0,e=Ge)}if(e!==0){if(e===2&&(s=fh(t),s!==0&&(r=s,e=Bh(t,s))),e===1)throw n=ua,us(t,0),cr(t,r),kt(t,Me()),n;if(e===6)cr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$S(s)&&(e=Ru(t,r),e===2&&(i=fh(t),i!==0&&(r=i,e=Bh(t,i))),e===1))throw n=ua,us(t,0),cr(t,r),kt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Zr(t,Nt,Vn);break;case 3:if(cr(t,r),(r&130023424)===r&&(e=ap+500-Me(),10<e)){if(du(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wh(Zr.bind(null,t,Nt,Vn),e);break}Zr(t,Nt,Vn);break;case 4:if(cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zS(r/1960))-r,10<r){t.timeoutHandle=wh(Zr.bind(null,t,Nt,Vn),r);break}Zr(t,Nt,Vn);break;case 5:Zr(t,Nt,Vn);break;default:throw Error(B(329))}}}return kt(t,Me()),t.callbackNode===n?Ax.bind(null,t):null}function Bh(t,e){var n=Fo;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=Ru(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&zh(e)),t}function zh(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function $S(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~op,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Iy(t){if(le&6)throw Error(B(327));yi();var e=du(t,0);if(!(e&1))return kt(t,Me()),null;var n=Ru(t,e);if(t.tag!==0&&n===2){var r=fh(t);r!==0&&(e=r,n=Bh(t,r))}if(n===1)throw n=ua,us(t,0),cr(t,e),kt(t,Me()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Nt,Vn),kt(t,Me()),null}function lp(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ai=Me()+500,ic&&Ur())}}function vs(t){yr!==null&&yr.tag===0&&!(le&6)&&yi();var e=le;le|=1;var n=Wt.transition,r=fe;try{if(Wt.transition=null,fe=1,t)return t()}finally{fe=r,Wt.transition=n,le=e,!(le&6)&&Ur()}}function up(){jt=ci.current,we(ci)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_S(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch($f(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gu();break;case 3:Si(),we(Ct),we(ft),Jf();break;case 5:Yf(r);break;case 4:Si();break;case 13:we(Re);break;case 19:we(Re);break;case 10:Wf(r.type._context);break;case 22:case 23:up()}n=n.return}if(Je=t,Ue=t=Nr(t.current,null),rt=jt=e,Ge=0,ua=null,op=uc=ys=0,Nt=Fo=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}as=null}return t}function Rx(t,e){do{var n=Ue;try{if(Gf(),Bl.current=Tu,bu){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bu=!1}if(gs=0,Ye=Ke=Pe=null,Lo=!1,oa=0,ip.current=null,n===null||n.return===null){Ge=1,ua=e,Ue=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=rt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=uy(o);if(y!==null){y.flags&=-257,cy(y,o,a,i,e),y.mode&1&&ly(i,d,e),e=y,u=d;var S=e.updateQueue;if(S===null){var N=new Set;N.add(u),e.updateQueue=N}else S.add(u);break e}else{if(!(e&1)){ly(i,d,e),cp();break e}u=Error(B(426))}}else if(be&&a.mode&1){var E=uy(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),cy(E,o,a,i,e),qf(Ni(u,a));break e}}i=u=Ni(u,a),Ge!==4&&(Ge=2),Fo===null?Fo=[i]:Fo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=hx(i,u,e);ny(i,_);break e;case 1:a=u;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Tr===null||!Tr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=fx(i,a,e);ny(i,O);break e}}i=i.return}while(i!==null)}kx(n)}catch(M){e=M,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Cx(){var t=Su.current;return Su.current=Tu,t===null?Tu:t}function cp(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Je===null||!(ys&268435455)&&!(uc&268435455)||cr(Je,rt)}function Ru(t,e){var n=le;le|=2;var r=Cx();(Je!==t||rt!==e)&&(Vn=null,us(t,e));do try{qS();break}catch(s){Rx(t,s)}while(!0);if(Gf(),le=n,Su.current=r,Ue!==null)throw Error(B(261));return Je=null,rt=0,Ge}function qS(){for(;Ue!==null;)Px(Ue)}function KS(){for(;Ue!==null&&!gT();)Px(Ue)}function Px(t){var e=jx(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?kx(t):Ue=e,ip.current=null}function kx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MS(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Ue=null;return}}else if(n=LS(n,e,jt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Ge===0&&(Ge=5)}function Zr(t,e,n){var r=fe,s=Wt.transition;try{Wt.transition=null,fe=1,GS(t,e,n,r)}finally{Wt.transition=s,fe=r}return null}function GS(t,e,n,r){do yi();while(yr!==null);if(le&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ST(t,i),t===Je&&(Ue=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,Vx(cu,function(){return yi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=fe;fe=1;var a=le;le|=4,ip.current=null,US(t,n),Sx(n,t),hS(_h),hu=!!vh,_h=vh=null,t.current=n,BS(n),yT(),le=a,fe=o,Wt.transition=i}else t.current=n;if(Tl&&(Tl=!1,yr=t,Au=s),i=t.pendingLanes,i===0&&(Tr=null),xT(n.stateNode),kt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nu)throw Nu=!1,t=Fh,Fh=null,t;return Au&1&&t.tag!==0&&yi(),i=t.pendingLanes,i&1?t===Uh?Uo++:(Uo=0,Uh=t):Uo=0,Ur(),null}function yi(){if(yr!==null){var t=h0(Au),e=Wt.transition,n=fe;try{if(Wt.transition=null,fe=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,Au=0,le&6)throw Error(B(331));var s=le;for(le|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:Mo(8,f,i)}var p=f.child;if(p!==null)p.return=f,G=p;else for(;G!==null;){f=G;var m=f.sibling,y=f.return;if(Ex(f),f===d){G=null;break}if(m!==null){m.return=y,G=m;break}G=y}}}var S=i.alternate;if(S!==null){var N=S.child;if(N!==null){S.child=null;do{var E=N.sibling;N.sibling=null,N=E}while(N!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mo(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,G=_;break e}G=i.return}}var w=t.current;for(G=w;G!==null;){o=G;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,G=b;else e:for(o=w;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lc(9,a)}}catch(M){Ve(a,a.return,M)}if(a===o){G=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,G=O;break e}G=a.return}}if(le=s,Ur(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ec,t)}catch{}r=!0}return r}finally{fe=n,Wt.transition=e}}return!1}function Ey(t,e,n){e=Ni(n,e),e=hx(t,e,1),t=br(t,e,1),e=_t(),t!==null&&(Sa(t,1,e),kt(t,e))}function Ve(t,e,n){if(t.tag===3)Ey(t,t,n);else for(;e!==null;){if(e.tag===3){Ey(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){t=Ni(n,t),t=fx(e,t,1),e=br(e,t,1),t=_t(),e!==null&&(Sa(e,1,t),kt(e,t));break}}e=e.return}}function WS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(Ge===4||Ge===3&&(rt&130023424)===rt&&500>Me()-ap?us(t,0):op|=n),kt(t,e)}function Dx(t,e){e===0&&(t.mode&1?(e=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):e=1);var n=_t();t=Wn(t,e),t!==null&&(Sa(t,e,n),kt(t,n))}function HS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Dx(t,n)}function QS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Dx(t,n)}var jx;jx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,OS(t,e,n);At=!!(t.flags&131072)}else At=!1,be&&e.flags&1048576&&M0(e,_u,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$l(t,e),t=e.pendingProps;var s=Ei(e,ft.current);gi(e,n),s=ep(null,e,r,t,s,n);var i=tp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,yu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qf(e),s.updater=ac,e.stateNode=s,s._reactInternals=e,Ah(e,r,t,n),e=Ph(null,e,r,!0,i,n)):(e.tag=0,be&&i&&zf(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YS(r),t=en(r,t),s){case 0:e=Ch(null,e,r,t,n);break e;case 1:e=fy(null,e,r,t,n);break e;case 11:e=dy(null,e,r,t,n);break e;case 14:e=hy(null,e,r,en(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Ch(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),fy(t,e,r,s,n);case 3:e:{if(yx(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,q0(t,e),Iu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ni(Error(B(423)),e),e=py(t,e,r,n,s);break e}else if(r!==s){s=Ni(Error(B(424)),e),e=py(t,e,r,n,s);break e}else for(Vt=Er(e.stateNode.containerInfo.firstChild),Lt=e,be=!0,nn=null,n=z0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===s){e=Hn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return K0(e),t===null&&Th(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xh(r,s)?o=null:i!==null&&xh(r,i)&&(e.flags|=32),gx(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&Th(e),null;case 13:return vx(t,e,n);case 4:return Xf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ti(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),dy(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(xu,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!Ct.current){e=Hn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=$n(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Sh(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,gi(e,n),s=Xt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),hy(t,e,r,s,n);case 15:return px(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),$l(t,e),e.tag=1,Pt(r)?(t=!0,yu(e)):t=!1,gi(e,n),dx(e,r,s),Ah(e,r,s,n),Ph(null,e,r,!0,t,n);case 19:return _x(t,e,n);case 22:return mx(t,e,n)}throw Error(B(156,e.tag))};function Vx(t,e){return l0(t,e)}function XS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new XS(t,e,n,r)}function dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YS(t){if(typeof t=="function")return dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cf)return 11;if(t===Pf)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ei:return cs(n.children,s,i,e);case Rf:o=8,s|=8;break;case Jd:return t=Kt(12,n,e,s|2),t.elementType=Jd,t.lanes=i,t;case Zd:return t=Kt(13,n,e,s),t.elementType=Zd,t.lanes=i,t;case eh:return t=Kt(19,n,e,s),t.elementType=eh,t.lanes=i,t;case K_:return cc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $_:o=10;break e;case q_:o=9;break e;case Cf:o=11;break e;case Pf:o=14;break e;case ar:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cs(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function cc(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=K_,t.lanes=n,t.stateNode={isHidden:!1},t}function jd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Vd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=md(0),this.expirationTimes=md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=md(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hp(t,e,n,r,s,i,o,a,u){return t=new JS(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(i),t}function ZS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ox(t){if(!t)return Dr;t=t._reactInternals;e:{if(ks(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Pt(n))return O0(t,n,e)}return e}function Lx(t,e,n,r,s,i,o,a,u){return t=hp(n,r,!0,t,s,i,o,a,u),t.context=Ox(null),n=t.current,r=_t(),s=Sr(n),i=$n(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,Sa(t,s,r),kt(t,r),t}function dc(t,e,n,r){var s=e.current,i=_t(),o=Sr(s);return n=Ox(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,o),t!==null&&(on(t,s,o,i),Ul(t,s,o)),o}function Cu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function by(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fp(t,e){by(t,e),(t=t.alternate)&&by(t,e)}function eN(){return null}var Mx=typeof reportError=="function"?reportError:function(t){console.error(t)};function pp(t){this._internalRoot=t}hc.prototype.render=pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));dc(t,e,null,null)};hc.prototype.unmount=pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){dc(null,t,null,null)}),e[Gn]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=m0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&y0(t)}};function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ty(){}function tN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Cu(o);i.call(d)}}var o=Lx(e,r,t,0,null,!1,!1,"",Ty);return t._reactRootContainer=o,t[Gn]=o.current,ta(t.nodeType===8?t.parentNode:t),vs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Cu(u);a.call(d)}}var u=hp(t,0,!1,null,null,!1,!1,"",Ty);return t._reactRootContainer=u,t[Gn]=u.current,ta(t.nodeType===8?t.parentNode:t),vs(function(){dc(e,u,n,r)}),u}function pc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=Cu(o);a.call(u)}}dc(e,o,t,s)}else o=tN(n,e,t,s,r);return Cu(o)}f0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eo(e.pendingLanes);n!==0&&(jf(e,n|1),kt(e,Me()),!(le&6)&&(Ai=Me()+500,Ur()))}break;case 13:vs(function(){var r=Wn(t,1);if(r!==null){var s=_t();on(r,t,1,s)}}),fp(t,1)}};Vf=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=_t();on(e,t,134217728,n)}fp(t,134217728)}};p0=function(t){if(t.tag===13){var e=Sr(t),n=Wn(t,e);if(n!==null){var r=_t();on(n,t,e,r)}fp(t,e)}};m0=function(){return fe};g0=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};ch=function(t,e,n){switch(e){case"input":if(rh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sc(r);if(!s)throw Error(B(90));W_(r),rh(r,s)}}}break;case"textarea":Q_(t,n);break;case"select":e=n.value,e!=null&&hi(t,!!n.multiple,e,!1)}};n0=lp;r0=vs;var nN={usingClientEntryPoint:!1,Events:[Aa,si,sc,e0,t0,lp]},mo={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rN={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o0(t),t===null?null:t.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||eN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{ec=Sl.inject(rN),yn=Sl}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(e))throw Error(B(200));return ZS(t,e,null,n)};Ut.createRoot=function(t,e){if(!mp(t))throw Error(B(299));var n=!1,r="",s=Mx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hp(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,ta(t.nodeType===8?t.parentNode:t),new pp(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=o0(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return vs(t)};Ut.hydrate=function(t,e,n){if(!fc(e))throw Error(B(200));return pc(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!mp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Mx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lx(e,null,t,1,n??null,s,!1,i,o),t[Gn]=e.current,ta(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hc(e)};Ut.render=function(t,e,n){if(!fc(e))throw Error(B(200));return pc(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!fc(t))throw Error(B(40));return t._reactRootContainer?(vs(function(){pc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};Ut.unstable_batchedUpdates=lp;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return pc(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fx)}catch(t){console.error(t)}}Fx(),F_.exports=Ut;var sN=F_.exports,Sy=sN;Xd.createRoot=Sy.createRoot,Xd.hydrateRoot=Sy.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ca(){return ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ca.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const Ny="popstate";function iN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return $h("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ux(s)}return aN(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oN(){return Math.random().toString(36).substr(2,8)}function Ay(t,e){return{usr:t.state,key:t.key,idx:e}}function $h(t,e,n,r){return n===void 0&&(n=null),ca({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bi(e):e,{state:n,key:e&&e.key||r||oN()})}function Ux(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=vr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(ca({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){a=vr.Pop;let E=f(),_=E==null?null:E-d;d=E,u&&u({action:a,location:N.location,delta:_})}function m(E,_){a=vr.Push;let w=$h(N.location,E,_);d=f()+1;let b=Ay(w,d),O=N.createHref(w);try{o.pushState(b,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(O)}i&&u&&u({action:a,location:N.location,delta:1})}function y(E,_){a=vr.Replace;let w=$h(N.location,E,_);d=f();let b=Ay(w,d),O=N.createHref(w);o.replaceState(b,"",O),i&&u&&u({action:a,location:N.location,delta:0})}function S(E){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof E=="string"?E:Ux(E);return w=w.replace(/ $/,"%20"),Be(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let N={get action(){return a},get location(){return t(s,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Ny,p),u=E,()=>{s.removeEventListener(Ny,p),u=null}},createHref(E){return e(s,E)},createURL:S,encodeLocation(E){let _=S(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(E){return o.go(E)}};return N}var Ry;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ry||(Ry={}));function lN(t,e,n){return n===void 0&&(n="/"),uN(t,e,n)}function uN(t,e,n,r){let s=typeof e=="string"?Bi(e):e,i=$x(s.pathname||"/",n);if(i==null)return null;let o=Bx(t);cN(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let d=IN(i);a=_N(o[u],d)}return a}function Bx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=ds([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Bx(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:yN(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of zx(i.path))s(i,o,u)}),e}function zx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zx(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function cN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dN=/^:[\w-]+$/,hN=3,fN=2,pN=1,mN=10,gN=-2,Cy=t=>t==="*";function yN(t,e){let n=t.split("/"),r=n.length;return n.some(Cy)&&(r+=gN),e&&(r+=fN),n.filter(s=>!Cy(s)).reduce((s,i)=>s+(dN.test(i)?hN:i===""?pN:mN),r)}function vN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function _N(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],d=a===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=xN({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:ds([i,p.pathname]),pathnameBase:NN(ds([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=ds([i,p.pathnameBase]))}return o}function xN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:m,isOptional:y}=f;if(m==="*"){let N=a[p]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const S=a[p];return y&&!S?d[m]=void 0:d[m]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function wN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $x(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const EN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bN=t=>EN.test(t);function TN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bi(t):t,i;if(n)if(bN(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),gp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Py(n.substring(1),"/"):i=Py(n,e)}else i=e;return{pathname:i,search:AN(r),hash:RN(s)}}function Py(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Od(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qx(t,e){let n=SN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bi(t):(s=ca({},t),Be(!s.pathname||!s.pathname.includes("?"),Od("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),Od("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),Od("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}a=p>=0?e[p]:"/"}let u=TN(s,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const ds=t=>t.join("/").replace(/\/\/+/g,"/"),NN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gx=["post","put","patch","delete"];new Set(Gx);const PN=["get",...Gx];new Set(PN);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function da(){return da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},da.apply(this,arguments)}const yp=k.createContext(null),kN=k.createContext(null),Ca=k.createContext(null),mc=k.createContext(null),Br=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Wx=k.createContext(null);function Pa(){return k.useContext(mc)!=null}function vp(){return Pa()||Be(!1),k.useContext(mc).location}function Hx(t){k.useContext(Ca).static||k.useLayoutEffect(t)}function Ie(){let{isDataRoute:t}=k.useContext(Br);return t?KN():DN()}function DN(){Pa()||Be(!1);let t=k.useContext(yp),{basename:e,future:n,navigator:r}=k.useContext(Ca),{matches:s}=k.useContext(Br),{pathname:i}=vp(),o=JSON.stringify(qx(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return Hx(()=>{a.current=!0}),k.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let p=Kx(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ds([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function Qx(){let{matches:t}=k.useContext(Br),e=t[t.length-1];return e?e.params:{}}function jN(t,e){return VN(t,e)}function VN(t,e,n,r){Pa()||Be(!1);let{navigator:s}=k.useContext(Ca),{matches:i}=k.useContext(Br),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=vp(),f;if(e){var p;let E=typeof e=="string"?Bi(e):e;u==="/"||(p=E.pathname)!=null&&p.startsWith(u)||Be(!1),f=E}else f=d;let m=f.pathname||"/",y=m;if(u!=="/"){let E=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=lN(t,{pathname:y}),N=UN(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:ds([u,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:ds([u,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&N?k.createElement(mc.Provider,{value:{location:da({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:vr.Pop}},N):N}function ON(){let t=qN(),e=CN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const LN=k.createElement(ON,null);class MN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Br.Provider,{value:this.props.routeContext},k.createElement(Wx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FN(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(yp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Br.Provider,{value:e},r)}function UN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);f>=0||Be(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:y}=n,S=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||S){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,m)=>{let y,S=!1,N=null,E=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,N=p.route.errorElement||LN,u&&(d<0&&m===0?(GN("route-fallback"),S=!0,E=null):d===m&&(S=!0,E=p.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),w=()=>{let b;return y?b=N:S?b=E:p.route.Component?b=k.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=f,k.createElement(FN,{match:p,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?k.createElement(MN,{location:n.location,revalidation:n.revalidation,component:N,error:y,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var Xx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Xx||{}),Yx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yx||{});function BN(t){let e=k.useContext(yp);return e||Be(!1),e}function zN(t){let e=k.useContext(kN);return e||Be(!1),e}function $N(t){let e=k.useContext(Br);return e||Be(!1),e}function Jx(t){let e=$N(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function qN(){var t;let e=k.useContext(Wx),n=zN(),r=Jx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KN(){let{router:t}=BN(Xx.UseNavigateStable),e=Jx(Yx.UseNavigateStable),n=k.useRef(!1);return Hx(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,da({fromRouteId:e},i)))},[t,e])}const ky={};function GN(t,e,n){ky[t]||(ky[t]=!0)}function WN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zx(t){let{to:e,replace:n,state:r,relative:s}=t;Pa()||Be(!1);let{future:i,static:o}=k.useContext(Ca),{matches:a}=k.useContext(Br),{pathname:u}=vp(),d=Ie(),f=Kx(e,qx(a,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return k.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Ae(t){Be(!1)}function HN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vr.Pop,navigator:i,static:o=!1,future:a}=t;Pa()&&Be(!1);let u=e.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:u,navigator:i,static:o,future:da({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=Bi(r));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:S="default"}=r,N=k.useMemo(()=>{let E=$x(f,u);return E==null?null:{location:{pathname:E,search:p,hash:m,state:y,key:S},navigationType:s}},[u,f,p,m,y,S,s]);return N==null?null:k.createElement(Ca.Provider,{value:d},k.createElement(mc.Provider,{children:n,value:N}))}function QN(t){let{children:e,location:n}=t;return jN(qh(e),n)}new Promise(()=>{});function qh(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,qh(r.props.children,i));return}r.type!==Ae&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const XN="6";try{window.__reactRouterVersion=XN}catch{}const YN="startTransition",Dy=Wb[YN];function JN(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=iN({window:s,v5Compat:!0}));let o=i.current,[a,u]=k.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=k.useCallback(p=>{d&&Dy?Dy(()=>u(p)):u(p)},[u,d]);return k.useLayoutEffect(()=>o.listen(f),[o,f]),k.useEffect(()=>WN(r),[r]),k.createElement(HN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var jy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jy||(jy={}));var Vy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vy||(Vy={}));var Oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ZN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|a>>4;let m=(a&15)<<2|d>>6,y=d&63;u||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ew(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||p==null)throw new eA;const m=i<<2|a>>4;if(r.push(m),d!==64){const y=a<<4&240|d>>2;if(r.push(y),p!==64){const S=d<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tA=function(t){const e=ew(t);return tw.encodeByteArray(e,!0)},Pu=function(t){return tA(t).replace(/\./g,"")},nw=function(t){try{return tw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=()=>nA().__FIREBASE_DEFAULTS__,sA=()=>{if(typeof process>"u"||typeof Oy>"u")return;const t=Oy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nw(t[1]);return e&&JSON.parse(e)},gc=()=>{try{return rA()||sA()||iA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rw=t=>{var e,n;return(n=(e=gc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sw=t=>{const e=rw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iw=()=>{var t;return(t=gc())===null||t===void 0?void 0:t.config},ow=t=>{var e;return(e=gc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pu(JSON.stringify(n)),Pu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function lA(){var t;const e=(t=gc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hA(){const t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lw(){return!lA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uw(){try{return typeof indexedDB=="object"}catch{return!1}}function fA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="FirebaseError";class Tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pA,Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ka.prototype.create)}}class ka{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?mA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Tn(s,a,r)}}function mA(t,e){return t.replace(gA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gA=/\{\$([^}]+)}/g;function yA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ku(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ly(i)&&Ly(o)){if(!ku(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function To(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function So(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vA(t,e){const n=new _A(t,e);return n.subscribe.bind(n)}class _A{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ld),s.error===void 0&&(s.error=Ld),s.complete===void 0&&(s.complete=Ld);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EA(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(t){return t===es?void 0:t}function EA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const TA={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},SA=ie.INFO,NA={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},AA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=SA,this._logHandler=AA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const RA=(t,e)=>e.some(n=>t instanceof n);let My,Fy;function CA(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PA(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cw=new WeakMap,Kh=new WeakMap,dw=new WeakMap,Md=new WeakMap,xp=new WeakMap;function kA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cw.set(n,t)}).catch(()=>{}),xp.set(e,t),e}function DA(t){if(Kh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kh.set(t,e)}let Gh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jA(t){Gh=t(Gh)}function VA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fd(this),e,...n);return dw.set(r,e.sort?e.sort():[e]),Ar(r)}:PA().includes(t)?function(...e){return t.apply(Fd(this),e),Ar(cw.get(this))}:function(...e){return Ar(t.apply(Fd(this),e))}}function OA(t){return typeof t=="function"?VA(t):(t instanceof IDBTransaction&&DA(t),RA(t,CA())?new Proxy(t,Gh):t)}function Ar(t){if(t instanceof IDBRequest)return kA(t);if(Md.has(t))return Md.get(t);const e=OA(t);return e!==t&&(Md.set(t,e),xp.set(e,t)),e}const Fd=t=>xp.get(t);function LA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ar(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ar(o.result),u.oldVersion,u.newVersion,Ar(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const MA=["get","getKey","getAll","getAllKeys","count"],FA=["put","add","delete","clear"],Ud=new Map;function Uy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&u.done]))[0]};return Ud.set(e,i),i}jA(t=>({...t,get:(e,n,r)=>Uy(e,n)||t.get(e,n,r),has:(e,n)=>!!Uy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",By="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new _p("@firebase/app"),zA="@firebase/app-compat",$A="@firebase/analytics-compat",qA="@firebase/analytics",KA="@firebase/app-check-compat",GA="@firebase/app-check",WA="@firebase/auth",HA="@firebase/auth-compat",QA="@firebase/database",XA="@firebase/data-connect",YA="@firebase/database-compat",JA="@firebase/functions",ZA="@firebase/functions-compat",eR="@firebase/installations",tR="@firebase/installations-compat",nR="@firebase/messaging",rR="@firebase/messaging-compat",sR="@firebase/performance",iR="@firebase/performance-compat",oR="@firebase/remote-config",aR="@firebase/remote-config-compat",lR="@firebase/storage",uR="@firebase/storage-compat",cR="@firebase/firestore",dR="@firebase/vertexai-preview",hR="@firebase/firestore-compat",fR="firebase",pR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",mR={[Wh]:"fire-core",[zA]:"fire-core-compat",[qA]:"fire-analytics",[$A]:"fire-analytics-compat",[GA]:"fire-app-check",[KA]:"fire-app-check-compat",[WA]:"fire-auth",[HA]:"fire-auth-compat",[QA]:"fire-rtdb",[XA]:"fire-data-connect",[YA]:"fire-rtdb-compat",[JA]:"fire-fn",[ZA]:"fire-fn-compat",[eR]:"fire-iid",[tR]:"fire-iid-compat",[nR]:"fire-fcm",[rR]:"fire-fcm-compat",[sR]:"fire-perf",[iR]:"fire-perf-compat",[oR]:"fire-rc",[aR]:"fire-rc-compat",[lR]:"fire-gcs",[uR]:"fire-gcs-compat",[cR]:"fire-fst",[hR]:"fire-fst-compat",[dR]:"fire-vertex","fire-js":"fire-js",[fR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Map,gR=new Map,Qh=new Map;function zy(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _s(t){const e=t.name;if(Qh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Qh.set(e,t);for(const n of Du.values())zy(n,t);for(const n of gR.values())zy(n,t);return!0}function yc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new ka("app","Firebase",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=pR;function vc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=iw()),!n)throw Rr.create("no-options");const i=Du.get(s);if(i){if(ku(n,i.options)&&ku(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new bA(s);for(const u of Qh.values())o.addComponent(u);const a=new vR(n,r,o);return Du.set(s,a),a}function wp(t=Hh){const e=Du.get(t);if(!e&&t===Hh&&iw())return vc();if(!e)throw Rr.create("no-app",{appName:t});return e}function _n(t,e,n){var r;let s=(r=mR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}_s(new jr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firebase-heartbeat-database",xR=1,ha="firebase-heartbeat-store";let Bd=null;function hw(){return Bd||(Bd=LA(_R,xR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Bd}async function wR(t){try{const n=(await hw()).transaction(ha),r=await n.objectStore(ha).get(fw(t));return await n.done,r}catch(e){if(e instanceof Tn)Qn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function $y(t,e){try{const r=(await hw()).transaction(ha,"readwrite");await r.objectStore(ha).put(e,fw(t)),await r.done}catch(n){if(n instanceof Tn)Qn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function fw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1024,ER=30*24*60*60*1e3;class bR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ER}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qy(),{heartbeatsToSend:r,unsentEntries:s}=TR(this._heartbeatsCache.heartbeats),i=Pu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function qy(){return new Date().toISOString().substring(0,10)}function TR(t,e=IR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ky(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ky(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uw()?fA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ky(t){return Pu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){_s(new jr("platform-logger",e=>new UA(e),"PRIVATE")),_s(new jr("heartbeat",e=>new bR(e),"PRIVATE")),_n(Wh,By,t),_n(Wh,By,"esm2017"),_n("fire-js","")}NR("");function Ip(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AR=pw,mw=new ka("auth","Firebase",pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new _p("@firebase/auth");function RR(t,...e){ju.logLevel<=ie.WARN&&ju.warn(`Auth (${Ds}): ${t}`,...e)}function Wl(t,...e){ju.logLevel<=ie.ERROR&&ju.error(`Auth (${Ds}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw Ep(t,...e)}function xn(t,...e){return Ep(t,...e)}function gw(t,e,n){const r=Object.assign(Object.assign({},AR()),{[e]:n});return new ka("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return gw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ep(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mw.create(t,...e)}function Y(t,e,...n){if(!t)throw Ep(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wl(e),new Error(e)}function Xn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CR(){return Gy()==="http:"||Gy()==="https:"}function Gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CR()||cA()||"connection"in navigator)?navigator.onLine:!0}function kR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=aA()||dA()}get(){return PR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new ja(3e4,6e4);function zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $r(t,e,n,r,s={}){return vw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Da(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return uA()||(d.referrerPolicy="no-referrer"),yw.fetch()(_w(t,t.config.apiHost,n,a),d)})}async function vw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DR),e);try{const s=new OR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Nl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,d]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Nl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw gw(t,f,d);ln(t,f)}}catch(s){if(s instanceof Tn)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function Va(t,e,n,r,s={}){const i=await $r(t,e,n,r,s);return"mfaPendingCredential"in i&&ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function _w(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?bp(t.config,s):`${t.config.apiScheme}://${s}`}function VR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),jR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=xn(t,e,r);return s.customData._tokenResponse=n,s}function Wy(t){return t!==void 0&&t.enterprise!==void 0}class LR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function MR(t,e){return $r(t,"GET","/v2/recaptchaConfig",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){return $r(t,"POST","/v1/accounts:delete",e)}async function xw(t,e){return $r(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UR(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=Tp(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bo(zd(s.auth_time)),issuedAtTime:Bo(zd(s.iat)),expirationTime:Bo(zd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zd(t){return Number(t)*1e3}function Tp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wl("JWT malformed, contained fewer than 3 sections"),null;try{const s=nw(n);return s?JSON.parse(s):(Wl("Failed to decode base64 JWT payload"),null)}catch(s){return Wl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hy(t){const e=Tp(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tn&&BR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fa(t,xw(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ww(i.providerUserInfo):[],a=qR(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Yh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function $R(t){const e=He(t);await Vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ww(t){return t.map(e=>{var{providerId:n}=e,r=Ip(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e){const n=await vw(t,{},async()=>{const r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=_w(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GR(t,e){return $r(t,"POST","/v2/accounts:revokeToken",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=Hy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await KR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new vi;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Un{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fa(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UR(this,e)}reload(){return $R(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Un(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await fa(this,FR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:O,isAnonymous:M,providerData:P,stsTokenManager:I}=n;Y(b&&I,e,"internal-error");const x=vi.fromJSON(this.name,I);Y(typeof b=="string",e,"internal-error"),sr(p,e.name),sr(m,e.name),Y(typeof O=="boolean",e,"internal-error"),Y(typeof M=="boolean",e,"internal-error"),sr(y,e.name),sr(S,e.name),sr(N,e.name),sr(E,e.name),sr(_,e.name),sr(w,e.name);const T=new Un({uid:b,auth:e,email:m,emailVerified:O,displayName:p,isAnonymous:M,photoURL:S,phoneNumber:y,tenantId:N,stsTokenManager:x,createdAt:_,lastLoginAt:w});return P&&Array.isArray(P)&&(T.providerData=P.map(A=>Object.assign({},A))),E&&(T._redirectEventId=E),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new vi;s.updateFromServerResponse(n);const i=new Un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ww(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new vi;a.updateFromIdToken(r);const u=new Un({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Yh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;function Bn(t){Xn(t instanceof Function,"Expected a class definition");let e=Qy.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Iw.type="NONE";const Xy=Iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t,e,n){return`firebase:${t}:${e}:${n}`}class _i{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Hl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Hl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Un._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _i(Bn(Xy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Bn(Xy);const o=Hl(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Un._fromJSON(e,f);d!==i&&(a=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new _i(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new _i(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ew(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Aw(e))return"Blackberry";if(Rw(e))return"Webos";if(bw(e))return"Safari";if((e.includes("chrome/")||Tw(e))&&!e.includes("edge/"))return"Chrome";if(Nw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ew(t=We()){return/firefox\//i.test(t)}function bw(t=We()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tw(t=We()){return/crios\//i.test(t)}function Sw(t=We()){return/iemobile/i.test(t)}function Nw(t=We()){return/android/i.test(t)}function Aw(t=We()){return/blackberry/i.test(t)}function Rw(t=We()){return/webos/i.test(t)}function Sp(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WR(t=We()){var e;return Sp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HR(){return hA()&&document.documentMode===10}function Cw(t=We()){return Sp(t)||Nw(t)||Rw(t)||Aw(t)||/windows phone/i.test(t)||Sw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e=[]){let n;switch(t){case"Browser":n=Yy(We());break;case"Worker":n=`${Yy(We())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ds}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e={}){return $r(t,"GET","/v2/passwordPolicy",zr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=6;class JR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jy(this),this.idTokenSubscription=new Jy(this),this.beforeStateQueue=new QR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await _i.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xw(this,{idToken:e}),r=await Un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(qn(this));const n=e?He(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XR(this),n=new JR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ka("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await _i.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&RR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function js(t){return He(t)}class Jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=vA(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(t){_c=t}function kw(t){return _c.loadJS(t)}function tC(){return _c.recaptchaEnterpriseScript}function nC(){return _c.gapiScript}function rC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const sC="recaptcha-enterprise",iC="NO_RECAPTCHA";class oC{constructor(e){this.type=sC,this.auth=js(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{MR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new LR(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;Wy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(iC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Wy(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=tC();u.length!==0&&(u+=a),kw(u).then(()=>{s(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function Zy(t,e,n,r=!1){const s=new oC(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Zy(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Zy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t,e){const n=yc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ku(i,e??{}))return s;ln(s,"already-initialized")}return n.initialize({options:e})}function lC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uC(t,e,n){const r=js(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Dw(e),{host:o,port:a}=cC(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),dC()}function Dw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cC(t){const e=Dw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ev(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ev(o)}}}function ev(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function hC(t,e){return $r(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(t,e){return Va(t,"POST","/v1/accounts:signInWithPassword",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(t,e){return Va(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))}async function mC(t,e){return Va(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Np{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new pa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new pa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jh(e,n,"signInWithPassword",fC);case"emailLink":return pC(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jh(e,r,"signUpPassword",hC);case"emailLink":return mC(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xi(t,e){return Va(t,"POST","/v1/accounts:signInWithIdp",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="http://localhost";class xs extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ip(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new xs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xi(e,n)}buildRequest(){const e={requestUri:gC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vC(t){const e=To(So(t)).link,n=e?To(So(e)).deep_link_id:null,r=To(So(t)).deep_link_id;return(r?To(So(r)).link:null)||r||n||e||t}class Ap{constructor(e){var n,r,s,i,o,a;const u=To(So(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=yC((s=u.mode)!==null&&s!==void 0?s:null);Y(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=vC(e);try{return new Ap(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(){this.providerId=zi.PROVIDER_ID}static credential(e,n){return pa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ap.parseLink(n);return Y(r,"argument-error"),pa._fromEmailAndCode(e,r.code,r.tenantId)}}zi.PROVIDER_ID="password";zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends jw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Oa{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Oa{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Oa{constructor(){super("twitter.com")}static credential(e,n){return xs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e){return Va(t,"POST","/v1/accounts:signUp",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Un._fromIdTokenResponse(e,r,s),o=tv(r);return new ws({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=tv(r);return new ws({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Tn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ou.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ou(e,n,r,s)}}function Vw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ou._fromErrorAndOperation(t,i,e,r):i})}async function xC(t,e,n=!1){const r=await fa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(t,e,n=!1){const{auth:r}=t;if(pn(r.app))return Promise.reject(qn(r));const s="reauthenticate";try{const i=await fa(t,Vw(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=Tp(i.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),ws._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ln(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(t,e,n=!1){if(pn(t.app))return Promise.reject(qn(t));const r="signIn",s=await Vw(t,r,e),i=await ws._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function IC(t,e){return Ow(js(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lw(t){const e=js(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Rp(t,e,n){if(pn(t.app))return Promise.reject(qn(t));const r=js(t),o=await Jh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_C).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Lw(t),u}),a=await ws._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function EC(t,e,n){return pn(t.app)?Promise.reject(qn(t)):IC(He(t),zi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lw(t),r})}function bC(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function TC(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function SC(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function NC(t){return He(t).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=1e3,RC=10;class Fw extends Mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fw.type="LOCAL";const CC=Fw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Uw.type="SESSION";const Bw=Uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,i)),u=await PC(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const d=Cp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function DC(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function jC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OC(){return zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firebaseLocalStorageDb",LC=1,Mu="firebaseLocalStorage",qw="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wc(t,e){return t.transaction([Mu],e?"readwrite":"readonly").objectStore(Mu)}function MC(){const t=indexedDB.deleteDatabase($w);return new La(t).toPromise()}function Zh(){const t=indexedDB.open($w,LC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mu,{keyPath:qw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mu)?e(r):(r.close(),await MC(),e(await Zh()))})})}async function nv(t,e,n){const r=wc(t,!0).put({[qw]:e,value:n});return new La(r).toPromise()}async function FC(t,e){const n=wc(t,!1).get(e),r=await new La(n).toPromise();return r===void 0?null:r.value}function rv(t,e){const n=wc(t,!0).delete(e);return new La(n).toPromise()}const UC=800,BC=3;class Kw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(OC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jC(),!this.activeServiceWorker)return;this.sender=new kC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zh();return await nv(e,Lu,"1"),await rv(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=wc(s,!1).getAll();return new La(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kw.type="LOCAL";const zC=Kw;new ja(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e){return e?Bn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qC(t){return Ow(t.auth,new Pp(t),t.bypassAuthState)}function KC(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),wC(n,new Pp(t),t.bypassAuthState)}async function GC(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),xC(n,new Pp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return GC;case"reauthViaPopup":case"reauthViaRedirect":return KC;default:ln(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new ja(2e3,1e4);class di extends Gw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,di.currentPopupAction&&di.currentPopupAction.cancel(),di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WC.get())};e()}}di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="pendingRedirect",Ql=new Map;class QC extends Gw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ql.get(this.auth._key());if(!e){try{const r=await XC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ql.set(this.auth._key(),e)}return this.bypassAuthState||Ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XC(t,e){const n=ZC(e),r=JC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function YC(t,e){Ql.set(t._key(),e)}function JC(t){return Bn(t._redirectPersistence)}function ZC(t){return Hl(HC,t.config.apiKey,t.name)}async function eP(t,e,n=!1){if(pn(t.app))return Promise.reject(qn(t));const r=js(t),s=$C(r,e),o=await new QC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=10*60*1e3;class nP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ww(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tP&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(e))}saveEventToCache(e){this.cachedEventUids.add(sv(e)),this.lastProcessedEventTime=Date.now()}}function sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ww({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ww(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(t,e={}){return $r(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oP=/^https?/;async function aP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sP(t);for(const n of e)try{if(lP(n))return}catch{}ln(t,"unauthorized-domain")}function lP(t){const e=Xh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oP.test(n))return!1;if(iP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new ja(3e4,6e4);function iv(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cP(t){return new Promise((e,n)=>{var r,s,i;function o(){iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iv(),n(xn(t,"network-request-failed"))},timeout:uP.get()})}if(!((s=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)o();else{const a=rC("iframefcb");return wn()[a]=()=>{gapi.load?o():n(xn(t,"network-request-failed"))},kw(`${nC()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Xl=null,e})}let Xl=null;function dP(t){return Xl=Xl||cP(t),Xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new ja(5e3,15e3),fP="__/auth/iframe",pP="emulator/auth/iframe",mP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yP(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bp(e,pP):`https://${t.config.authDomain}/${fP}`,r={apiKey:e.apiKey,appName:t.name,v:Ds},s=gP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Da(r).slice(1)}`}async function vP(t){const e=await dP(t),n=wn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:yP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),a=wn().setTimeout(()=>{i(o)},hP.get());function u(){wn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xP=500,wP=600,IP="_blank",EP="http://localhost";class ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bP(t,e,n,r=xP,s=wP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},_P),{width:r.toString(),height:s.toString(),top:i,left:o}),d=We().toLowerCase();n&&(a=Tw(d)?IP:n),Ew(d)&&(e=e||EP,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(WR(d)&&a!=="_self")return TP(e||"",a),new ov(null);const p=window.open(e||"",a,f);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new ov(p)}function TP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="__/auth/handler",NP="emulator/auth/handler",AP=encodeURIComponent("fac");async function av(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ds,eventId:s};if(e instanceof jw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Oa){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),d=u?`#${AP}=${encodeURIComponent(u)}`:"";return`${RP(t)}?${Da(a).slice(1)}${d}`}function RP({config:t}){return t.emulator?bp(t,NP):`https://${t.authDomain}/${SP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class CP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bw,this._completeRedirectFn=eP,this._overrideRedirectResult=YC}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await av(e,n,r,Xh(),s);return bP(e,o,Cp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await av(e,n,r,Xh(),s);return DC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vP(e),r=new nP(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($d,{type:$d},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[$d];o!==void 0&&n(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Cw()||bw()||Sp()}}const PP=CP;var lv="@firebase/auth",uv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jP(t){_s(new jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pw(t)},d=new ZR(r,s,i,u);return lC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_s(new jr("auth-internal",e=>{const n=js(e.getProvider("auth").getImmediate());return(r=>new kP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(lv,uv,DP(t)),_n(lv,uv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=5*60,OP=ow("authIdTokenMaxAge")||VP;let cv=null;const LP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OP)return;const s=n==null?void 0:n.token;cv!==s&&(cv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kp(t=wp()){const e=yc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=aC(t,{popupRedirectResolver:PP,persistence:[zC,CC,Bw]}),r=ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=LP(i.toString());TC(n,o,()=>o(n.currentUser)),bC(n,a=>o(a))}}const s=rw("auth");return s&&uC(n,`http://${s}`),n}function MP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}eC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=xn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",MP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jP("Browser");var dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,Hw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function T(){}T.prototype=x.prototype,I.D=x.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(A,C,j){for(var R=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)R[zt-2]=arguments[zt];return x.prototype[C].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,T){T||(T=0);var A=Array(16);if(typeof x=="string")for(var C=0;16>C;++C)A[C]=x.charCodeAt(T++)|x.charCodeAt(T++)<<8|x.charCodeAt(T++)<<16|x.charCodeAt(T++)<<24;else for(C=0;16>C;++C)A[C]=x[T++]|x[T++]<<8|x[T++]<<16|x[T++]<<24;x=I.g[0],T=I.g[1],C=I.g[2];var j=I.g[3],R=x+(j^T&(C^j))+A[0]+3614090360&4294967295;x=T+(R<<7&4294967295|R>>>25),R=j+(C^x&(T^C))+A[1]+3905402710&4294967295,j=x+(R<<12&4294967295|R>>>20),R=C+(T^j&(x^T))+A[2]+606105819&4294967295,C=j+(R<<17&4294967295|R>>>15),R=T+(x^C&(j^x))+A[3]+3250441966&4294967295,T=C+(R<<22&4294967295|R>>>10),R=x+(j^T&(C^j))+A[4]+4118548399&4294967295,x=T+(R<<7&4294967295|R>>>25),R=j+(C^x&(T^C))+A[5]+1200080426&4294967295,j=x+(R<<12&4294967295|R>>>20),R=C+(T^j&(x^T))+A[6]+2821735955&4294967295,C=j+(R<<17&4294967295|R>>>15),R=T+(x^C&(j^x))+A[7]+4249261313&4294967295,T=C+(R<<22&4294967295|R>>>10),R=x+(j^T&(C^j))+A[8]+1770035416&4294967295,x=T+(R<<7&4294967295|R>>>25),R=j+(C^x&(T^C))+A[9]+2336552879&4294967295,j=x+(R<<12&4294967295|R>>>20),R=C+(T^j&(x^T))+A[10]+4294925233&4294967295,C=j+(R<<17&4294967295|R>>>15),R=T+(x^C&(j^x))+A[11]+2304563134&4294967295,T=C+(R<<22&4294967295|R>>>10),R=x+(j^T&(C^j))+A[12]+1804603682&4294967295,x=T+(R<<7&4294967295|R>>>25),R=j+(C^x&(T^C))+A[13]+4254626195&4294967295,j=x+(R<<12&4294967295|R>>>20),R=C+(T^j&(x^T))+A[14]+2792965006&4294967295,C=j+(R<<17&4294967295|R>>>15),R=T+(x^C&(j^x))+A[15]+1236535329&4294967295,T=C+(R<<22&4294967295|R>>>10),R=x+(C^j&(T^C))+A[1]+4129170786&4294967295,x=T+(R<<5&4294967295|R>>>27),R=j+(T^C&(x^T))+A[6]+3225465664&4294967295,j=x+(R<<9&4294967295|R>>>23),R=C+(x^T&(j^x))+A[11]+643717713&4294967295,C=j+(R<<14&4294967295|R>>>18),R=T+(j^x&(C^j))+A[0]+3921069994&4294967295,T=C+(R<<20&4294967295|R>>>12),R=x+(C^j&(T^C))+A[5]+3593408605&4294967295,x=T+(R<<5&4294967295|R>>>27),R=j+(T^C&(x^T))+A[10]+38016083&4294967295,j=x+(R<<9&4294967295|R>>>23),R=C+(x^T&(j^x))+A[15]+3634488961&4294967295,C=j+(R<<14&4294967295|R>>>18),R=T+(j^x&(C^j))+A[4]+3889429448&4294967295,T=C+(R<<20&4294967295|R>>>12),R=x+(C^j&(T^C))+A[9]+568446438&4294967295,x=T+(R<<5&4294967295|R>>>27),R=j+(T^C&(x^T))+A[14]+3275163606&4294967295,j=x+(R<<9&4294967295|R>>>23),R=C+(x^T&(j^x))+A[3]+4107603335&4294967295,C=j+(R<<14&4294967295|R>>>18),R=T+(j^x&(C^j))+A[8]+1163531501&4294967295,T=C+(R<<20&4294967295|R>>>12),R=x+(C^j&(T^C))+A[13]+2850285829&4294967295,x=T+(R<<5&4294967295|R>>>27),R=j+(T^C&(x^T))+A[2]+4243563512&4294967295,j=x+(R<<9&4294967295|R>>>23),R=C+(x^T&(j^x))+A[7]+1735328473&4294967295,C=j+(R<<14&4294967295|R>>>18),R=T+(j^x&(C^j))+A[12]+2368359562&4294967295,T=C+(R<<20&4294967295|R>>>12),R=x+(T^C^j)+A[5]+4294588738&4294967295,x=T+(R<<4&4294967295|R>>>28),R=j+(x^T^C)+A[8]+2272392833&4294967295,j=x+(R<<11&4294967295|R>>>21),R=C+(j^x^T)+A[11]+1839030562&4294967295,C=j+(R<<16&4294967295|R>>>16),R=T+(C^j^x)+A[14]+4259657740&4294967295,T=C+(R<<23&4294967295|R>>>9),R=x+(T^C^j)+A[1]+2763975236&4294967295,x=T+(R<<4&4294967295|R>>>28),R=j+(x^T^C)+A[4]+1272893353&4294967295,j=x+(R<<11&4294967295|R>>>21),R=C+(j^x^T)+A[7]+4139469664&4294967295,C=j+(R<<16&4294967295|R>>>16),R=T+(C^j^x)+A[10]+3200236656&4294967295,T=C+(R<<23&4294967295|R>>>9),R=x+(T^C^j)+A[13]+681279174&4294967295,x=T+(R<<4&4294967295|R>>>28),R=j+(x^T^C)+A[0]+3936430074&4294967295,j=x+(R<<11&4294967295|R>>>21),R=C+(j^x^T)+A[3]+3572445317&4294967295,C=j+(R<<16&4294967295|R>>>16),R=T+(C^j^x)+A[6]+76029189&4294967295,T=C+(R<<23&4294967295|R>>>9),R=x+(T^C^j)+A[9]+3654602809&4294967295,x=T+(R<<4&4294967295|R>>>28),R=j+(x^T^C)+A[12]+3873151461&4294967295,j=x+(R<<11&4294967295|R>>>21),R=C+(j^x^T)+A[15]+530742520&4294967295,C=j+(R<<16&4294967295|R>>>16),R=T+(C^j^x)+A[2]+3299628645&4294967295,T=C+(R<<23&4294967295|R>>>9),R=x+(C^(T|~j))+A[0]+4096336452&4294967295,x=T+(R<<6&4294967295|R>>>26),R=j+(T^(x|~C))+A[7]+1126891415&4294967295,j=x+(R<<10&4294967295|R>>>22),R=C+(x^(j|~T))+A[14]+2878612391&4294967295,C=j+(R<<15&4294967295|R>>>17),R=T+(j^(C|~x))+A[5]+4237533241&4294967295,T=C+(R<<21&4294967295|R>>>11),R=x+(C^(T|~j))+A[12]+1700485571&4294967295,x=T+(R<<6&4294967295|R>>>26),R=j+(T^(x|~C))+A[3]+2399980690&4294967295,j=x+(R<<10&4294967295|R>>>22),R=C+(x^(j|~T))+A[10]+4293915773&4294967295,C=j+(R<<15&4294967295|R>>>17),R=T+(j^(C|~x))+A[1]+2240044497&4294967295,T=C+(R<<21&4294967295|R>>>11),R=x+(C^(T|~j))+A[8]+1873313359&4294967295,x=T+(R<<6&4294967295|R>>>26),R=j+(T^(x|~C))+A[15]+4264355552&4294967295,j=x+(R<<10&4294967295|R>>>22),R=C+(x^(j|~T))+A[6]+2734768916&4294967295,C=j+(R<<15&4294967295|R>>>17),R=T+(j^(C|~x))+A[13]+1309151649&4294967295,T=C+(R<<21&4294967295|R>>>11),R=x+(C^(T|~j))+A[4]+4149444226&4294967295,x=T+(R<<6&4294967295|R>>>26),R=j+(T^(x|~C))+A[11]+3174756917&4294967295,j=x+(R<<10&4294967295|R>>>22),R=C+(x^(j|~T))+A[2]+718787259&4294967295,C=j+(R<<15&4294967295|R>>>17),R=T+(j^(C|~x))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var T=x-this.blockSize,A=this.B,C=this.h,j=0;j<x;){if(C==0)for(;j<=T;)s(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<x;)if(A[C++]=I.charCodeAt(j++),C==this.blockSize){s(this,A),C=0;break}}else for(;j<x;)if(A[C++]=I[j++],C==this.blockSize){s(this,A),C=0;break}}this.h=C,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var T=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=T&255,T/=256;for(this.u(I),I=Array(16),x=T=0;4>x;++x)for(var A=0;32>A;A+=8)I[T++]=this.g[x]>>>A&255;return I};function i(I,x){var T=a;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=x(I)}function o(I,x){this.h=x;for(var T=[],A=!0,C=I.length-1;0<=C;C--){var j=I[C]|0;A&&j==x||(T[C]=j,A=!1)}this.g=T}var a={};function u(I){return-128<=I&&128>I?i(I,function(x){return new o([x|0],0>x?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return E(d(-I));for(var x=[],T=1,A=0;I>=T;A++)x[A]=I/T|0,T*=4294967296;return new o(x,0)}function f(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return E(f(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(x,8)),A=p,C=0;C<I.length;C+=8){var j=Math.min(8,I.length-C),R=parseInt(I.substring(C,C+j),x);8>j?(j=d(Math.pow(x,j)),A=A.j(j).add(d(R))):(A=A.j(T),A=A.add(d(R)))}return A}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-E(this).m();for(var I=0,x=1,T=0;T<this.g.length;T++){var A=this.i(T);I+=(0<=A?A:4294967296+A)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(N(this))return"-"+E(this).toString(I);for(var x=d(Math.pow(I,6)),T=this,A="";;){var C=O(T,x).g;T=_(T,C.j(x));var j=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=C,S(T))return j+A;for(;6>j.length;)j="0"+j;A=j+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=_(this,I),N(I)?-1:S(I)?0:1};function E(I){for(var x=I.g.length,T=[],A=0;A<x;A++)T[A]=~I.g[A];return new o(T,~I.h).add(m)}t.abs=function(){return N(this)?E(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),T=[],A=0,C=0;C<=x;C++){var j=A+(this.i(C)&65535)+(I.i(C)&65535),R=(j>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);A=R>>>16,j&=65535,R&=65535,T[C]=R<<16|j}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(I,x){return I.add(E(x))}t.j=function(I){if(S(this)||S(I))return p;if(N(this))return N(I)?E(this).j(E(I)):E(E(this).j(I));if(N(I))return E(this.j(E(I)));if(0>this.l(y)&&0>I.l(y))return d(this.m()*I.m());for(var x=this.g.length+I.g.length,T=[],A=0;A<2*x;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var C=0;C<I.g.length;C++){var j=this.i(A)>>>16,R=this.i(A)&65535,zt=I.i(C)>>>16,Gr=I.i(C)&65535;T[2*A+2*C]+=R*Gr,w(T,2*A+2*C),T[2*A+2*C+1]+=j*Gr,w(T,2*A+2*C+1),T[2*A+2*C+1]+=R*zt,w(T,2*A+2*C+1),T[2*A+2*C+2]+=j*zt,w(T,2*A+2*C+2)}for(A=0;A<x;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=x;A<2*x;A++)T[A]=0;return new o(T,0)};function w(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function b(I,x){this.g=I,this.h=x}function O(I,x){if(S(x))throw Error("division by zero");if(S(I))return new b(p,p);if(N(I))return x=O(E(I),x),new b(E(x.g),E(x.h));if(N(x))return x=O(I,E(x)),new b(E(x.g),x.h);if(30<I.g.length){if(N(I)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var T=m,A=x;0>=A.l(I);)T=M(T),A=M(A);var C=P(T,1),j=P(A,1);for(A=P(A,2),T=P(T,2);!S(A);){var R=j.add(A);0>=R.l(I)&&(C=C.add(T),j=R),A=P(A,1),T=P(T,1)}return x=_(I,C.j(x)),new b(C,x)}for(C=p;0<=I.l(x);){for(T=Math.max(1,Math.floor(I.m()/x.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),j=d(T),R=j.j(x);N(R)||0<R.l(I);)T-=A,j=d(T),R=j.j(x);S(j)&&(j=m),C=C.add(j),I=_(I,R)}return new b(C,I)}t.A=function(I){return O(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),T=[],A=0;A<x;A++)T[A]=this.i(A)&I.i(A);return new o(T,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),T=[],A=0;A<x;A++)T[A]=this.i(A)|I.i(A);return new o(T,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),T=[],A=0;A<x;A++)T[A]=this.i(A)^I.i(A);return new o(T,this.h^I.h)};function M(I){for(var x=I.g.length+1,T=[],A=0;A<x;A++)T[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(T,I.h)}function P(I,x){var T=x>>5;x%=32;for(var A=I.g.length-T,C=[],j=0;j<A;j++)C[j]=0<x?I.i(j+T)>>>x|I.i(j+T+1)<<32-x:I.i(j+T);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,hs=o}).apply(typeof dv<"u"?dv:typeof self<"u"?self:typeof window<"u"?window:{});var Al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qw,No,Xw,Yl,ef,Yw,Jw,Zw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Al=="object"&&Al];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var D=l[v];if(!(D in g))break e;g=g[D]}l=l[l.length-1],v=g[l],h=h(v),h!=v&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var g=0,v=!1,D={next:function(){if(!v&&g<l.length){var L=g++;return{value:h(L,l[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,g){return l.call.apply(l.bind,arguments)}function p(l,h,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),l.apply(h,D)}}return function(){return l.apply(h,arguments)}}function m(l,h,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function S(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,D,L){for(var z=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)z[ge-2]=arguments[ge];return h.prototype[D].apply(v,z)}}function N(l){const h=l.length;if(0<h){const g=Array(h);for(let v=0;v<h;v++)g[v]=l[v];return g}return[]}function E(l,h){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(u(v)){const D=l.length||0,L=v.length||0;l.length=D+L;for(let z=0;z<L;z++)l[D+z]=v[z]}else l.push(v)}}class _{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function b(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function O(l){return O[" "](l),l}O[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function P(l,h,g){for(const v in l)h.call(g,l[v],v,l)}function I(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function x(l){const h={};for(const g in l)h[g]=l[g];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,h){let g,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(g in v)l[g]=v[g];for(let L=0;L<T.length;L++)g=T[L],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function C(l){var h=1;l=l.split(":");const g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function j(l){a.setTimeout(()=>{throw l},0)}function R(){var l=J;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class zt{constructor(){this.h=this.g=null}add(h,g){const v=Gr.get();v.set(h,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Gr=new _(()=>new Wi,l=>l.reset());class Wi{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let An,K=!1,J=new zt,te=()=>{const l=a.Promise.resolve(void 0);An=()=>{l.then(Ne)}};var Ne=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(g){j(g)}var h=Gr;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}K=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var Rn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return l}();function Cn(l,h){if(Le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(M){e:{try{O(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Cn.aa.h.call(this)}}S(Cn,Le);var Pn={2:"touch",3:"pen",4:"mouse"};Cn.prototype.h=function(){Cn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var kn="closure_listenable_"+(1e6*Math.random()|0),ZE=0;function eb(l,h,g,v,D){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!v,this.ha=D,this.key=++ZE,this.da=this.fa=!1}function Ga(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Wa(l){this.src=l,this.g={},this.h=0}Wa.prototype.add=function(l,h,g,v,D){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var z=zc(l,h,v,D);return-1<z?(h=l[z],g||(h.fa=!1)):(h=new eb(h,this.src,L,!!v,D),h.fa=g,l.push(h)),h};function Bc(l,h){var g=h.type;if(g in l.g){var v=l.g[g],D=Array.prototype.indexOf.call(v,h,void 0),L;(L=0<=D)&&Array.prototype.splice.call(v,D,1),L&&(Ga(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function zc(l,h,g,v){for(var D=0;D<l.length;++D){var L=l[D];if(!L.da&&L.listener==h&&L.capture==!!g&&L.ha==v)return D}return-1}var $c="closure_lm_"+(1e6*Math.random()|0),qc={};function _m(l,h,g,v,D){if(Array.isArray(h)){for(var L=0;L<h.length;L++)_m(l,h[L],g,v,D);return null}return g=Im(g),l&&l[kn]?l.K(h,g,d(v)?!!v.capture:!1,D):tb(l,h,g,!1,v,D)}function tb(l,h,g,v,D,L){if(!h)throw Error("Invalid event type");var z=d(D)?!!D.capture:!!D,ge=Gc(l);if(ge||(l[$c]=ge=new Wa(l)),g=ge.add(h,g,v,z,L),g.proxy)return g;if(v=nb(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)Rn||(D=z),D===void 0&&(D=!1),l.addEventListener(h.toString(),v,D);else if(l.attachEvent)l.attachEvent(wm(h.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function nb(){function l(g){return h.call(l.src,l.listener,g)}const h=rb;return l}function xm(l,h,g,v,D){if(Array.isArray(h))for(var L=0;L<h.length;L++)xm(l,h[L],g,v,D);else v=d(v)?!!v.capture:!!v,g=Im(g),l&&l[kn]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],g=zc(L,g,v,D),-1<g&&(Ga(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=Gc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=zc(h,g,v,D)),(g=-1<l?h[l]:null)&&Kc(g))}function Kc(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[kn])Bc(h.i,l);else{var g=l.type,v=l.proxy;h.removeEventListener?h.removeEventListener(g,v,l.capture):h.detachEvent?h.detachEvent(wm(g),v):h.addListener&&h.removeListener&&h.removeListener(v),(g=Gc(h))?(Bc(g,l),g.h==0&&(g.src=null,h[$c]=null)):Ga(l)}}}function wm(l){return l in qc?qc[l]:qc[l]="on"+l}function rb(l,h){if(l.da)l=!0;else{h=new Cn(h,this);var g=l.listener,v=l.ha||l.src;l.fa&&Kc(l),l=g.call(v,h)}return l}function Gc(l){return l=l[$c],l instanceof Wa?l:null}var Wc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Im(l){return typeof l=="function"?l:(l[Wc]||(l[Wc]=function(h){return l.handleEvent(h)}),l[Wc])}function it(){me.call(this),this.i=new Wa(this),this.M=this,this.F=null}S(it,me),it.prototype[kn]=!0,it.prototype.removeEventListener=function(l,h,g,v){xm(this,l,h,g,v)};function pt(l,h){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=h.type||h,typeof h=="string")h=new Le(h,l);else if(h instanceof Le)h.target=h.target||l;else{var D=h;h=new Le(v,l),A(h,D)}if(D=!0,g)for(var L=g.length-1;0<=L;L--){var z=h.g=g[L];D=Ha(z,v,!0,h)&&D}if(z=h.g=l,D=Ha(z,v,!0,h)&&D,D=Ha(z,v,!1,h)&&D,g)for(L=0;L<g.length;L++)z=h.g=g[L],D=Ha(z,v,!1,h)&&D}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],v=0;v<g.length;v++)Ga(g[v]);delete l.g[h],l.h--}}this.F=null},it.prototype.K=function(l,h,g,v){return this.i.add(String(l),h,!1,g,v)},it.prototype.L=function(l,h,g,v){return this.i.add(String(l),h,!0,g,v)};function Ha(l,h,g,v){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,L=0;L<h.length;++L){var z=h[L];if(z&&!z.da&&z.capture==g){var ge=z.listener,Ze=z.ha||z.src;z.fa&&Bc(l.i,z),D=ge.call(Ze,v)!==!1&&D}}return D&&!v.defaultPrevented}function Em(l,h,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function bm(l){l.g=Em(()=>{l.g=null,l.i&&(l.i=!1,bm(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class sb extends me{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:bm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(l){me.call(this),this.h=l,this.g={}}S(Hi,me);var Tm=[];function Sm(l){P(l.g,function(h,g){this.g.hasOwnProperty(g)&&Kc(h)},l),l.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Sm(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hc=a.JSON.stringify,ib=a.JSON.parse,ob=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Qc(){}Qc.prototype.h=null;function Nm(l){return l.h||(l.h=l.i())}function Am(){}var Qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xc(){Le.call(this,"d")}S(Xc,Le);function Yc(){Le.call(this,"c")}S(Yc,Le);var Wr={},Rm=null;function Qa(){return Rm=Rm||new it}Wr.La="serverreachability";function Cm(l){Le.call(this,Wr.La,l)}S(Cm,Le);function Xi(l){const h=Qa();pt(h,new Cm(h))}Wr.STAT_EVENT="statevent";function Pm(l,h){Le.call(this,Wr.STAT_EVENT,l),this.stat=h}S(Pm,Le);function mt(l){const h=Qa();pt(h,new Pm(h,l))}Wr.Ma="timingevent";function km(l,h){Le.call(this,Wr.Ma,l),this.size=h}S(km,Le);function Yi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function ab(l,h,g,v,D,L){l.info(function(){if(l.g)if(L)for(var z="",ge=L.split("&"),Ze=0;Ze<ge.length;Ze++){var ue=ge[Ze].split("=");if(1<ue.length){var ot=ue[0];ue=ue[1];var at=ot.split("_");z=2<=at.length&&at[1]=="type"?z+(ot+"="+ue+"&"):z+(ot+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+g+`
`+z})}function lb(l,h,g,v,D,L,z){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+g+`
`+L+" "+z})}function Fs(l,h,g,v){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+cb(l,g)+(v?" "+v:"")})}function ub(l,h){l.info(function(){return"TIMEOUT: "+h})}Ji.prototype.info=function(){};function cb(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return Hc(g)}catch{return h}}var Xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jc;function Ya(){}S(Ya,Qc),Ya.prototype.g=function(){return new XMLHttpRequest},Ya.prototype.i=function(){return{}},Jc=new Ya;function er(l,h,g,v){this.j=l,this.i=h,this.l=g,this.R=v||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jm}function jm(){this.i=null,this.g="",this.h=!1}var Vm={},Zc={};function ed(l,h,g){l.L=1,l.v=tl(Dn(h)),l.m=g,l.P=!0,Om(l,null)}function Om(l,h){l.F=Date.now(),Ja(l),l.A=Dn(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Xm(g.i,"t",v),l.C=0,g=l.j.J,l.h=new jm,l.g=pg(l.j,g?h:null,!l.m),0<l.O&&(l.M=new sb(m(l.Y,l,l.g),l.O)),h=l.U,g=l.g,v=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(Tm[0]=D.toString()),D=Tm);for(var L=0;L<D.length;L++){var z=_m(g,D[L],v||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Xi(),ab(l.i,l.u,l.A,l.l,l.R,l.m)}er.prototype.ca=function(l){l=l.target;const h=this.M;h&&jn(l)==3?h.j():this.Y(l)},er.prototype.Y=function(l){try{if(l==this.g)e:{const at=jn(this.g);var h=this.g.Ba();const zs=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||rg(this.g)))){this.J||at!=4||h==7||(h==8||0>=zs?Xi(3):Xi(2)),td(this);var g=this.g.Z();this.X=g;t:if(Lm(this)){var v=rg(this.g);l="";var D=v.length,L=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Zi(this);var z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,l+=this.h.i.decode(v[h],{stream:!(L&&h==D-1)});v.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,lb(this.i,this.u,this.A,this.l,this.R,at,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Ze=this.g;if((ge=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ge)){var ue=ge;break t}}ue=null}if(g=ue)Fs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nd(this,g);else{this.o=!1,this.s=3,mt(12),Hr(this),Zi(this);break e}}if(this.P){g=!0;let Jt;for(;!this.J&&this.C<z.length;)if(Jt=db(this,z),Jt==Zc){at==4&&(this.s=4,mt(14),g=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Vm){this.s=4,mt(15),Fs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Fs(this.i,this.l,Jt,null),nd(this,Jt);if(Lm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||z.length!=0||this.h.h||(this.s=1,mt(16),g=!1),this.o=this.o&&g,!g)Fs(this.i,this.l,z,"[Invalid Chunked Response]"),Hr(this),Zi(this);else if(0<z.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ld(ot),ot.M=!0,mt(11))}}else Fs(this.i,this.l,z,null),nd(this,z);at==4&&Hr(this),this.o&&!this.J&&(at==4?cg(this.j,this):(this.o=!1,Ja(this)))}else Ab(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Hr(this),Zi(this)}}}catch{}finally{}};function Lm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function db(l,h){var g=l.C,v=h.indexOf(`
`,g);return v==-1?Zc:(g=Number(h.substring(g,v)),isNaN(g)?Vm:(v+=1,v+g>h.length?Zc:(h=h.slice(v,v+g),l.C=v+g,h)))}er.prototype.cancel=function(){this.J=!0,Hr(this)};function Ja(l){l.S=Date.now()+l.I,Mm(l,l.I)}function Mm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Yi(m(l.ba,l),h)}function td(l){l.B&&(a.clearTimeout(l.B),l.B=null)}er.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ub(this.i,this.A),this.L!=2&&(Xi(),mt(17)),Hr(this),this.s=2,Zi(this)):Mm(this,this.S-l)};function Zi(l){l.j.G==0||l.J||cg(l.j,l)}function Hr(l){td(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Sm(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function nd(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||rd(g.h,l))){if(!l.K&&rd(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)al(g),il(g);else break e;ad(g),mt(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=Yi(m(g.Za,g),6e3));if(1>=Bm(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Xr(g,11)}else if((l.K||g.g==l)&&al(g),!w(h))for(D=g.Da.g.parse(h),h=0;h<D.length;h++){let ue=D[h];if(g.T=ue[0],ue=ue[1],g.G==2)if(ue[0]=="c"){g.K=ue[1],g.ia=ue[2];const ot=ue[3];ot!=null&&(g.la=ot,g.j.info("VER="+g.la));const at=ue[4];at!=null&&(g.Aa=at,g.j.info("SVER="+g.Aa));const zs=ue[5];zs!=null&&typeof zs=="number"&&0<zs&&(v=1.5*zs,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Jt=l.g;if(Jt){const ul=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var L=v.h;L.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(sd(L,L.h),L.h=null))}if(v.D){const ud=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;ud&&(v.ya=ud,_e(v.I,v.D,ud))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var z=l;if(v.qa=fg(v,v.J?v.ia:null,v.W),z.K){zm(v.h,z);var ge=z,Ze=v.L;Ze&&(ge.I=Ze),ge.B&&(td(ge),Ja(ge)),v.g=z}else lg(v);0<g.i.length&&ol(g)}else ue[0]!="stop"&&ue[0]!="close"||Xr(g,7);else g.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Xr(g,7):od(g):ue[0]!="noop"&&g.l&&g.l.ta(ue),g.v=0)}}Xi(4)}catch{}}var hb=class{constructor(l,h){this.g=l,this.map=h}};function Fm(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Um(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Bm(l){return l.h?1:l.g?l.g.size:0}function rd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function sd(l,h){l.g?l.g.add(h):l.h=h}function zm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Fm.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $m(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.D);return h}return N(l.i)}function fb(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],g=l.length,v=0;v<g;v++)h.push(l[v]);return h}h=[],g=0;for(v in l)h[g++]=l[v];return h}function pb(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(const v in l)h[g++]=v;return h}}}function qm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=pb(l),v=fb(l),D=v.length,L=0;L<D;L++)h.call(void 0,v[L],g&&g[L],l)}var Km=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mb(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),D=null;if(0<=v){var L=l[g].substring(0,v);D=l[g].substring(v+1)}else L=l[g];h(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Qr){this.h=l.h,Za(this,l.j),this.o=l.o,this.g=l.g,el(this,l.s),this.l=l.l;var h=l.i,g=new no;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),Gm(this,g),this.m=l.m}else l&&(h=String(l).match(Km))?(this.h=!1,Za(this,h[1]||"",!0),this.o=eo(h[2]||""),this.g=eo(h[3]||"",!0),el(this,h[4]),this.l=eo(h[5]||"",!0),Gm(this,h[6]||"",!0),this.m=eo(h[7]||"")):(this.h=!1,this.i=new no(null,this.h))}Qr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(to(h,Wm,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(to(h,Wm,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(to(g,g.charAt(0)=="/"?vb:yb,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",to(g,xb)),l.join("")};function Dn(l){return new Qr(l)}function Za(l,h,g){l.j=g?eo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function el(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Gm(l,h,g){h instanceof no?(l.i=h,wb(l.i,l.h)):(g||(h=to(h,_b)),l.i=new no(h,l.h))}function _e(l,h,g){l.i.set(h,g)}function tl(l){return _e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function eo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function to(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,gb),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function gb(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wm=/[#\/\?@]/g,yb=/[#\?:]/g,vb=/[#\?]/g,_b=/[#\?@]/g,xb=/#/g;function no(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function tr(l){l.g||(l.g=new Map,l.h=0,l.i&&mb(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=no.prototype,t.add=function(l,h){tr(this),this.i=null,l=Us(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function Hm(l,h){tr(l),h=Us(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Qm(l,h){return tr(l),h=Us(l,h),l.g.has(h)}t.forEach=function(l,h){tr(this),this.g.forEach(function(g,v){g.forEach(function(D){l.call(h,D,v,this)},this)},this)},t.na=function(){tr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let v=0;v<h.length;v++){const D=l[v];for(let L=0;L<D.length;L++)g.push(h[v])}return g},t.V=function(l){tr(this);let h=[];if(typeof l=="string")Qm(this,l)&&(h=h.concat(this.g.get(Us(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},t.set=function(l,h){return tr(this),this.i=null,l=Us(this,l),Qm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Xm(l,h,g){Hm(l,h),0<g.length&&(l.i=null,l.g.set(Us(l,h),N(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var v=h[g];const L=encodeURIComponent(String(v)),z=this.V(v);for(v=0;v<z.length;v++){var D=L;z[v]!==""&&(D+="="+encodeURIComponent(String(z[v]))),l.push(D)}}return this.i=l.join("&")};function Us(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function wb(l,h){h&&!l.j&&(tr(l),l.i=null,l.g.forEach(function(g,v){var D=v.toLowerCase();v!=D&&(Hm(this,v),Xm(this,D,g))},l)),l.j=h}function Ib(l,h){const g=new Ji;if(a.Image){const v=new Image;v.onload=y(nr,g,"TestLoadImage: loaded",!0,h,v),v.onerror=y(nr,g,"TestLoadImage: error",!1,h,v),v.onabort=y(nr,g,"TestLoadImage: abort",!1,h,v),v.ontimeout=y(nr,g,"TestLoadImage: timeout",!1,h,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else h(!1)}function Eb(l,h){const g=new Ji,v=new AbortController,D=setTimeout(()=>{v.abort(),nr(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:v.signal}).then(L=>{clearTimeout(D),L.ok?nr(g,"TestPingServer: ok",!0,h):nr(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),nr(g,"TestPingServer: error",!1,h)})}function nr(l,h,g,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(g)}catch{}}function bb(){this.g=new ob}function Tb(l,h,g){const v=g||"";try{qm(l,function(D,L){let z=D;d(D)&&(z=Hc(D)),h.push(v+L+"="+encodeURIComponent(z))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function nl(l){this.l=l.Ub||null,this.j=l.eb||!1}S(nl,Qc),nl.prototype.g=function(){return new rl(this.l,this.j)},nl.prototype.i=function(l){return function(){return l}}({});function rl(l,h){it.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(rl,it),t=rl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,so(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,so(this)),this.g&&(this.readyState=3,so(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ym(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ym(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ro(this):so(this),this.readyState==3&&Ym(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ro(this))},t.Qa=function(l){this.g&&(this.response=l,ro(this))},t.ga=function(){this.g&&ro(this)};function ro(l){l.readyState=4,l.l=null,l.j=null,l.v=null,so(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function so(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Jm(l){let h="";return P(l,function(g,v){h+=v,h+=":",h+=g,h+=`\r
`}),h}function id(l,h,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Jm(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):_e(l,h,g))}function je(l){it.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(je,it);var Sb=/^https?$/i,Nb=["POST","PUT"];t=je.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jc.g(),this.v=this.o?Nm(this.o):Nm(Jc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){Zm(this,L);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)g.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())g.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),D=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Nb,h,void 0))||v||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of g)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ng(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){Zm(this,L)}};function Zm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,eg(l),sl(l)}function eg(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tg(this):this.bb())},t.bb=function(){tg(this)};function tg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)Em(l.Ea,0,l);else if(pt(l,"readystatechange"),jn(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var v;if(v=z===0){var D=String(l.D).match(Km)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),v=!Sb.test(D?D.toLowerCase():"")}g=v}if(g)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var L=2<jn(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",eg(l)}}finally{sl(l)}}}}function sl(l,h){if(l.g){ng(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||pt(l,"ready");try{g.onreadystatechange=v}catch{}}}function ng(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),ib(h)}};function rg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ab(l){const h={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(w(l[v]))continue;var g=C(l[v]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=h[D]||[];h[D]=L,L.push(g)}I(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function sg(l){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,l),this.cb=io("retryDelaySeedMs",1e4,l),this.Wa=io("forwardChannelMaxRetries",2,l),this.wa=io("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Fm(l&&l.concurrentRequestLimit),this.Da=new bb,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sg.prototype,t.la=8,t.G=1,t.connect=function(l,h,g,v){mt(0),this.W=l,this.H=h||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=fg(this,null,this.W),ol(this)};function od(l){if(ig(l),l.G==3){var h=l.U++,g=Dn(l.I);if(_e(g,"SID",l.K),_e(g,"RID",h),_e(g,"TYPE","terminate"),oo(l,g),h=new er(l,l.j,h),h.L=2,h.v=tl(Dn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.v,g=!0),g||(h.g=pg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ja(h)}hg(l)}function il(l){l.g&&(ld(l),l.g.cancel(),l.g=null)}function ig(l){il(l),l.u&&(a.clearTimeout(l.u),l.u=null),al(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ol(l){if(!Um(l.h)&&!l.s){l.s=!0;var h=l.Ga;An||te(),K||(An(),K=!0),J.add(h,l),l.B=0}}function Rb(l,h){return Bm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Yi(m(l.Ga,l,h),dg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new er(this,this.j,l);let L=this.o;if(this.S&&(L?(L=x(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=ag(this,D,h),g=Dn(this.I),_e(g,"RID",l),_e(g,"CVER",22),this.D&&_e(g,"X-HTTP-Session-Id",this.D),oo(this,g),L&&(this.O?h="headers="+encodeURIComponent(String(Jm(L)))+"&"+h:this.m&&id(g,this.m,L)),sd(this.h,D),this.Ua&&_e(g,"TYPE","init"),this.P?(_e(g,"$req",h),_e(g,"SID","null"),D.T=!0,ed(D,g,null)):ed(D,g,h),this.G=2}}else this.G==3&&(l?og(this,l):this.i.length==0||Um(this.h)||og(this))};function og(l,h){var g;h?g=h.l:g=l.U++;const v=Dn(l.I);_e(v,"SID",l.K),_e(v,"RID",g),_e(v,"AID",l.T),oo(l,v),l.m&&l.o&&id(v,l.m,l.o),g=new er(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=ag(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),sd(l.h,g),ed(g,v,h)}function oo(l,h){l.H&&P(l.H,function(g,v){_e(h,v,g)}),l.l&&qm({},function(g,v){_e(h,v,g)})}function ag(l,h,g){g=Math.min(l.i.length,g);var v=l.l?m(l.l.Na,l.l,l):null;e:{var D=l.i;let L=-1;for(;;){const z=["count="+g];L==-1?0<g?(L=D[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let ge=!0;for(let Ze=0;Ze<g;Ze++){let ue=D[Ze].g;const ot=D[Ze].map;if(ue-=L,0>ue)L=Math.max(0,D[Ze].g-100),ge=!1;else try{Tb(ot,z,"req"+ue+"_")}catch{v&&v(ot)}}if(ge){v=z.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,v}function lg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;An||te(),K||(An(),K=!0),J.add(h,l),l.v=0}}function ad(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Yi(m(l.Fa,l),dg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,ug(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Yi(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),il(this),ug(this))};function ld(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function ug(l){l.g=new er(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Dn(l.qa);_e(h,"RID","rpc"),_e(h,"SID",l.K),_e(h,"AID",l.T),_e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&_e(h,"TO",l.ja),_e(h,"TYPE","xmlhttp"),oo(l,h),l.m&&l.o&&id(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=tl(Dn(h)),g.m=null,g.P=!0,Om(g,l)}t.Za=function(){this.C!=null&&(this.C=null,il(this),ad(this),mt(19))};function al(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function cg(l,h){var g=null;if(l.g==h){al(l),ld(l),l.g=null;var v=2}else if(rd(l.h,h))g=h.D,zm(l.h,h),v=1;else return;if(l.G!=0){if(h.o)if(v==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var D=l.B;v=Qa(),pt(v,new km(v,g)),ol(l)}else lg(l);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&Rb(l,h)||v==2&&ad(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),D){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function dg(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function Xr(l,h){if(l.j.info("Error code "+h),h==2){var g=m(l.fb,l),v=l.Xa;const D=!v;v=new Qr(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Za(v,"https"),tl(v),D?Ib(v.toString(),g):Eb(v.toString(),g)}else mt(2);l.G=0,l.l&&l.l.sa(h),hg(l),ig(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function hg(l){if(l.G=0,l.ka=[],l.l){const h=$m(l.h);(h.length!=0||l.i.length!=0)&&(E(l.ka,h),E(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function fg(l,h,g){var v=g instanceof Qr?Dn(g):new Qr(g);if(v.g!="")h&&(v.g=h+"."+v.g),el(v,v.s);else{var D=a.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var L=new Qr(null);v&&Za(L,v),h&&(L.g=h),D&&el(L,D),g&&(L.l=g),v=L}return g=l.D,h=l.ya,g&&h&&_e(v,g,h),_e(v,"VER",l.la),oo(l,v),v}function pg(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new je(new nl({eb:g})):new je(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mg(){}t=mg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ll(){}ll.prototype.g=function(l,h){return new Dt(l,h)};function Dt(l,h){it.call(this),this.g=new sg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Bs(this)}S(Dt,it),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){od(this.g)},Dt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Hc(l),l=g);h.i.push(new hb(h.Ya++,l)),h.G==3&&ol(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,od(this.g),delete this.g,Dt.aa.N.call(this)};function gg(l){Xc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(gg,Xc);function yg(){Yc.call(this),this.status=1}S(yg,Yc);function Bs(l){this.g=l}S(Bs,mg),Bs.prototype.ua=function(){pt(this.g,"a")},Bs.prototype.ta=function(l){pt(this.g,new gg(l))},Bs.prototype.sa=function(l){pt(this.g,new yg)},Bs.prototype.ra=function(){pt(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Zw=function(){return new ll},Jw=function(){return Qa()},Yw=Wr,ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xa.NO_ERROR=0,Xa.TIMEOUT=8,Xa.HTTP_ERROR=6,Yl=Xa,Dm.COMPLETE="complete",Xw=Dm,Am.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",it.prototype.listen=it.prototype.K,No=Am,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Qw=je}).apply(typeof Al<"u"?Al:typeof self<"u"?self:typeof window<"u"?window:{});const hv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new _p("@firebase/firestore");function Hs(){return Is.logLevel}function U(t,...e){if(Is.logLevel<=ie.DEBUG){const n=e.map(Dp);Is.debug(`Firestore (${$i}): ${t}`,...n)}}function yt(t,...e){if(Is.logLevel<=ie.ERROR){const n=e.map(Dp);Is.error(`Firestore (${$i}): ${t}`,...n)}}function Es(t,...e){if(Is.logLevel<=ie.WARN){const n=e.map(Dp);Is.warn(`Firestore (${$i}): ${t}`,...n)}}function Dp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: `+t;throw yt(e),new Error(e)}function Q(t,e){t||H()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class UP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BP{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Q(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new In;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new In,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new In)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new eI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new tt(e)}}class zP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $P{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Q(this.o===void 0);const r=i=>{i.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q(typeof n.token=="string"),this.R=n.token,new qP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=GP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function Ri(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function nI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new ke(0,0))}static max(){return new X(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ma?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends ma{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const WP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ce extends ma{construct(e,n,r){return new Ce(e,n,r)}static isValidIdentifier(e){return WP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ce(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new $(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ce(n)}static emptyPath(){return new Ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(de.fromString(e))}static fromName(e){return new q(de.fromString(e).popFirst(5))}static empty(){return new q(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new de(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function tf(t){return t.fields.find(e=>e.kind===2)}function ts(t){return t.fields.filter(e=>e.kind!==2)}Fu.UNKNOWN_ID=-1;class Jl{constructor(e,n){this.fieldPath=e,this.kind=n}}class ga{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ga(0,Ft.min())}}function HP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Ft(s,q.empty(),e)}function rI(t){return new Ft(t.readTime,t.key,-1)}class Ft{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ft(X.min(),q.empty(),-1)}static max(){return new Ft(X.max(),q.empty(),-1)}}function jp(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==sI)throw t;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new In,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Vp(r.target.error);this.V.reject(new zo(e,s))}}static open(e,n,r,s){try{return new Ic(n,e.transaction(s,r))}catch(i){throw new zo(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new XP(n)}}class Cr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Cr.S(We())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),ns(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!uw())return!1;if(Cr.v())return!0;const e=We(),n=Cr.S(e),r=0<n&&n<10,s=oI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new zo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new $(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new $(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zo(e,o))},s.onupgradeneeded=i=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Ic.open(this.db,e,i?"readonly":"readwrite",r),u=s(a).next(d=>(a.g(),d)).catch(d=>(a.abort(d),V.reject(d))).toPromise();return u.catch(()=>{}),await a.m,u}catch(a){const u=a,d=u.name!=="FirebaseError"&&o<3;if(U("SimpleDb","Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class QP{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ns(this.B.delete())}}class zo extends ${constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qr(t){return t.name==="IndexedDbTransactionError"}class XP{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(U("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ns(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),ns(this.store.add(e))}get(e){return ns(this.store.get(e)).next(n=>(n===void 0&&(n=null),U("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),ns(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),ns(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=u=>{a(u.target.error)},i.onsuccess=u=>{o(u.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){U("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=Vp(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const u=new QP(a),d=n(a.primaryKey,a.value,u);if(d instanceof V){const f=d.catch(p=>(u.done(),V.reject(p)));r.push(f)}u.isDone?s():u.K===null?a.continue():a.continue(u.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ns(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Vp(r.target.error);n(s)}})}let fv=!1;function Vp(t){const e=Cr.S(We());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fv||(fv=!0,setTimeout(()=>{throw r},0)),r}}return t}class YP{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){U("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{U("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){qr(n)?U("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Vs(n)}await this.X(6e4)})}}class JP{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return U("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(U("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=rI(i);jp(o,r)>0&&(r=o)}),new Ft(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gt.oe=-1;function Ec(t){return t==null}function ya(t){return t===0&&1/t==-1/0}function ZP(t){return typeof t=="number"&&Number.isInteger(t)&&!ya(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pv(e)),e=ek(t.get(n),e);return pv(e)}function ek(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function pv(t){return t+""}function mn(t){const e=t.length;if(Q(e>=2),e===2)return Q(t.charAt(0)===""&&t.charAt(1)===""),de.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&H(),t.charAt(o+1)){case"":const a=t.substring(i,o);let u;s.length===0?u=a:(s+=a,u=s,s=""),r.push(u);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:H()}i=o+2}return new de(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e){return[t,xt(e)]}function aI(t,e,n){return[t,xt(e),n]}const tk={},nk=["prefixPath","collectionGroup","readTime","documentId"],rk=["prefixPath","collectionGroup","documentId"],sk=["collectionGroup","readTime","prefixPath","documentId"],ik=["canonicalId","targetId"],ok=["targetId","path"],ak=["path","targetId"],lk=["collectionId","parent"],uk=["indexId","uid"],ck=["uid","sequenceNumber"],dk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hk=["indexId","uid","orderedDocumentKey"],fk=["userId","collectionPath","documentId"],pk=["userId","collectionPath","largestBatchId"],mk=["userId","collectionGroup","largestBatchId"],lI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gk=[...lI,"documentOverlays"],uI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cI=uI,Op=[...cI,"indexConfiguration","indexState","indexEntries"],yk=Op,vk=[...Op,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends iI{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Qe(t,e){const n=Z(t);return Cr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rl(this.root,e,this.comparator,!0)}}class Rl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pe(this.comparator);return n.data=e,n}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.fields=e,e.sort(Ce.comparator)}static empty(){return new Rt([])}unionWith(e){let n=new pe(Ce.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hI("Invalid base64 string: "+i):i}}(e);return new ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const _k=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(t){if(Q(!!t),typeof t=="string"){let e=0;const n=_k.exec(t);if(Q(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?ze.fromBase64String(t):ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mp(t){const e=t.mapValue.fields.__previous_value__;return Lp(e)?Mp(e):e}function va(t){const e=Yn(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r,s,i,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class bs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eu={nullValue:"NULL_VALUE"};function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lp(t)?4:fI(t)?9007199254740991:bc(t)?10:11:H()}function En(t,e){if(t===e)return!0;const n=Ts(t);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return va(t).isEqual(va(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yn(s.timestampValue),a=Yn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Vr(s.bytesValue).isEqual(Vr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ee(s.geoPointValue.latitude)===Ee(i.geoPointValue.latitude)&&Ee(s.geoPointValue.longitude)===Ee(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ee(s.integerValue)===Ee(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ee(s.doubleValue),a=Ee(i.doubleValue);return o===a?ya(o)===ya(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ri(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(gv(o)!==gv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!En(o[u],a[u])))return!1;return!0}(t,e);default:return H()}}function _a(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function Or(t,e){if(t===e)return 0;const n=Ts(t),r=Ts(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ee(i.integerValue||i.doubleValue),u=Ee(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return vv(t.timestampValue,e.timestampValue);case 4:return vv(va(t),va(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Vr(i),u=Vr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=ee(a[d],u[d]);if(f!==0)return f}return ee(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ee(Ee(i.latitude),Ee(o.latitude));return a!==0?a:ee(Ee(i.longitude),Ee(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _v(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,d,f;const p=i.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ee(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:_v(y,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_r.mapValue&&o===_r.mapValue)return 0;if(i===_r.mapValue)return 1;if(o===_r.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=ee(u[p],f[p]);if(m!==0)return m;const y=Or(a[u[p]],d[f[p]]);if(y!==0)return y}return ee(u.length,f.length)}(t.mapValue,e.mapValue);default:throw H()}}function vv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Yn(t),r=Yn(e),s=ee(n.seconds,r.seconds);return s!==0?s:ee(n.nanos,r.nanos)}function _v(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Or(n[s],r[s]);if(i)return i}return ee(n.length,r.length)}function Ci(t){return rf(t)}function rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${rf(n.fields[o])}`;return s+"}"}(t.mapValue):H()}function xa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sf(t){return!!t&&"integerValue"in t}function wa(t){return!!t&&"arrayValue"in t}function xv(t){return!!t&&"nullValue"in t}function wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tu(t){return!!t&&"mapValue"in t}function bc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $o(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$o(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$o(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const pI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function wk(t){return"nullValue"in t?eu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?xa(bs.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bc(t)?pI:{mapValue:{}}:H()}function Ik(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?xa(bs.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?pI:"mapValue"in t?bc(t)?{mapValue:{}}:_r:H()}function Iv(t,e){const n=Or(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Ev(t,e){const n=Or(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.value=e}static empty(){return new ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(n)}setAll(e){let n=Ce.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=$o(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];tu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Os(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ht($o(this.value))}}function mI(t){const e=[];return Os(t.fields,(n,r)=>{const s=new Ce([n]);if(tu(r)){const i=mI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Oe(e,0,X.min(),X.min(),X.min(),ht.empty(),0)}static newFoundDocument(e,n,r,s){return new Oe(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new Oe(e,2,n,X.min(),X.min(),ht.empty(),0)}static newUnknownDocument(e,n){return new Oe(e,3,n,X.min(),X.min(),ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Oe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.position=e,this.inclusive=n}}function bv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Or(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ek(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class oe extends gI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bk(e,n,r):n==="array-contains"?new Nk(e,r):n==="in"?new II(e,r):n==="not-in"?new Ak(e,r):n==="array-contains-any"?new Rk(e,r):new oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Tk(e,r):new Sk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Or(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Or(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class he extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new he(e,n)}matches(e){return ki(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ki(t){return t.op==="and"}function of(t){return t.op==="or"}function Fp(t){return yI(t)&&ki(t)}function yI(t){for(const e of t.filters)if(e instanceof he)return!1;return!0}function af(t){if(t instanceof oe)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(Fp(t))return t.filters.map(e=>af(e)).join(",");{const e=t.filters.map(n=>af(n)).join(",");return`${t.op}(${e})`}}function vI(t,e){return t instanceof oe?function(r,s){return s instanceof oe&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)}(t,e):t instanceof he?function(r,s){return s instanceof he&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&vI(o,s.filters[a]),!0):!1}(t,e):void H()}function _I(t,e){const n=t.filters.concat(e);return he.create(n,t.op)}function xI(t){return t instanceof oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof he?function(n){return n.op.toString()+" {"+n.getFilters().map(xI).join(" ,")+"}"}(t):"Filter"}class bk extends oe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Tk extends oe{constructor(e,n){super(e,"in",n),this.keys=wI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Sk extends oe{constructor(e,n){super(e,"not-in",n),this.keys=wI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Nk extends oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wa(n)&&_a(n.arrayValue,this.value)}}class II extends oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_a(this.value.arrayValue,n)}}class Ak extends oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_a(this.value.arrayValue,n)}}class Rk extends oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function lf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Ck(t,e,n,r,s,i,o)}function Ss(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>af(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ec(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.ue=n}return e.ue}function Ma(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ek(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tv(t.startAt,e.startAt)&&Tv(t.endAt,e.endAt)}function Bu(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function zu(t,e){return t.filters.filter(n=>n instanceof oe&&n.field.isEqual(e))}function Sv(t,e,n){let r=eu,s=!0;for(const i of zu(t,e)){let o=eu,a=!0;switch(i.op){case"<":case"<=":o=wk(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=eu}Iv({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Iv({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Nv(t,e,n){let r=_r,s=!0;for(const i of zu(t,e)){let o=_r,a=!0;switch(i.op){case">=":case">":o=Ik(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=_r}Ev({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Ev({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Pk(t,e,n,r,s,i,o,a){return new Fa(t,e,n,r,s,i,o,a)}function Tc(t){return new Fa(t)}function Av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EI(t){return t.collectionGroup!==null}function qo(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pe(Ce.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Uu(i,r))}),n.has(Ce.keyField().canonicalString())||e.ce.push(new Uu(Ce.keyField(),r))}return e.ce}function Ht(t){const e=Z(t);return e.le||(e.le=kk(e,qo(t))),e.le}function kk(t,e){if(t.limitType==="F")return lf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Uu(s.field,i)});const n=t.endAt?new Pi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pi(t.startAt.position,t.startAt.inclusive):null;return lf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uf(t,e){const n=t.filters.concat([e]);return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cf(t,e,n){return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sc(t,e){return Ma(Ht(t),Ht(e))&&t.limitType===e.limitType}function bI(t){return`${Ss(Ht(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xI(s)).join(", ")}]`),Ec(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ci(s)).join(",")),`Target(${r})`}(Ht(t))}; limitType=${t.limitType})`}function Ua(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of qo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const d=bv(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,qo(r),s)||r.endAt&&!function(o,a,u){const d=bv(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,qo(r),s))}(t,e)}function Dk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TI(t){return(e,n)=>{let r=!1;for(const s of qo(t)){const i=jk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jk(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),d=a.data.field(i);return u!==null&&d!==null?Or(u,d):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new Se(q.comparator);function Ot(){return Vk}const SI=new Se(q.comparator);function Ao(...t){let e=SI;for(const n of t)e=e.insert(n.key,n);return e}function NI(t){let e=SI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gn(){return Ko()}function AI(){return Ko()}function Ko(){return new Kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ok=new Se(q.comparator),Lk=new pe(q.comparator);function ne(...t){let e=Lk;for(const n of t)e=e.add(n);return e}const Mk=new pe(ee);function Fk(){return Mk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ya(e)?"-0":e}}function RI(t){return{integerValue:""+t}}function Uk(t,e){return ZP(e)?RI(e):Up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function Bk(t,e,n){return t instanceof Ia?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lp(i)&&(i=Mp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Di?PI(t,e):t instanceof ji?kI(t,e):function(s,i){const o=CI(s,i),a=Rv(o)+Rv(s.Pe);return sf(o)&&sf(s.Pe)?RI(a):Up(s.serializer,a)}(t,e)}function zk(t,e,n){return t instanceof Di?PI(t,e):t instanceof ji?kI(t,e):n}function CI(t,e){return t instanceof Ea?function(r){return sf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ia extends Nc{}class Di extends Nc{constructor(e){super(),this.elements=e}}function PI(t,e){const n=DI(e);for(const r of t.elements)n.some(s=>En(s,r))||n.push(r);return{arrayValue:{values:n}}}class ji extends Nc{constructor(e){super(),this.elements=e}}function kI(t,e){let n=DI(e);for(const r of t.elements)n=n.filter(s=>!En(s,r));return{arrayValue:{values:n}}}class Ea extends Nc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Rv(t){return Ee(t.integerValue||t.doubleValue)}function DI(t){return wa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.field=e,this.transform=n}}function qk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Di&&s instanceof Di||r instanceof ji&&s instanceof ji?Ri(r.elements,s.elements,En):r instanceof Ea&&s instanceof Ea?En(r.Pe,s.Pe):r instanceof Ia&&s instanceof Ia}(t.transform,e.transform)}class Kk{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ac{}function jI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rc(t.key,vt.none()):new qi(t.key,t.data,vt.none());{const n=t.data,r=ht.empty();let s=new pe(Ce.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Zn(t.key,r,new Rt(s.toArray()),vt.none())}}function Gk(t,e,n){t instanceof qi?function(s,i,o){const a=s.value.clone(),u=Pv(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zn?function(s,i,o){if(!nu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Pv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(VI(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Go(t,e,n,r){return t instanceof qi?function(i,o,a,u){if(!nu(i.precondition,o))return a;const d=i.value.clone(),f=kv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zn?function(i,o,a,u){if(!nu(i.precondition,o))return a;const d=kv(i.fieldTransforms,u,o),f=o.data;return f.setAll(VI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return nu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Wk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=CI(r.transform,s||null);i!=null&&(n===null&&(n=ht.empty()),n.set(r.field,i))}return n||null}function Cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ri(r,s,(i,o)=>qk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qi extends Ac{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zn extends Ac{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Pv(t,e,n){const r=new Map;Q(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,zk(o,a,n[s]))}return r}function kv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Bk(i,o,e))}return r}class Rc extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OI extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Gk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Go(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Go(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=jI(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,(n,r)=>Cv(n,r))&&Ri(this.baseMutations,e.baseMutations,(n,r)=>Cv(n,r))}}class zp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Q(e.mutations.length===r.length);let s=function(){return Ok}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ae;function Qk(t){switch(t){default:return H();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function LI(t){if(t===void 0)return yt("GRPC error has no .code"),F.UNKNOWN;switch(t){case Fe.OK:return F.OK;case Fe.CANCELLED:return F.CANCELLED;case Fe.UNKNOWN:return F.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return F.INTERNAL;case Fe.UNAVAILABLE:return F.UNAVAILABLE;case Fe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Fe.NOT_FOUND:return F.NOT_FOUND;case Fe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Fe.ABORTED:return F.ABORTED;case Fe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Fe.DATA_LOSS:return F.DATA_LOSS;default:return H()}}(ae=Fe||(Fe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new hs([4294967295,4294967295],0);function Dv(t){const e=Xk().encode(t),n=new Hw;return n.update(e),new Uint8Array(n.digest())}function jv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hs([n,r],0),new hs([s,i],0)]}class qp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ro(`Invalid padding: ${n}`);if(r<0)throw new Ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hs.fromNumber(r)));return s.compare(Yk)===1&&(s=new hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Dv(e),[r,s]=jv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qp(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Dv(e),[r,s]=jv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ba.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cc(X.min(),s,new Se(ee),Ot(),ne())}}class Ba{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ba(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class MI{constructor(e,n){this.targetId=e,this.me=n}}class FI{constructor(e,n,r=ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vv{constructor(){this.fe=0,this.ge=Lv(),this.pe=ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:H()}}),new Ba(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Lv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Jk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=Ov(),this.Qe=new Se(ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Bu(i))if(r===0){const o=new q(i.path);this.Ue(n,o,Oe.newNoDocument(o,X.min()))}else Q(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Vr(r).toUint8Array()}catch(u){if(u instanceof hI)return Es("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new qp(o,s,i)}catch(u){return Es(u instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Bu(a.target)){const u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Oe.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Cc(e,n,this.Qe,this.ke,r);return this.ke=Ot(),this.qe=Ov(),this.Qe=new Se(ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pe(ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ov(){return new Se(q.comparator)}function Lv(){return new Se(q.comparator)}const Zk={asc:"ASCENDING",desc:"DESCENDING"},e1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t1={and:"AND",or:"OR"};class n1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function df(t,e){return t.useProto3Json||Ec(e)?e:{value:e}}function Vi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function r1(t,e){return Vi(t,e.toTimestamp())}function wt(t){return Q(!!t),X.fromTimestamp(function(n){const r=Yn(n);return new ke(r.seconds,r.nanos)}(t))}function Kp(t,e){return hf(t,e).canonicalString()}function hf(t,e){const n=function(s){return new de(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BI(t){const e=de.fromString(t);return Q(XI(e)),e}function $u(t,e){return Kp(t.databaseId,e.path)}function fs(t,e){const n=BI(e);if(n.get(1)!==t.databaseId.projectId)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(qI(n))}function zI(t,e){return Kp(t.databaseId,e)}function $I(t){const e=BI(t);return e.length===4?de.emptyPath():qI(e)}function ff(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qI(t){return Q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mv(t,e,n){return{name:$u(t,e),fields:n.value.mapValue.fields}}function s1(t,e,n){const r=fs(t,e.name),s=wt(e.updateTime),i=e.createTime?wt(e.createTime):X.min(),o=new ht({mapValue:{fields:e.fields}}),a=Oe.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function i1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Q(f===void 0||typeof f=="string"),ze.fromBase64String(f||"")):(Q(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?F.UNKNOWN:LI(d.code);return new $(f,d.message||"")}(o);n=new FI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fs(t,r.document.name),i=wt(r.document.updateTime),o=r.document.createTime?wt(r.document.createTime):X.min(),a=new ht({mapValue:{fields:r.document.fields}}),u=Oe.newFoundDocument(s,i,o,a),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ru(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fs(t,r.document),i=r.readTime?wt(r.readTime):X.min(),o=Oe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fs(t,r.document),i=r.removedTargetIds||[];n=new ru([],i,s,null)}else{if(!("filter"in e))return H();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Hk(s,i),a=r.targetId;n=new MI(a,o)}}return n}function qu(t,e){let n;if(e instanceof qi)n={update:Mv(t,e.key,e.value)};else if(e instanceof Rc)n={delete:$u(t,e.key)};else if(e instanceof Zn)n={update:Mv(t,e.key,e.data),updateMask:d1(e.fieldMask)};else{if(!(e instanceof OI))return H();n={verify:$u(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Di)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ea)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:r1(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:H()}(t,e.precondition)),n}function pf(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?vt.updateTime(wt(i.updateTime)):i.exists!==void 0?vt.exists(i.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new Ia;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];u=new Di(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];u=new ji(f)}else"increment"in a?u=new Ea(o,a.increment):H();const d=Ce.fromServerFormat(a.fieldPath);return new $k(d,u)}(t,s)):[];if(e.update){e.update.name;const s=fs(t,e.update.name),i=new ht({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const d=u.fieldPaths||[];return new Rt(d.map(f=>Ce.fromServerFormat(f)))}(e.updateMask);return new Zn(s,i,o,n,r)}return new qi(s,i,n,r)}if(e.delete){const s=fs(t,e.delete);return new Rc(s,n)}if(e.verify){const s=fs(t,e.verify);return new OI(s,n)}return H()}function o1(t,e){return t&&t.length>0?(Q(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wt(s.updateTime):wt(i);return o.isEqual(X.min())&&(o=wt(i)),new Kk(o,s.transformResults||[])}(n,e))):[]}function KI(t,e){return{documents:[zI(t,e.path)]}}function GI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zI(t,s);const i=function(d){if(d.length!==0)return QI(he.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Xs(m.field),direction:l1(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=df(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function WI(t){let e=$I(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Q(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const m=HI(p);return m instanceof he&&Fp(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(S){return new Uu(Ys(S.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ec(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,y=p.values||[];return new Pi(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,y=p.values||[];return new Pi(y,m)}(n.endAt)),Pk(e,s,o,i,a,"F",u,d)}function a1(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ys(n.unaryFilter.field);return oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ys(n.unaryFilter.field);return oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ys(n.unaryFilter.field);return oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ys(n.unaryFilter.field);return oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return oe.create(Ys(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return he.create(n.compositeFilter.filters.map(r=>HI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function l1(t){return Zk[t]}function u1(t){return e1[t]}function c1(t){return t1[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return Ce.fromServerFormat(t.fieldPath)}function QI(t){return t instanceof oe?function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NAN"}};if(xv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NAN"}};if(xv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(n.field),op:u1(n.op),value:n.value}}}(t):t instanceof he?function(n){const r=n.getFilters().map(s=>QI(s));return r.length===1?r[0]:{compositeFilter:{op:c1(n.op),filters:r}}}(t):H()}function d1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,r,s,i=X.min(),o=X.min(),a=ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.ct=e}}function h1(t,e){let n;if(e.document)n=s1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),s=As(e.noDocument.readTime);n=Oe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=q.fromSegments(e.unknownDocument.path),s=As(e.unknownDocument.version);n=Oe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ke(s[0],s[1]);return X.fromTimestamp(i)}(e.readTime)),n}function Fv(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ku(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:$u(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Vi(i,o.version.toTimestamp()),createTime:Vi(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ns(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:n.path.toArray(),version:Ns(e.version)}}return r}function Ku(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ns(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function As(t){const e=new ke(t.seconds,t.nanoseconds);return X.fromTimestamp(e)}function rs(t,e){const n=(e.baseMutations||[]).map(i=>pf(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>pf(t.ct,i)),s=ke.fromMillis(e.localWriteTimeMs);return new Bp(e.batchId,s,n,r)}function Co(t){const e=As(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?As(t.lastLimboFreeSnapshotVersion):X.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return Q(i.documents.length===1),Ht(Tc($I(i.documents[0])))}(t.query):function(i){return Ht(WI(i))}(t.query),new zn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ze.fromBase64String(t.resumeToken))}function JI(t,e){const n=Ns(e.snapshotVersion),r=Ns(e.lastLimboFreeSnapshotVersion);let s;s=Bu(e.target)?KI(t.ct,e.target):GI(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ss(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function ZI(t){const e=WI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}function qd(t,e){return new $p(e.largestBatchId,pf(t.ct,e.overlayMutation))}function Uv(t,e){const n=e.path.lastSegment();return[t,xt(e.path.popLast()),n]}function Bv(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ns(r.readTime),documentKey:xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{getBundleMetadata(e,n){return zv(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:As(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return zv(e).put(function(s){return{bundleId:s.id,createTime:Ns(wt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return $v(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:ZI(i.bundledQuery),readTime:As(i.readTime)}}(r)})}saveNamedQuery(e,n){return $v(e).put(function(s){return{name:s.name,readTime:Ns(wt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function zv(t){return Qe(t,"bundles")}function $v(t){return Qe(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Pc(e,r)}getOverlay(e,n){return go(e).get(Uv(this.userId,n)).next(r=>r?qd(this.serializer,r):null)}getOverlays(e,n){const r=gn();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new $p(n,o);s.push(this.ht(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(xt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(go(e).j("collectionPathOverlayIndex",a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=gn(),i=xt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return go(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=qd(this.serializer,u);s.set(d.getKey(),d)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=gn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return go(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const p=qd(this.serializer,d);i.size()<s||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>i)}ht(e,n){return go(e).put(function(s,i,o){const[a,u,d]=Uv(i,o.mutation.key);return{userId:i,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:qu(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function go(t){return Qe(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{Pt(e){return Qe(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ze.fromUint8Array(r):ze.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ee(e.integerValue));else if("doubleValue"in e){const r=Ee(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ya(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Yn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Vr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?fI(e)?this.dt(n,Number.MAX_SAFE_INTEGER):bc(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):H()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Ee(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ss.vt=new ss;function m1(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function qv(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=m1(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class g1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=qv(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=qv(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class y1{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class v1{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class yo{constructor(){this.jt=new g1,this.Ht=new y1(this.jt),this.Jt=new v1(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new is(this.indexId,this.documentKey,this.arrayValue,r)}}function ir(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Kv(t.arrayValue,e.arrayValue),n!==0?n:(n=Kv(t.directionalValue,e.directionalValue),n!==0?n:q.comparator(t.documentKey,e.documentKey)))}function Kv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.Xt=new pe((n,r)=>Ce.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;const n=tf(e);if(n!==void 0&&!this.sn(n))return!1;const r=ts(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const u=r[i];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new pe(Ce.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Jl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Jl(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Jl(r.field,r.dir==="asc"?0:1)));return new Fu(Fu.UNKNOWN_ID,this.collectionId,n,ga.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){var e,n;if(Q(t instanceof oe||t instanceof he),t instanceof oe){if(t instanceof II){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>oe.create(t.field,"==",i)))||[];return he.create(s,"or")}return t}const r=t.filters.map(s=>eE(s));return he.create(r,t.op)}function _1(t){if(t.getFilters().length===0)return[];const e=yf(eE(t));return Q(tE(e)),mf(e)||gf(e)?[e]:e.getFilters()}function mf(t){return t instanceof oe}function gf(t){return t instanceof he&&Fp(t)}function tE(t){return mf(t)||gf(t)||function(n){if(n instanceof he&&of(n)){for(const r of n.getFilters())if(!mf(r)&&!gf(r))return!1;return!0}return!1}(t)}function yf(t){if(Q(t instanceof oe||t instanceof he),t instanceof oe)return t;if(t.filters.length===1)return yf(t.filters[0]);const e=t.filters.map(r=>yf(r));let n=he.create(e,t.op);return n=Gu(n),tE(n)?n:(Q(n instanceof he),Q(ki(n)),Q(n.filters.length>1),n.filters.reduce((r,s)=>Gp(r,s)))}function Gp(t,e){let n;return Q(t instanceof oe||t instanceof he),Q(e instanceof oe||e instanceof he),n=t instanceof oe?e instanceof oe?function(s,i){return he.create([s,i],"and")}(t,e):Wv(t,e):e instanceof oe?Wv(e,t):function(s,i){if(Q(s.filters.length>0&&i.filters.length>0),ki(s)&&ki(i))return _I(s,i.getFilters());const o=of(s)?s:i,a=of(s)?i:s,u=o.filters.map(d=>Gp(d,a));return he.create(u,"or")}(t,e),Gu(n)}function Wv(t,e){if(ki(e))return _I(e,t.getFilters());{const n=e.filters.map(r=>Gp(t,r));return he.create(n,"or")}}function Gu(t){if(Q(t instanceof oe||t instanceof he),t instanceof oe)return t;const e=t.getFilters();if(e.length===1)return Gu(e[0]);if(yI(t))return t;const n=e.map(s=>Gu(s)),r=[];return n.forEach(s=>{s instanceof oe?r.push(s):s instanceof he&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:he.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.un=new Wp}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Ft.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Ft.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Wp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new pe(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pe(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Uint8Array(0);class w1{constructor(e,n){this.databaseId=n,this.cn=new Wp,this.ln=new Kr(r=>Ss(r),(r,s)=>Ma(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:xt(s)};return Hv(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[nI(n),""],!1,!0);return Hv(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(mn(o.parent))}return r})}addFieldIndex(e,n){const r=vo(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Gs(e);return i.next(a=>{o.put(Bv(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=vo(e),s=Gs(e),i=Ks(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=vo(e),r=Ks(e),s=Gs(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return V.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Gv(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Ks(e);let s=!0;const i=new Map;return V.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ne();const a=[];return V.forEach(i,(u,d)=>{U("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(u)} to execute ${Ss(n)}`);const f=function(b,O){const M=tf(O);if(M===void 0)return null;for(const P of zu(b,M.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(d,u),p=function(b,O){const M=new Map;for(const P of ts(O))for(const I of zu(b,P.fieldPath))switch(I.op){case"==":case"in":M.set(P.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return M.set(P.fieldPath.canonicalString(),I.value),Array.from(M.values())}return null}(d,u),m=function(b,O){const M=[];let P=!0;for(const I of ts(O)){const x=I.kind===0?Sv(b,I.fieldPath,b.startAt):Nv(b,I.fieldPath,b.startAt);M.push(x.value),P&&(P=x.inclusive)}return new Pi(M,P)}(d,u),y=function(b,O){const M=[];let P=!0;for(const I of ts(O)){const x=I.kind===0?Nv(b,I.fieldPath,b.endAt):Sv(b,I.fieldPath,b.endAt);M.push(x.value),P&&(P=x.inclusive)}return new Pi(M,P)}(d,u),S=this.In(u,d,m),N=this.In(u,d,y),E=this.Tn(u,d,p),_=this.En(u.indexId,f,S,m.inclusive,N,y.inclusive,E);return V.forEach(_,w=>r.G(w,n.limit).next(b=>{b.forEach(O=>{const M=q.fromSegments(O.documentKey);o.has(M)||(o=o.add(M),a.push(M))})}))}).next(()=>a)}return V.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=_1(he.create(e.filters,"and")).map(r=>lf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,i.length),d=u/(n!=null?n.length:1),f=[];for(let p=0;p<u;++p){const m=n?this.dn(n[p/d]):Cl,y=this.An(e,m,r[p%d],s),S=this.Rn(e,m,i[p%d],o),N=a.map(E=>this.An(e,m,E,!0));f.push(...this.createRange(y,S,N))}return f}An(e,n,r,s){const i=new is(e,q.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new is(e,q.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new Gv(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return V.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(u){let d=new pe(Ce.comparator),f=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:d=d.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new yo;for(const s of ts(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);ss.vt.It(i,o)}return r.zt()}dn(e){const n=new yo;return ss.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new yo;return ss.vt.It(xa(this.databaseId,n),r.Yt(function(i){const o=ts(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new yo);let i=0;for(const o of ts(e)){const a=r[i++];for(const u of s)if(this.fn(n,o.fieldPath)&&wa(a))s=this.gn(s,o,a);else{const d=u.Yt(o.kind);ss.vt.It(a,d)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const u=new yo;u.seed(a.zt()),ss.vt.It(o,u.Yt(n.kind)),i.push(u)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=vo(e),s=Gs(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(u=>{o.push(function(f,p){const m=p?new ga(p.sequenceNumber,new Ft(As(p.readTime),new q(mn(p.documentKey)),p.largestBatchId)):ga.empty(),y=f.fields.map(([S,N])=>new Jl(Ce.fromServerFormat(S),N));return new Fu(f.indexId,f.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ee(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=vo(e),i=Gs(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,u=>i.put(Bv(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,u=>this.wn(e,s,u).next(d=>{const f=this.Sn(i,u);return d.isEqual(f)?V.resolve():this.bn(e,i,u,d,f)}))))})}Dn(e,n,r,s){return Ks(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return Ks(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Ks(e);let i=new pe(ir);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new is(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new pe(ir);const s=this.Vn(n,e);if(s==null)return r;const i=tf(n);if(i!=null){const o=e.data.field(i.fieldPath);if(wa(o))for(const a of o.arrayValue.values||[])r=r.add(new is(n.indexId,e.key,this.dn(a),s))}else r=r.add(new is(n.indexId,e.key,Cl,s));return r}bn(e,n,r,s,i){U("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,p,m){const y=u.getIterator(),S=d.getIterator();let N=qs(y),E=qs(S);for(;N||E;){let _=!1,w=!1;if(N&&E){const b=f(N,E);b<0?w=!0:b>0&&(_=!0)}else N!=null?w=!0:_=!0;_?(p(E),E=qs(S)):w?(m(N),N=qs(y)):(N=qs(y),E=qs(S))}}(s,i,ir,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),V.waitFor(o)}yn(e){let n=1;return Gs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ir(o,a)).filter((o,a,u)=>!a||ir(o,u[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ir(o,e),u=ir(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&u<0)s.push(o),s.push(o.Zt());else if(u>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Cl,[]],u=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Cl,[]];i.push(IDBKeyRange.bound(a,u))}return i}Cn(e,n){return ir(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Qv)}getMinOffset(e,n){return V.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||H())).next(Qv)}}function Hv(t){return Qe(t,"collectionParents")}function Ks(t){return Qe(t,"indexEntries")}function vo(t){return Qe(t,"indexConfiguration")}function Gs(t){return Qe(t,"indexState")}function Qv(t){Q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;jp(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Ft(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class St{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new St(e,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(f,p,m)=>(a++,m.delete()));i.push(u.next(()=>{Q(a===1)}));const d=[];for(const f of n.mutations){const p=aI(e,f.key.path,n.batchId);i.push(s.delete(p)),d.push(f.key)}return V.waitFor(i).next(()=>d)}function Wu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw H();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St.DEFAULT_COLLECTION_PERCENTILE=10,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,St.DEFAULT=new St(41943040,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),St.DISABLED=new St(-1,0,0);class kc{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Q(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new kc(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return or(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Js(e),o=or(e);return o.add({}).next(a=>{Q(typeof a=="number");const u=new Bp(a,n,r,s),d=function(y,S,N){const E=N.baseMutations.map(w=>qu(y.ct,w)),_=N.mutations.map(w=>qu(y.ct,w));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:E,mutations:_}}(this.serializer,this.userId,u),f=[];let p=new pe((m,y)=>ee(m.canonicalString(),y.canonicalString()));for(const m of s){const y=aI(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(o.put(d)),f.push(i.put(y,tk))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),V.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return or(e).get(n).next(r=>r?(Q(r.userId===this.userId),rs(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?V.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return or(e).J({index:"userMutationsIndex",range:s},(o,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),i=rs(this.serializer,a)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return or(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return or(e).U("userMutationsIndex",n).next(r=>r.map(s=>rs(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Zl(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Js(e).J({range:s},(o,a,u)=>{const[d,f,p]=o,m=mn(f);if(d===this.userId&&n.path.isEqual(m))return or(e).get(p).next(y=>{if(!y)throw H();Q(y.userId===this.userId),i.push(rs(this.serializer,y))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pe(ee);const s=[];return n.forEach(i=>{const o=Zl(this.userId,i.path),a=IDBKeyRange.lowerBound(o),u=Js(e).J({range:a},(d,f,p)=>{const[m,y,S]=d,N=mn(y);m===this.userId&&i.path.isEqual(N)?r=r.add(S):p.done()});s.push(u)}),V.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Zl(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new pe(ee);return Js(e).J({range:o},(u,d,f)=>{const[p,m,y]=u,S=mn(m);p===this.userId&&r.isPrefixOf(S)?S.length===s&&(a=a.add(y)):f.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(or(e).get(i).next(o=>{if(o===null)throw H();Q(o.userId===this.userId),r.push(rs(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return nE(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Js(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const u=mn(i[1]);s.push(u)}else a.done()}).next(()=>{Q(s.length===0)})})}containsKey(e,n){return rE(e,this.userId,n)}Nn(e){return sE(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rE(t,e,n){const r=Zl(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Js(t).J({range:i,H:!0},(a,u,d)=>{const[f,p,m]=a;f===e&&p===s&&(o=!0),d.done()}).next(()=>o)}function or(t){return Qe(t,"mutations")}function Js(t){return Qe(t,"documentMutations")}function sE(t){return Qe(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Rs(0)}static kn(){return new Rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Rs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>X.fromTimestamp(new ke(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ws(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Ws(e).J((o,a)=>{const u=Co(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Ws(e).J((r,s)=>{const i=Co(s);n(i)})}qn(e){return Yv(e).get("targetGlobalKey").next(n=>(Q(n!==null),n))}Qn(e,n){return Yv(e).put("targetGlobalKey",n)}Kn(e,n){return Ws(e).put(JI(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ss(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Ws(e).J({range:s,index:"queryTargetsIndex"},(o,a,u)=>{const d=Co(a);Ma(n,d.target)&&(i=d,u.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=mr(e);return n.forEach(o=>{const a=xt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=mr(e);return V.forEach(n,i=>{const o=xt(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=mr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=mr(e);let i=ne();return s.J({range:r,H:!0},(o,a,u)=>{const d=mn(o[1]),f=new q(d);i=i.add(f)}).next(()=>i)}containsKey(e,n){const r=xt(n.path),s=IDBKeyRange.bound([r],[nI(r)],!1,!0);let i=0;return mr(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],u,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}ot(e,n){return Ws(e).get(n).next(r=>r?Co(r):null)}}function Ws(t){return Qe(t,"targets")}function Yv(t){return Qe(t,"targetGlobal")}function mr(t){return Qe(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv([t,e],[n,r]){const s=ee(t,n);return s===0?ee(e,r):s}class E1{constructor(e){this.Un=e,this.buffer=new pe(Jv),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class b1{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qr(n)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Vs(n)}await this.Hn(3e5)})}}class T1{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Gt.oe);const r=new E1(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Xv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xv):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Hs()<=ie.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function S1(t,e){return new T1(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.db=e,this.garbageCollector=S1(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Pl(e,r)}removeReference(e,n,r){return Pl(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Pl(e,n)}nr(e,n){return function(s,i){let o=!1;return sE(s).Y(a=>rE(s,a,i).next(u=>(u&&(o=!0),V.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const u=this.nr(e,o).next(d=>{if(!d)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,X.min()),mr(e).delete(function(p){return[0,xt(p.path)]}(o))))});s.push(u)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Pl(e,n)}tr(e,n){const r=mr(e);let s,i=Gt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{o===0?(i!==Gt.oe&&n(new q(mn(s)),i),i=d,s=u):i=Gt.oe}).next(()=>{i!==Gt.oe&&n(new q(mn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pl(t,e){return mr(t).put(function(r,s){return{targetId:0,path:xt(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.changes=new Kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Oe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Yr(e).put(r)}removeEntry(e,n,r){return Yr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ku(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Oe.newInvalidDocument(n);return Yr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_o(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Oe.newInvalidDocument(n)};return Yr(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_o(n))},(s,i)=>{r={document:this.ir(n,i),size:Wu(i)}}).next(()=>r)}getEntries(e,n){let r=Ot();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Ot(),s=new Se(q.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,Wu(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return V.resolve();let s=new pe(t_);n.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(_o(s.first()),_o(s.last())),o=s.getIterator();let a=o.getNext();return Yr(e).J({index:"documentKeyIndex",range:i},(u,d,f)=>{const p=q.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&t_(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.$(_o(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ku(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yr(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let f=Ot();for(const p of d){const m=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Ua(n,m)||s.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,n,r,s){let i=Ot();const o=e_(n,r),a=e_(n,Ft.max());return Yr(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const p=this.ir(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(p.key,p),i.size===s&&f.done()}).next(()=>i)}newChangeBuffer(e){return new R1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Zv(e).get("remoteDocumentGlobalKey").next(n=>(Q(!!n),n))}rr(e,n){return Zv(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=h1(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return Oe.newInvalidDocument(e)}}function oE(t){return new A1(t)}class R1 extends iE{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Kr(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new pe((i,o)=>ee(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const u=Fv(this.cr.serializer,o);s=s.add(i.path.popLast());const d=Wu(u);r+=d-a.size,n.push(this.cr.addEntry(e,i,u))}else if(r-=a.size,this.trackRemovals){const u=Fv(this.cr.serializer,o.convertToNoDocument(X.min()));n.push(this.cr.addEntry(e,i,u))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Zv(t){return Qe(t,"remoteDocumentGlobal")}function Yr(t){return Qe(t,"remoteDocumentsV14")}function _o(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function e_(t,e){const n=e.documentKey.path.toArray();return[t,Ku(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function t_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ee(n[i],r[i]),s)return s;return s=ee(n.length,r.length),s||(s=ee(n[n.length-2],r[r.length-2]),s||ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Go(r.mutation,s,Rt.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=gn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ao();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ot();const o=Ko(),a=function(){return Ko()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Zn)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Go(f.mutation,d,f.mutation.getFieldMask(),ke.now())):o.set(d.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return a.set(d,new C1(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ko();let s=new Se((o,a)=>o-a),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Rt.empty();f=a.applyToLocalView(d,f),r.set(u,f);const p=(s.get(a.batchId)||ne()).add(u);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,p=AI();f.forEach(m=>{if(!i.has(m)){const y=jI(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(gn());let a=-1,u=i;return o.next(d=>V.forEach(d,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(f)?V.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ne())).next(f=>({batchId:a,changes:NI(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=Ao();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ao();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,u=>{const d=function(p,m){return new Fa(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Oe.newInvalidDocument(f)))});let a=Ao();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Go(f.mutation,d,Rt.empty(),ke.now()),Ua(n,d)&&(a=a.insert(u,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wt(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ZI(s.bundledQuery),readTime:wt(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.overlays=new Se(q.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gn();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=gn(),i=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Se((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=gn(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=gn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=s)););return V.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $p(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.Tr=new pe(Xe.Er),this.dr=new pe(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new de([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new de([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ee(e.wr,n.wr)}static Ar(e,n){return ee(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pe(Xe.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Bp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Xe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pe(ee);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new q(i),0);let a=new pe(ee);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(u.wr)),!0)},o),V.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Q(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xe(n,0),s=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.Mr=e,this.docs=function(){return new Se(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Oe.newInvalidDocument(n))}getEntries(e,n){let r=Ot();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Oe.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ot();const o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||jp(rI(f),r)<=0||(s.has(f.key)||Ua(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){H()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new O1(this)}getSize(e){return V.resolve(this.size)}}class O1 extends iE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.persistence=e,this.Nr=new Kr(n=>Ss(n),Ma),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hp,this.targetCount=0,this.kr=Rs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Rs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gt(0),this.Kr=!1,this.Kr=!0,this.$r=new D1,this.referenceDelegate=e(this),this.Ur=new L1(this),this.indexManager=new x1,this.remoteDocumentCache=function(s){return new V1(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YI(n),this.Gr=new P1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new k1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new j1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);const s=new M1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class M1 extends iI{constructor(e){super(),this.currentSequenceNumber=e}}class Dc{constructor(e){this.persistence=e,this.Jr=new Hp,this.Yr=null}static Zr(e){return new Dc(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const s=q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.serializer=e}O(e,n,r,s){const i=new Ic("createOrUpgrade",n);r<1&&s>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mv,{unique:!0}),u.createObjectStore("documentMutations")}(e),n_(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),n_(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mv,{unique:!0});const p=d.store("mutations"),m=f.map(y=>p.put(y));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(u){const d=u.createObjectStore("documentOverlays",{keyPath:fk});d.createIndex("collectionPathOverlayIndex",pk,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",mk,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:nk});d.createIndex("documentKeyIndex",rk),d.createIndex("collectionGroupIndex",sk)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:uk}).createIndex("sequenceNumberIndex",ck,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:dk}).createIndex("documentKeyIndex",hk,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=Wu(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>V.forEach(a,u=>{Q(u.userId===i.userId);const d=rs(this.serializer,u);return nE(e,i.userId,d).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const u=new de(o),d=function(p){return[0,xt(p)]}(u);i.push(n.get(d).next(f=>f?V.resolve():(p=>n.put({targetId:0,path:xt(p),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>V.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:lk});const r=n.store("collectionParents"),s=new Wp,i=o=>{if(s.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:xt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new de(o);return i(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],d)=>{const f=mn(a);return i(f.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Co(s),o=JI(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),u=function(p){return p.document?new q(de.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):H()}(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(d))}).next(()=>V.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=oE(this.serializer),i=new lE(Dc.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=(d=a.get(u.userId))!==null&&d!==void 0?d:ne();rs(this.serializer,u).keys().forEach(p=>f=f.add(p)),a.set(u.userId,f)}),V.forEach(a,(u,d)=>{const f=new tt(d),p=Pc.lt(this.serializer,f),m=i.getIndexManager(f),y=kc.lt(f,this.serializer,m,i.referenceDelegate);return new aE(s,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new nf(n,Gt.oe),u).next()})})}}function n_(t){t.createObjectStore("targetDocuments",{keyPath:ok}).createIndex("documentTargetsIndex",ak,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ik,{unique:!0}),t.createObjectStore("targetGlobal")}const Kd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qp{constructor(e,n,r,s,i,o,a,u,d,f,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=d,this.li=f,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!Qp.D())throw new $(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N1(this,s),this.Ai=n+"main",this.serializer=new YI(u),this.Ri=new Cr(this.Ai,this.hi,new F1(this.serializer)),this.$r=new p1,this.Ur=new I1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oE(this.serializer),this.Gr=new f1,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(F.FAILED_PRECONDITION,Kd);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Gt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(qr(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return xo(e).get("owner").next(n=>V.resolve(this.vi(n)))}Ci(e){return kl(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Qe(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?V.resolve(!0):xo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new $(F.FAILED_PRECONDITION,Kd);return!1}}return!(!this.networkEnabled||!this.inForeground)||kl(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&U("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new nf(e,Gt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>kl(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return kc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new w1(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Pc.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(u){return u===17?vk:u===16?yk:u===15?Op:u===14?cI:u===13?uI:u===12?gk:u===11?lI:void H()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new nf(a,this.Qr?this.Qr.next():Gt.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new $(F.FAILED_PRECONDITION,sI);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return xo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new $(F.FAILED_PRECONDITION,Kd)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xo(e).put("owner",n)}static D(){return Cr.D()}bi(e){const n=xo(e);return n.get("owner").next(r=>this.vi(r)?(U("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;lw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xo(t){return Qe(t,"owner")}function kl(t){return Qe(t,"clientMetadata")}function U1(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lw()?8:oI(We())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new B1;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Hs()<=ie.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Hs()<=ie.DEBUG&&U("QueryEngine","Query:",Qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Hs()<=ie.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(n))):V.resolve())}Yi(e,n){if(Av(n))return V.resolve(null);let r=Ht(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=cf(n,null,"F"),r=Ht(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,a);return this.ns(n,d,o,u.readTime)?this.Yi(e,cf(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Av(n)||s.isEqual(X.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?V.resolve(null):(Hs()<=ie.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qs(n)),this.rs(e,o,n,HP(s,-1)).next(a=>a))})}ts(e,n){let r=new pe(TI(e));return n.forEach((s,i)=>{Ua(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Hs()<=ie.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ft.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Se(ee),this._s=new Kr(i=>Ss(i),Ma),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cE(t,e,n,r){return new z1(t,e,n,r)}async function dE(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ne();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}function $1(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const p=d.batch,m=p.keys();let y=V.resolve();return m.forEach(S=>{y=y.next(()=>f.getEntry(u,S)).next(N=>{const E=d.docVersions.get(S);Q(E!==null),N.version.compareTo(E)<0&&(p.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ne();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hE(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function q1(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ze.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),s=s.insert(p,y),function(N,E,_){return N.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,y,f)&&a.push(n.Ur.updateTargetData(i,y))});let u=Ot(),d=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(K1(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function K1(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ot();return n.forEach((a,u)=>{const d=i.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function G1(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W1(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function vf(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!qr(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function r_(t,e,n){const r=Z(t);let s=X.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=Z(u),m=p._s.get(f);return m!==void 0?V.resolve(p.os.get(m)):p.Ur.getTargetData(d,f)}(r,o,Ht(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:ne())).next(a=>(H1(r,Dk(e),a),{documents:a,Ts:i})))}function H1(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class s_{constructor(){this.activeTargetIds=Fk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fE{constructor(){this.so=new s_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new s_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl=null;function Gd(){return Dl===null?Dl=function(){return 268435456+Math.round(2147483648*Math.random())}():Dl++,"0x"+Dl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class J1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Gd(),u=this.xo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(U("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw Es("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=X1[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Gd();return new Promise((o,a)=>{const u=new Qw;u.setWithCredentials(!0),u.listenOnce(Xw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yl.NO_ERROR:const f=u.getResponseJson();U(ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Yl.TIMEOUT:U(ct,`RPC '${e}' ${i} timed out`),a(new $(F.DEADLINE_EXCEEDED,"Request time out"));break;case Yl.HTTP_ERROR:const p=u.getStatus();if(U(ct,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const S=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(y.status);a(new $(S,y.message))}else a(new $(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(F.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{U(ct,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);U(ct,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Gd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zw(),a=Jw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");U(ct,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let m=!1,y=!1;const S=new Y1({Io:E=>{y?U(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(U(ct,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),U(ct,`RPC '${e}' stream ${s} sending:`,E),p.send(E))},To:()=>p.close()}),N=(E,_,w)=>{E.listen(_,b=>{try{w(b)}catch(O){setTimeout(()=>{throw O},0)}})};return N(p,No.EventType.OPEN,()=>{y||(U(ct,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),N(p,No.EventType.CLOSE,()=>{y||(y=!0,U(ct,`RPC '${e}' stream ${s} transport closed`),S.So())}),N(p,No.EventType.ERROR,E=>{y||(y=!0,Es(ct,`RPC '${e}' stream ${s} transport errored:`,E),S.So(new $(F.UNAVAILABLE,"The operation could not be completed")))}),N(p,No.EventType.MESSAGE,E=>{var _;if(!y){const w=E.data[0];Q(!!w);const b=w,O=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(O){U(ct,`RPC '${e}' stream ${s} received error:`,O);const M=O.status;let P=function(T){const A=Fe[T];if(A!==void 0)return LI(A)}(M),I=O.message;P===void 0&&(P=F.INTERNAL,I="Unknown error status: "+M+" with message "+O.message),y=!0,S.So(new $(P,I)),p.close()}else U(ct,`RPC '${e}' stream ${s} received:`,w),S.bo(w)}}),N(a,Yw.STAT_EVENT,E=>{E.stat===ef.PROXY?U(ct,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===ef.NOPROXY&&U(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return typeof window<"u"?window:null}function su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){return new n1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&U("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eD extends mE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=i1(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?wt(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ff(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Bu(u)?{documents:KI(i,u)}:{query:GI(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UI(i,o.resumeToken);const d=df(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Vi(i,o.snapshotVersion.toTimestamp());const d=df(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=a1(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ff(this.serializer),n.removeTarget=e,this.a_(n)}}class tD extends mE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=o1(e.writeResults,e.commitTime),r=wt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ff(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qu(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,hf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,hf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yt(n),this.D_=!1):U("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ls(this)&&(U("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Z(u);d.L_.add(4),await za(d),d.q_.set("Unknown"),d.L_.delete(4),await Vc(d)}(this))})}),this.q_=new rD(r,s)}}async function Vc(t){if(Ls(t))for(const e of t.B_)await e(!0)}async function za(t){for(const e of t.B_)await e(!1)}function gE(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),em(n)?Zp(n):Ki(n).r_()&&Jp(n,e))}function Yp(t,e){const n=Z(t),r=Ki(n);n.N_.delete(e),r.r_()&&yE(n,e),n.N_.size===0&&(r.r_()?r.o_():Ls(n)&&n.q_.set("Unknown"))}function Jp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).A_(e)}function yE(t,e){t.Q_.xe(e),Ki(t).R_(e)}function Zp(t){t.Q_=new Jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.q_.v_()}function em(t){return Ls(t)&&!Ki(t).n_()&&t.N_.size>0}function Ls(t){return Z(t).L_.size===0}function vE(t){t.Q_=void 0}async function iD(t){t.q_.set("Online")}async function oD(t){t.N_.forEach((e,n)=>{Jp(t,e)})}async function aD(t,e){vE(t),em(t)?(t.q_.M_(e),Zp(t)):t.q_.set("Unknown")}async function lD(t,e,n){if(t.q_.set("Online"),e instanceof FI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hu(t,r)}else if(e instanceof ru?t.Q_.Ke(e):e instanceof MI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await hE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(ze.EMPTY_BYTE_STRING,f.snapshotVersion)),yE(i,u);const p=new zn(f.target,u,d,f.sequenceNumber);Jp(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){U("RemoteStore","Failed to raise snapshot:",r),await Hu(t,r)}}async function Hu(t,e,n){if(!qr(e))throw e;t.L_.add(1),await za(t),t.q_.set("Offline"),n||(n=()=>hE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vc(t)})}function _E(t,e){return e().catch(n=>Hu(t,n,e))}async function $a(t){const e=Z(t),n=Lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uD(e);)try{const s=await G1(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,cD(e,s)}catch(s){await Hu(e,s)}xE(e)&&wE(e)}function uD(t){return Ls(t)&&t.O_.length<10}function cD(t,e){t.O_.push(e);const n=Lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xE(t){return Ls(t)&&!Lr(t).n_()&&t.O_.length>0}function wE(t){Lr(t).start()}async function dD(t){Lr(t).p_()}async function hD(t){const e=Lr(t);for(const n of t.O_)e.m_(n.mutations)}async function fD(t,e,n){const r=t.O_.shift(),s=zp.from(r,e,n);await _E(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $a(t)}async function pD(t,e){e&&Lr(t).V_&&await async function(r,s){if(function(o){return Qk(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Lr(r).s_(),await _E(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $a(r)}}(t,e),xE(t)&&wE(t)}async function o_(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const r=Ls(n);n.L_.add(3),await za(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vc(n)}async function mD(t,e){const n=Z(t);e?(n.L_.delete(2),await Vc(n)):e||(n.L_.add(2),await za(n),n.q_.set("Unknown"))}function Ki(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new eD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:iD.bind(null,t),Ro:oD.bind(null,t),mo:aD.bind(null,t),d_:lD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),em(t)?Zp(t):t.q_.set("Unknown")):(await t.K_.stop(),vE(t))})),t.K_}function Lr(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new tD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dD.bind(null,t),mo:pD.bind(null,t),f_:hD.bind(null,t),g_:fD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $a(t)):(await t.U_.stop(),t.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new tm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nm(t,e){if(yt("AsyncQueue",`${e}: ${t}`),qr(t))return new $(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Ao(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new wi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.W_=new Se(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oi{constructor(e,n,r,s,i,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oi(e,n,wi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yD{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=l_(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new $(F.ABORTED,"Firestore shutting down"))}}function l_(){return new Kr(t=>bI(t),Sc)}async function IE(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new gD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=nm(o,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&rm(n)}async function EE(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vD(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&rm(n)}function _D(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function rm(t){t.Y_.forEach(e=>{e.next()})}var _f,u_;(u_=_f||(_f={})).ea="default",u_.Cache="cache";class bE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_f.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.key=e}}class SE{constructor(e){this.key=e}}class xD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=TI(e),this.Ra=new wi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new a_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const m=s.get(f),y=Ua(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?S!==N&&(r.track({type:3,doc:y}),E=!0):this.ga(m,y)||(r.track({type:2,doc:y}),E=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(u||d)&&(a=!0)),E&&(y?(o=o.add(y),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(y,S){const N=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return N(y)-N(S)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Oi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new a_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new SE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new TE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ID{constructor(e){this.key=e,this.va=!1}}class ED{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Kr(a=>bI(a),Sc),this.Ma=new Map,this.xa=new Set,this.Oa=new Se(q.comparator),this.Na=new Map,this.La=new Hp,this.Ba={},this.ka=new Map,this.qa=Rs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function bD(t,e,n=!0){const r=kE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await NE(r,e,n,!0),s}async function TD(t,e){const n=kE(t);await NE(n,e,!0,!1)}async function NE(t,e,n,r){const s=await W1(t.localStore,Ht(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await SD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&gE(t.remoteStore,s),a}async function SD(t,e,n,r,s){t.Ka=(p,m,y)=>async function(N,E,_,w){let b=E.view.ma(_);b.ns&&(b=await r_(N.localStore,E.query,!1).then(({documents:I})=>E.view.ma(I,b)));const O=w&&w.targetChanges.get(E.targetId),M=w&&w.targetMismatches.get(E.targetId)!=null,P=E.view.applyChanges(b,N.isPrimaryClient,O,M);return d_(N,E.targetId,P.wa),P.snapshot}(t,p,m,y);const i=await r_(t.localStore,e,!0),o=new xD(e,i.Ts),a=o.ma(i.documents),u=Ba.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,u);d_(t,n,d.wa);const f=new wD(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function ND(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Sc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Yp(r.remoteStore,s.targetId),xf(r,s.targetId)}).catch(Vs)):(xf(r,s.targetId),await vf(r.localStore,s.targetId,!0))}async function AD(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yp(n.remoteStore,r.targetId))}async function RD(t,e,n){const r=DE(t);try{const s=await function(o,a){const u=Z(o),d=ke.now(),f=a.reduce((y,S)=>y.add(S.key),ne());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Ot(),N=ne();return u.cs.getEntries(y,f).next(E=>{S=E,S.forEach((_,w)=>{w.isValidDocument()||(N=N.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(E=>{p=E;const _=[];for(const w of a){const b=Wk(w,p.get(w.key).overlayedDocument);b!=null&&_.push(new Zn(w.key,b,mI(b.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,_,a)}).next(E=>{m=E;const _=E.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,E.batchId,_)})}).then(()=>({batchId:m.batchId,changes:NI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Se(ee)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await qa(r,s.changes),await $a(r.remoteStore)}catch(s){const i=nm(s,"Failed to persist write");n.reject(i)}}async function AE(t,e){const n=Z(t);try{const r=await q1(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Q(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Q(o.va):s.removedDocuments.size>0&&(Q(o.va),o.va=!1))}),await qa(n,r,e)}catch(r){await Vs(r)}}function c_(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=Z(o);u.onlineState=a;let d=!1;u.queries.forEach((f,p)=>{for(const m of p.j_)m.Z_(a)&&(d=!0)}),d&&rm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CD(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Se(q.comparator);o=o.insert(i,Oe.newNoDocument(i,X.min()));const a=ne().add(i),u=new Cc(X.min(),new Map,new Se(ee),o,a);await AE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),sm(r)}else await vf(r.localStore,e,!1).then(()=>xf(r,e,n)).catch(Vs)}async function PD(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await $1(n.localStore,e);CE(n,r,null),RE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qa(n,s)}catch(s){await Vs(s)}}async function kD(t,e,n){const r=Z(t);try{const s=await function(o,a){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(p=>(Q(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);CE(r,e,n),RE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qa(r,s)}catch(s){await Vs(s)}}function RE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function CE(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PE(t,r)})}function PE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Yp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sm(t))}function d_(t,e,n){for(const r of n)r instanceof TE?(t.La.addReference(r.key,e),DD(t,r)):r instanceof SE?(U("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PE(t,r.key)):H()}function DD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.xa.add(r),sm(t))}function sm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(de.fromString(e)),r=t.qa.next();t.Na.set(r,new ID(n)),t.Oa=t.Oa.insert(n,r),gE(t.remoteStore,new zn(Ht(Tc(n.path)),r,"TargetPurposeLimboResolution",Gt.oe))}}async function qa(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Xp.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=Z(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(d,m=>V.forEach(m.$i,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>V.forEach(m.Ui,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!qr(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const y=f.os.get(m),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(m,N)}}}(r.localStore,i))}async function jD(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const r=await dE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qa(n,r.hs)}}function VD(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function kE(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CD.bind(null,e),e.Ca.d_=vD.bind(null,e.eventManager),e.Ca.$a=_D.bind(null,e.eventManager),e}function DE(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kD.bind(null,e),e}class ba{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cE(this.persistence,new uE,e.initialUser,this.serializer)}Ga(e){return new lE(Dc.Zr,this.serializer)}Wa(e){return new fE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ba.provider={build:()=>new ba};class OD extends ba{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await DE(this.Ja.syncEngine),await $a(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return cE(this.persistence,new uE,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new b1(r,e.asyncQueue,n)}Ha(e,n){const r=new JP(n,this.persistence);return new YP(e.asyncQueue,r)}Ga(e){const n=U1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?St.withCacheSize(this.cacheSizeBytes):St.DEFAULT;return new Qp(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Z1(),su(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new fE}}class Qu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jD.bind(null,this.syncEngine),await mD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yD}()}createDatastore(e){const n=jc(e.databaseInfo.databaseId),r=function(i){return new J1(i)}(e.databaseInfo);return function(i,o,a,u){return new nD(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new sD(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>c_(this.syncEngine,n,0),function(){return i_.D()?new i_:new Q1}())}createSyncEngine(e,n){return function(s,i,o,a,u,d,f){const p=new ED(s,i,o,a,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);U("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await za(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qu.provider={build:()=>new Qu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tt.UNAUTHENTICATED,this.clientId=tI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{U("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wd(t,e){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function h_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await MD(t);U("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>o_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>o_(e.remoteStore,s)),t._onlineComponents=e}async function MD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),await Wd(t,new ba)}}else U("FirestoreClient","Using default OfflineComponentProvider"),await Wd(t,new ba);return t._offlineComponents}async function VE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),await h_(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),await h_(t,new Qu))),t._onlineComponents}function FD(t){return VE(t).then(e=>e.syncEngine)}async function OE(t){const e=await VE(t),n=e.eventManager;return n.onListen=bD.bind(null,e.syncEngine),n.onUnlisten=ND.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AD.bind(null,e.syncEngine),n}function UD(t,e,n={}){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const f=new jE({next:m=>{f.Za(),o.enqueueAndForget(()=>EE(i,p));const y=m.docs.has(a);!y&&m.fromCache?d.reject(new $(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?d.reject(new $(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new bE(Tc(a.path),f,{includeMetadataChanges:!0,_a:!0});return IE(i,p)}(await OE(t),t.asyncQueue,e,n,r)),r.promise}function BD(t,e,n={}){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,d){const f=new jE({next:m=>{f.Za(),o.enqueueAndForget(()=>EE(i,p)),m.fromCache&&u.source==="server"?d.reject(new $(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new bE(a,f,{includeMetadataChanges:!0,_a:!0});return IE(i,p)}(await OE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e,n){if(!n)throw new $(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zD(t,e,n,r){if(e===!0&&r===!0)throw new $(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p_(t){if(!q.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m_(t){if(q.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Oc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oc(t);throw new $(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FP;switch(r.type){case"firstParty":return new $P(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f_.get(n);r&&(U("ComponentProvider","Removing Datastore"),f_.delete(n),r.terminate())}(this),Promise.resolve()}}function $D(t,e,n,r={}){var s;const i=(t=un(t,Lc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=tt.MOCK_USER;else{a=aw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(d)}t._authCredentials=new UP(new eI(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class Pr extends Gi{constructor(e,n,r){super(e,n,Tc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new q(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function ce(t,e,...n){if(t=He(t),ME("collection","path",e),t instanceof Lc){const r=de.fromString(e,...n);return m_(r),new Pr(t,null,r)}{if(!(t instanceof It||t instanceof Pr))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return m_(r),new Pr(t.firestore,null,r)}}function re(t,e,...n){if(t=He(t),arguments.length===1&&(e=tI.newId()),ME("doc","path",e),t instanceof Lc){const r=de.fromString(e,...n);return p_(r),new It(t,null,new q(r))}{if(!(t instanceof It||t instanceof Pr))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return p_(r),new It(t.firestore,t instanceof Pr?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pE(this,"async_queue_retry"),this.Vu=()=>{const r=su();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new In;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qr(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=tm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&H()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ms extends Lc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new y_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function qD(t,e){const n=typeof t=="object"?t:wp(),r=typeof t=="string"?t:"(default)",s=yc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=sw("firestore");i&&$D(s,...i)}return s}function im(t){if(t._terminated)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FE(t),t._firestoreClient}function FE(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,d,f){return new xk(a,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,LE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new LD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}function KD(t,e){Es("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return GD(t,Qu.provider,{build:r=>new OD(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function GD(t,e,n){if((t=un(t,Ms))._firestoreClient||t._terminated)throw new $(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new $(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},FE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(ze.fromBase64String(e))}catch(n){throw new $(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Li(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^__.*__$/;class HD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new qi(e,this.data,n,this.fieldTransforms)}}class UE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class um{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BE(this.Cu)&&WD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jc(e)}Qu(e,n,r,s=!1){return new um({Cu:e,methodName:n,qu:r,path:Ce.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(t){const e=t._freezeSettings(),n=jc(t._databaseId);return new QD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XD(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);dm("Data must be an object, but it was:",o,r);const a=zE(r,o);let u,d;if(i.merge)u=new Rt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=wf(e,p,n);if(!o.contains(m))throw new $(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qE(f,m)||f.push(m)}u=new Rt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new HD(new ht(a),u,d)}class Fc extends om{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fc}}function YD(t,e,n,r){const s=t.Qu(1,e,n);dm("Data must be an object, but it was:",s,r);const i=[],o=ht.empty();Os(r,(u,d)=>{const f=hm(e,u,n);d=He(d);const p=s.Nu(f);if(d instanceof Fc)i.push(f);else{const m=Ka(d,p);m!=null&&(i.push(f),o.set(f,m))}});const a=new Rt(i);return new UE(o,a,s.fieldTransforms)}function JD(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[wf(e,r,n)],u=[s];if(i.length%2!=0)throw new $(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(wf(e,i[m])),u.push(i[m+1]);const d=[],f=ht.empty();for(let m=a.length-1;m>=0;--m)if(!qE(d,a[m])){const y=a[m];let S=u[m];S=He(S);const N=o.Nu(y);if(S instanceof Fc)d.push(y);else{const E=Ka(S,N);E!=null&&(d.push(y),f.set(y,E))}}const p=new Rt(d);return new UE(f,p,o.fieldTransforms)}function ZD(t,e,n,r=!1){return Ka(n,t.Qu(r?4:3,e))}function Ka(t,e){if($E(t=He(t)))return dm("Unsupported field value:",e,t),zE(t,e);if(t instanceof om)return function(r,s){if(!BE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=Ka(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:Vi(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vi(s.serializer,i)}}if(r instanceof am)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:UI(s.serializer,r._byteString)};if(r instanceof It){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof lm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Up(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Oc(r)}`)}(t,e)}function zE(t,e){const n={};return dI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(r,s)=>{const i=Ka(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $E(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof am||t instanceof Li||t instanceof It||t instanceof om||t instanceof lm)}function dm(t,e,n){if(!$E(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Oc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function wf(t,e,n){if((e=He(e))instanceof Mc)return e._internalPath;if(typeof e=="string")return hm(t,e);throw Xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const ej=new RegExp("[~\\*/\\[\\]]");function hm(t,e,n){if(e.search(ej)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mc(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(F.INVALID_ARGUMENT,a+t+u)}function qE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tj extends KE{data(){return super.data()}}function fm(t,e){return typeof e=="string"?hm(t,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class rj extends pm{}function ye(t,e,...n){let r=[];e instanceof pm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof mm).length,a=i.filter(u=>u instanceof Uc).length;if(o>1||o>0&&a>0)throw new $(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Uc extends rj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uc(e,n,r)}_apply(e){const n=this._parse(e);return GE(e._query,n),new Gi(e.firestore,e.converter,uf(e._query,n))}_parse(e){const n=cm(e.firestore);return function(i,o,a,u,d,f,p){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){__(p,f);const y=[];for(const S of p)y.push(v_(u,i,S));m={arrayValue:{values:y}}}else m=v_(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||__(p,f),m=ZD(a,o,p,f==="in"||f==="not-in");return oe.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qt(t,e,n){const r=e,s=fm("where",t);return Uc._create(s,r,n)}class mm extends pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:he.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)GE(o,u),o=uf(o,u)}(e._query,n),new Gi(e.firestore,e.converter,uf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function v_(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new $(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EI(e)&&n.indexOf("/")!==-1)throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(de.fromString(n));if(!q.isDocumentKey(r))throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xa(t,new q(r))}if(n instanceof It)return xa(t,n._key);throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oc(n)}.`)}function __(t,e){if(!Array.isArray(t)||t.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GE(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sj{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Os(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ee(o.doubleValue));return new lm(i)}convertGeoPoint(e){return new am(Ee(e.latitude),Ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(va(e));default:return null}}convertTimestamp(e){const n=Yn(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);Q(XI(r));const s=new bs(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||yt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WE extends KE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iu extends WE{data(e={}){return super.data(e)}}class oj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Po(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new Po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Po(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Po(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:aj(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){t=un(t,It);const e=un(t.firestore,Ms);return UD(im(e),t._key).then(n=>lj(e,t,n))}class HE extends sj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function Te(t){t=un(t,Gi);const e=un(t.firestore,Ms),n=im(e),r=new HE(e);return nj(t._query),BD(n,t._query).then(s=>new oj(e,r,t,s))}function Et(t,e,n){t=un(t,It);const r=un(t.firestore,Ms),s=ij(t.converter,e);return ym(r,[XD(cm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,vt.none())])}function gm(t,e,n,...r){t=un(t,It);const s=un(t.firestore,Ms),i=cm(s);let o;return o=typeof(e=He(e))=="string"||e instanceof Mc?JD(i,"updateDoc",t._key,e,n,r):YD(i,"updateDoc",t._key,e),ym(s,[o.toMutation(t._key,vt.exists(!0))])}function cn(t){return ym(un(t.firestore,Ms),[new Rc(t._key,vt.none())])}function ym(t,e){return function(r,s){const i=new In;return r.asyncQueue.enqueueAndForget(async()=>RD(await FD(r),s,i)),i.promise}(im(t),e)}function lj(t,e,n){const r=n.docs.get(e._key),s=new HE(t);return new WE(t,s,e._key,r,new Po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){$i=s})(Ds),_s(new jr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ms(new BP(r.getProvider("auth-internal")),new KP(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bs(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),_n(hv,"4.7.3",e),_n(hv,"4.7.3","esm2017")})();var uj="firebase",cj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(uj,cj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebasestorage.googleapis.com",dj="storageBucket",hj=2*60*1e3,fj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Tn{constructor(e,n,r=0){super(Hd(e),`Firebase Storage: ${n} (${Hd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bn||(bn={}));function Hd(t){return"storage/"+t}function pj(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(bn.UNKNOWN,t)}function mj(){return new Sn(bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gj(){return new Sn(bn.CANCELED,"User canceled the upload/download.")}function yj(t){return new Sn(bn.INVALID_URL,"Invalid URL '"+t+"'.")}function vj(t){return new Sn(bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function x_(t){return new Sn(bn.INVALID_ARGUMENT,t)}function XE(){return new Sn(bn.APP_DELETED,"The Firebase app was deleted.")}function _j(t){return new Sn(bn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=rn.makeFromUrl(e,n)}catch{return new rn(e,"")}if(r.path==="")return r;throw vj(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(O){O.path_=decodeURIComponent(O.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${s}/o${m}`,"i"),S={bucket:1,path:3},N=n===QE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",_=new RegExp(`^https?://${N}/${s}/${E}`,"i"),b=[{regex:a,indices:u,postModify:i},{regex:y,indices:S,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let O=0;O<b.length;O++){const M=b[O],P=M.regex.exec(e);if(P){const I=P[M.indices.bucket];let x=P[M.indices.path];x||(x=""),r=new rn(I,x),M.postModify(r);break}}if(r==null)throw yj(e);return r}}class xj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let d=!1;function f(...E){d||(d=!0,e.apply(null,E))}function p(E){s=setTimeout(()=>{s=null,t(y,u())},E)}function m(){i&&clearTimeout(i)}function y(E,..._){if(d){m();return}if(E){m(),f.call(null,E,..._);return}if(u()||o){m(),f.call(null,E,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,p(b)}let S=!1;function N(E){S||(S=!0,m(),!d&&(s!==null?(E||(a=2),clearTimeout(s),p(0)):E||(a=1)))}return p(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function Ij(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){return t!==void 0}function w_(t,e,n,r){if(r<e)throw x_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw x_(`Invalid value for '${t}'. Expected ${n} or less.`)}function bj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Yu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yu||(Yu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n,r,s,i,o,a,u,d,f,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,S)=>{this.resolve_=y,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new jl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Yu.NO_ERROR,u=i.getStatus();if(!a||Tj(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Yu.ABORT;r(!1,new jl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new jl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Ej(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=pj();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?XE():gj();o(u)}else{const u=mj();o(u)}};this.canceled_?n(!1,new jl(!1,null,!0)):this.backoffId_=wj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ij(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Nj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Aj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Rj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Cj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Pj(t,e,n,r,s,i,o=!0){const a=bj(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return Rj(d,e),Nj(d,n),Aj(d,i),Cj(d,r),new Sj(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Dj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this._service=e,n instanceof rn?this._location=n:this._location=rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ju(e,n)}get root(){const e=new rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dj(this._location.path)}get storage(){return this._service}get parent(){const e=kj(this._location.path);if(e===null)return null;const n=new rn(this._location.bucket,e);return new Ju(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _j(e)}}function I_(t,e){const n=e==null?void 0:e[dj];return n==null?null:rn.makeFromBucketSpec(n,t)}function jj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:aw(s,t.app.options.projectId))}class Vj{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=QE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hj,this._maxUploadRetryTime=fj,this._requests=new Set,s!=null?this._bucket=rn.makeFromBucketSpec(s,this._host):this._bucket=I_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rn.makeFromBucketSpec(this._url,e):this._bucket=I_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ju(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new xj(XE());{const o=Pj(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const E_="@firebase/storage",b_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="storage";function Oj(t=wp(),e){t=He(t);const r=yc(t,YE).getImmediate({identifier:e}),s=sw("storage");return s&&Lj(r,...s),r}function Lj(t,e,n,r={}){jj(t,e,n,r)}function Mj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Vj(n,r,s,e,Ds)}function Fj(){_s(new jr(YE,Mj,"PUBLIC").setMultipleInstances(!0)),_n(E_,b_,""),_n(E_,b_,"esm2017")}Fj();const Uj={apiKey:"AIzaSyB0oPTLEYuNiWCx5s9GmZzGzyH1z-HXwb8",authDomain:"onlineadmission-f85c6.firebaseapp.com",projectId:"onlineadmission-f85c6",storageBucket:"onlineadmission-f85c6.firebasestorage.app",messagingSenderId:"996707362986",appId:"1:996707362986:web:fea98a07bea032ff7e48d3",measurementId:"G-6H910NXDM1"},vm=vc(Uj),W=qD(vm);Oj(vm);const ou=kp(vm);KD(W).catch(t=>{t.code=="failed-precondition"?console.log("Persistence failed: Multiple tabs open"):t.code=="unimplemented"&&console.log("Persistence not supported")});const JE=k.createContext(),Nn=()=>k.useContext(JE),Bj=({children:t})=>{const[e,n]=k.useState(null),[r,s]=k.useState(null),[i,o]=k.useState(!0),a=(f,p)=>EC(ou,f,p),u=()=>(s(null),NC(ou));k.useEffect(()=>SC(ou,async p=>{if(n(p),p)try{const m=re(W,"users",p.uid),y=await Cs(m);y.exists()?s(y.data().role):(console.log("No such document!"),s(null))}catch(m){console.error("Error fetching user role:",m)}else s(null);o(!1)}),[]);const d={currentUser:e,userRole:r,login:a,logout:u};return c.jsx(JE.Provider,{value:d,children:!i&&t})},$e="/assets/main-logo-1-e1724093314271-D__5ef5K.png",zj="/assets/432-scaled-BxfpgRWC.jpg",$j=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(""),[s,i]=k.useState(""),[o,a]=k.useState(!1),u=Ie(),{login:d}=Nn(),f=async p=>{p.preventDefault();try{i(""),a(!0),await d(t,n),u("/dashboard")}catch(m){i("Failed to sign in. Please check your credentials."),console.error(m)}a(!1)};return c.jsx("div",{className:"flex items-center justify-center min-h-screen",style:{backgroundImage:`url(${zj})`,backgroundSize:"cover",backgroundPosition:"center"},children:c.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white bg-opacity-95 rounded shadow-md",children:[c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-14 w-14 object-contain"}),c.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900",children:"Idara Misbah ul Quran Mangment System"})]}),s&&c.jsx("div",{className:"p-3 text-red-700 bg-red-100 rounded",children:s}),c.jsxs("form",{onSubmit:f,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),c.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:t,onChange:p=>e(p.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),c.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:n,onChange:p=>r(p.target.value)})]}),c.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-medium text-white bg-blue-600 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Signing in...":"Sign in"})]})]})})},qj="/assets/masjid-pic-scaled-1-1024x681-Dng6SsO7.jpg",Kj=()=>{const t=Ie(),[e,n]=k.useState({students:0,teachers:0,revenue:0});return k.useEffect(()=>{(async()=>{const s=await Te(ye(ce(W,"students"))),i=await Te(ye(ce(W,"teachers"))),o=await Te(ye(ce(W,"fees")));let a=0;o.docs.forEach(u=>{const d=u.data();d.status==="paid"&&(a+=Number(d.amount)||0)}),n({students:s.size,teachers:i.size,revenue:a})})()},[]),c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"rounded-lg overflow-hidden",style:{backgroundImage:`url(${qj})`,backgroundSize:"cover",backgroundPosition:"center"},children:c.jsx("div",{className:"bg-black bg-opacity-40",children:c.jsxs("div",{className:"p-6 flex items-center gap-4",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-12 w-12 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white text-2xl font-bold",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-white text-sm",children:"Admin Dashboard"})]})]})})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsx("aside",{className:"md:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:()=>t("/admin/add-student"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Student"}),c.jsx("button",{onClick:()=>t("/admin/students"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"View Students"}),c.jsx("button",{onClick:()=>t("/admin/add-teacher"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add Teacher"}),c.jsx("button",{onClick:()=>t("/admin/teachers"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"View Teachers"}),c.jsx("button",{onClick:()=>t("/admin/fees"),className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Manage Fees"}),c.jsx("button",{onClick:()=>t("/admin/timetable"),className:"px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800",children:"Manage Timetable"}),c.jsx("button",{onClick:()=>t("/admin/exams"),className:"px-4 py-2 bg-orange-700 text-white rounded hover:bg-orange-800",children:"Manage Exams"}),c.jsx("button",{onClick:()=>t("/admin/finance/income"),className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-800",children:"Income"}),c.jsx("button",{onClick:()=>t("/admin/finance/expense"),className:"px-4 py-2 bg-red-700 text-white rounded hover:bg-red-800",children:"Expense"}),c.jsx("button",{onClick:()=>t("/admin/finance/reports"),className:"px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800",children:"Finance Reports"}),c.jsx("button",{onClick:()=>t("/admin/backup"),className:"px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-800",children:"Backup & Restore"})]})]})}),c.jsx("section",{className:"md:col-span-3",children:c.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-blue-500 cursor-pointer hover:shadow-lg transition",onClick:()=>t("/admin/students"),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Total Students"}),c.jsx("p",{className:"text-3xl font-bold text-blue-600",children:e.students}),c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click to view list"})]}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-green-500 cursor-pointer hover:shadow-lg transition",onClick:()=>t("/admin/teachers"),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Total Teachers"}),c.jsx("p",{className:"text-3xl font-bold text-green-600",children:e.teachers})]}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-purple-500",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Total Revenue"}),c.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["PKR ",e.revenue.toLocaleString()]})]})]})})]})]})},Gj="/assets/IMG_0644-scaled-1-e1724219058522-DS0-wION.jpg",Wj=()=>{const t=Ie();return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"rounded-lg overflow-hidden",style:{backgroundImage:`url(${Gj})`,backgroundSize:"cover",backgroundPosition:"center"},children:c.jsx("div",{className:"bg-black bg-opacity-40",children:c.jsxs("div",{className:"p-6 flex items-center gap-4",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-12 w-12 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white text-2xl font-bold",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-white text-sm",children:"Teacher Dashboard"})]})]})})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsx("aside",{className:"md:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:()=>t("/teacher/attendance"),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Take Attendance"}),c.jsx("button",{onClick:()=>t("/teacher/grades"),className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Enter Grades"}),c.jsx("button",{onClick:()=>t("/teacher/timetable"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"My Timetable"})]})]})}),c.jsxs("section",{className:"md:col-span-3 grid grid-cols-1 gap-6 md:grid-cols-2",children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-indigo-500",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"My Classes"}),c.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:"5"})]}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-yellow-500",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Pending Grades"}),c.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"12"})]})]})]})]})},Hj="/assets/IMG_0943-scaled-1-1024x681-BQx08tQv.jpg",Qj=()=>{const t=Ie();return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"rounded-lg overflow-hidden",style:{backgroundImage:`url(${Hj})`,backgroundSize:"cover",backgroundPosition:"center"},children:c.jsx("div",{className:"bg-black bg-opacity-40",children:c.jsxs("div",{className:"p-6 flex items-center gap-4",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-12 w-12 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-white text-2xl font-bold",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-white text-sm",children:"Student Dashboard"})]})]})})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[c.jsx("aside",{className:"md:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:()=>t("/student/timetable"),className:"px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"View Timetable"}),c.jsx("button",{onClick:()=>t("/student/results"),className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",children:"My Results"}),c.jsx("button",{onClick:()=>t("/student/attendance"),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"My Attendance"})]})]})}),c.jsxs("section",{className:"md:col-span-3 grid grid-cols-1 gap-6 md:grid-cols-2",children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-teal-500",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Attendance"}),c.jsx("p",{className:"text-3xl font-bold text-teal-600",children:"95%"})]}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border-l-4 border-orange-500",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Next Exam"}),c.jsx("p",{className:"text-xl font-bold text-orange-600",children:"Math - Oct 12"})]})]})]})]})},Xj=()=>{const{userRole:t,logout:e}=Nn(),n=Ie(),r=async()=>{try{await e(),n("/")}catch(i){console.error("Failed to log out",i)}},s=()=>{switch(t){case"admin":return c.jsx(Kj,{});case"teacher":return c.jsx(Wj,{});case"student":return c.jsx(Qj,{});case"parent":return c.jsx("div",{className:"p-6 text-center",children:"Parent Dashboard Coming Soon"});default:return c.jsxs("div",{className:"p-6 text-center text-gray-500",children:["Loading Dashboard... (Role: ",t,")"]})}};return c.jsxs("div",{className:"min-h-screen bg-gray-100",children:[c.jsx("nav",{className:"bg-white shadow-sm",children:c.jsx("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between h-16",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain mr-3"}),c.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Idara Misbah ul Quran Mangment System"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsxs("span",{className:"mr-4 text-sm text-gray-600 capitalize",children:["Role: ",t]}),c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 focus:outline-none",children:"Logout"})]})]})})}),c.jsx("main",{className:"py-10",children:c.jsx("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:s()})})]})},Yj=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(""),[s,i]=k.useState(""),o=async a=>{a.preventDefault();try{const d=(await Rp(ou,t,n)).user;await Et(re(W,"users",d.uid),{email:d.email,role:"admin",createdAt:new Date}),i("Admin user created successfully! You can now login.")}catch(u){i(`Error: ${u.message}`)}};return c.jsx("div",{className:"p-8 bg-gray-100 min-h-screen flex justify-center items-center",children:c.jsxs("div",{className:"bg-white p-8 rounded shadow-md w-full max-w-md",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create First Admin"}),s&&c.jsx("p",{className:"mb-4 text-sm text-blue-600",children:s}),c.jsxs("form",{onSubmit:o,className:"space-y-4",children:[c.jsx("input",{type:"email",placeholder:"Admin Email",className:"w-full p-2 border rounded",value:t,onChange:a=>e(a.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"Password",className:"w-full p-2 border rounded",value:n,onChange:a=>r(a.target.value),required:!0}),c.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:"Create Admin"})]})]})})},Jj={apiKey:"AIzaSyB0oPTLEYuNiWCx5s9GmZzGzyH1z-HXwb8",authDomain:"onlineadmission-f85c6.firebaseapp.com",projectId:"onlineadmission-f85c6",storageBucket:"onlineadmission-f85c6.firebasestorage.app",messagingSenderId:"996707362986",appId:"1:996707362986:web:fea98a07bea032ff7e48d3",measurementId:"G-6H910NXDM1"},Zj=vc(Jj,"Secondary"),e2=kp(Zj),t2=()=>{const t=Ie(),e=["Dars-e-Nizami","Hifz","Tajweed"],n=["Mutwasta","Aama Arzbic (A)","Aama Arabic (B)","Aama English","Khasa - I","Khasa - II","Matric","Intermediate (IX)","Aalia - I (X)","Aalia - II (XI)","Aalamia - I (XII)","Almia - II (XI)"],r=["Amer Bin Khatab","Abdullah Bin Masood","Zaid Bin Sabit","Musab Bin Omair","Abdullah Bin Abbas","Osman Ghani","Abee Bin Kaab","Abu Bakar Siddique","Ali-ul-Murtazi","Naseerah Murseed"],s=["Class 1st year","Class IInd year"],[i,o]=k.useState({firstName:"",lastName:"",email:"",password:"",department:"",className:"",rollNumber:"",parentName:"",parentPhone:""}),[a,u]=k.useState(!1),[d,f]=k.useState(""),p=y=>{o({...i,[y.target.name]:y.target.value})},m=async y=>{y.preventDefault(),u(!0),f("");try{const N=(await Rp(e2,i.email,i.password)).user;await Et(re(W,"users",N.uid),{email:i.email,role:"student",createdAt:new Date}),await Et(re(W,"students",N.uid),{uid:N.uid,firstName:i.firstName,lastName:i.lastName,email:i.email,department:i.department,className:i.className,rollNumber:i.rollNumber,parentName:i.parentName,parentPhone:i.parentPhone,role:"student",createdAt:new Date}),alert("Student added successfully!"),t("/dashboard")}catch(S){console.error("Error adding student:",S),f(S.message)}finally{u(!1)}};return c.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Student"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]}),d&&c.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:d}),c.jsxs("form",{onSubmit:m,className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"First Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"firstName",value:i.firstName,onChange:p,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"lastName",value:i.lastName,onChange:p,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email (Login ID)"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",name:"email",value:i.email,onChange:p,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"password",name:"password",value:i.password,onChange:p,required:!0,minLength:"6"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department"}),c.jsxs("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"department",value:i.department,onChange:p,required:!0,children:[c.jsx("option",{value:"",children:"Select Department"}),e.map(y=>c.jsx("option",{value:y,children:y},y))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Class / Section"}),c.jsxs("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"className",value:i.className,onChange:p,required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),(i.department==="Dars-e-Nizami"?n:i.department==="Hifz"?r:i.department==="Tajweed"?s:[]).map(y=>c.jsx("option",{value:y,children:y},y))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Roll Number"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"rollNumber",value:i.rollNumber,onChange:p,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Parent Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"parentName",value:i.parentName,onChange:p,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Parent Phone"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"tel",name:"parentPhone",value:i.parentPhone,onChange:p,required:!0})]})]}),c.jsx("div",{className:"flex items-center justify-end mt-6",children:c.jsx("button",{className:`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${a?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:a,children:a?"Creating Student...":"Add Student"})})]})]})},n2=["Dars-e-Nizami","Hifz","Tajweed"],r2=["Mutwasta","Aama Arzbic (A)","Aama Arabic (B)","Aama English","Khasa - I","Khasa - II","Matric","Intermediate (IX)","Aalia - I (X)","Aalia - II (XI)","Aalamia - I (XII)","Almia - II (XI)"],s2=["Amer Bin Khatab","Abdullah Bin Masood","Zaid Bin Sabit","Musab Bin Omair","Abdullah Bin Abbas","Osman Ghani","Abee Bin Kaab","Abu Bakar Siddique","Ali-ul-Murtazi","Naseerah Murseed"],i2=["Class 1st year","Class IInd year"],o2=()=>{const{id:t}=Qx(),e=Ie(),[n,r]=k.useState({firstName:"",lastName:"",email:"",department:"",className:"",rollNumber:"",parentName:"",parentPhone:""}),[s,i]=k.useState(!0),[o,a]=k.useState(!1),[u,d]=k.useState("");k.useEffect(()=>{(async()=>{try{const y=re(W,"students",t),S=await Cs(y);S.exists()?r(S.data()):d("Student not found")}catch(y){console.error("Error fetching student:",y),d("Failed to fetch student details")}finally{i(!1)}})()},[t]);const f=m=>{r({...n,[m.target.name]:m.target.value})},p=async m=>{m.preventDefault(),a(!0),d("");try{const y=re(W,"students",t);await gm(y,{firstName:n.firstName,lastName:n.lastName,department:n.department,className:n.className,rollNumber:n.rollNumber,parentName:n.parentName,parentPhone:n.parentPhone});const S=re(W,"users",t);(await Cs(S)).exists(),alert("Student updated successfully!"),e("/admin/students")}catch(y){console.error("Error updating student:",y),d(y.message)}finally{a(!1)}};return s?c.jsx("div",{className:"text-center p-10",children:"Loading..."}):u?c.jsx("div",{className:"text-center p-10 text-red-600",children:u}):c.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Student"}),c.jsx("button",{onClick:()=>e("/admin/students"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]}),u&&c.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:u}),c.jsxs("form",{onSubmit:p,className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"First Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"firstName",value:n.firstName,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"lastName",value:n.lastName,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email (Login ID)"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-500 bg-gray-100 leading-tight focus:outline-none focus:shadow-outline",type:"email",name:"email",value:n.email,readOnly:!0,disabled:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed here."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department"}),c.jsxs("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"department",value:n.department,onChange:f,required:!0,children:[c.jsx("option",{value:"",children:"Select Department"}),n2.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Class / Section"}),c.jsxs("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"className",value:n.className,onChange:f,required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),(n.department==="Dars-e-Nizami"?r2:n.department==="Hifz"?s2:n.department==="Tajweed"?i2:[]).map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Roll Number"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"rollNumber",value:n.rollNumber,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Parent Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"parentName",value:n.parentName,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Parent Phone"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"tel",name:"parentPhone",value:n.parentPhone,onChange:f,required:!0})]})]}),c.jsx("div",{className:"flex items-center justify-end mt-6",children:c.jsx("button",{className:`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${o?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:o,children:o?"Updating...":"Update Student"})})]})]})},a2=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!0),s=Ie();k.useEffect(()=>{(async()=>{try{const a=ye(ce(W,"students")),d=(await Te(a)).docs.map(f=>({id:f.id,...f.data()}));e(d)}catch(a){console.error("Error fetching students:",a)}finally{r(!1)}})()},[]);const i=async o=>{if(window.confirm("Are you sure you want to delete this student?"))try{await cn(re(W,"students",o)),await cn(re(W,"users",o)),e(t.filter(a=>a.id!==o)),alert("Student deleted successfully")}catch(a){console.error("Error deleting student:",a),alert("Failed to delete student")}};return n?c.jsx("div",{className:"text-center p-10",children:"Loading students..."}):c.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Student List"})]})]}),c.jsxs("div",{className:"space-x-4",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>s("/admin/add-student"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Student"}),c.jsx("button",{onClick:()=>s("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back to Dashboard"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Roll No"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Department / Class"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Parent Contact"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:t.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"5",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No students found."})}):t.map(o=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{className:"ml-3",children:[c.jsxs("p",{className:"text-gray-900 whitespace-no-wrap",children:[o.firstName," ",o.lastName]}),c.jsx("p",{className:"text-gray-500 text-xs",children:o.email})]})})}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:o.rollNumber})}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsxs("p",{className:"text-gray-900 whitespace-no-wrap",children:[o.department?o.department+" / ":"",o.className]})}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[c.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:o.parentName}),c.jsx("p",{className:"text-gray-500 text-xs",children:o.parentPhone})]}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[c.jsx("button",{onClick:()=>s(`/admin/students/edit/${o.id}`),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),c.jsx("button",{onClick:()=>i(o.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},o.id))})]})})]})},l2={apiKey:"AIzaSyB0oPTLEYuNiWCx5s9GmZzGzyH1z-HXwb8",authDomain:"onlineadmission-f85c6.firebaseapp.com",projectId:"onlineadmission-f85c6",storageBucket:"onlineadmission-f85c6.firebasestorage.app",messagingSenderId:"996707362986",appId:"1:996707362986:web:fea98a07bea032ff7e48d3",measurementId:"G-6H910NXDM1"},u2=vc(l2,"SecondaryTeacher"),c2=kp(u2),d2=()=>{const t=Ie(),[e,n]=k.useState({firstName:"",lastName:"",email:"",password:"",subject:"",phone:""}),[r,s]=k.useState(!1),[i,o]=k.useState(""),a=d=>{n({...e,[d.target.name]:d.target.value})},u=async d=>{d.preventDefault(),s(!0),o("");try{const p=(await Rp(c2,e.email,e.password)).user;await Et(re(W,"users",p.uid),{email:e.email,role:"teacher",createdAt:new Date}),await Et(re(W,"teachers",p.uid),{uid:p.uid,firstName:e.firstName,lastName:e.lastName,email:e.email,subject:e.subject,phone:e.phone,role:"teacher",createdAt:new Date}),alert("Teacher added successfully"),t("/dashboard")}catch(f){o(f.message)}finally{s(!1)}};return c.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Teacher"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]}),i&&c.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:i}),c.jsxs("form",{onSubmit:u,className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"First Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"firstName",value:e.firstName,onChange:a,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"lastName",value:e.lastName,onChange:a,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"email",name:"email",value:e.email,onChange:a,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"password",name:"password",value:e.password,onChange:a,required:!0,minLength:"6"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Subject"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"subject",value:e.subject,onChange:a,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Phone"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"tel",name:"phone",value:e.phone,onChange:a,required:!0})]})]}),c.jsx("div",{className:"flex items-center justify-end mt-6",children:c.jsx("button",{className:`bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${r?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:r,children:r?"Creating...":"Add Teacher"})})]})]})},h2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const a=ye(ce(W,"teachers")),d=(await Te(a)).docs.map(f=>({id:f.id,...f.data()}));n(d)}finally{s(!1)}})()},[]);const i=async o=>{window.confirm("Delete this teacher?")&&(await cn(re(W,"teachers",o)),await cn(re(W,"users",o)),n(e.filter(a=>a.id!==o)),alert("Deleted"))};return r?c.jsx("div",{className:"text-center p-10",children:"Loading..."}):c.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Teacher List"})]})]}),c.jsxs("div",{className:"space-x-4",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/admin/add-teacher"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add Teacher"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back to Dashboard"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Phone"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:e.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No teachers found."})}):e.map(o=>c.jsxs("tr",{children:[c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[c.jsxs("p",{className:"text-gray-900",children:[o.firstName," ",o.lastName]}),c.jsx("p",{className:"text-gray-500 text-xs",children:o.email})]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:o.subject}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:o.phone}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[c.jsx("button",{onClick:()=>t(`/admin/teachers/edit/${o.id}`),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),c.jsx("button",{onClick:()=>i(o.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},o.id))})]})})]})},f2=()=>{const{id:t}=Qx(),e=Ie(),[n,r]=k.useState({firstName:"",lastName:"",email:"",subject:"",phone:""}),[s,i]=k.useState(!0),[o,a]=k.useState(!1),[u,d]=k.useState("");k.useEffect(()=>{(async()=>{try{const y=re(W,"teachers",t),S=await Cs(y);S.exists()?r(S.data()):d("Not found")}catch{d("Failed to fetch")}finally{i(!1)}})()},[t]);const f=m=>{r({...n,[m.target.name]:m.target.value})},p=async m=>{m.preventDefault(),a(!0),d("");try{await gm(re(W,"teachers",t),{firstName:n.firstName,lastName:n.lastName,subject:n.subject,phone:n.phone}),alert("Updated"),e("/admin/teachers")}catch(y){d(y.message)}finally{a(!1)}};return s?c.jsx("div",{className:"text-center p-10",children:"Loading..."}):u?c.jsx("div",{className:"text-center p-10 text-red-600",children:u}):c.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Teacher"}),c.jsx("button",{onClick:()=>e("/admin/teachers"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]}),u&&c.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:u}),c.jsxs("form",{onSubmit:p,className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"First Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"firstName",value:n.firstName,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Name"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"lastName",value:n.lastName,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-500 bg-gray-100",type:"email",name:"email",value:n.email,readOnly:!0,disabled:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Subject"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"subject",value:n.subject,onChange:f,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Phone"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"tel",name:"phone",value:n.phone,onChange:f,required:!0})]})]}),c.jsx("div",{className:"flex items-center justify-end mt-6",children:c.jsx("button",{className:`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${o?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})})]})]})},p2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState([]),[i,o]=k.useState(!0),[a,u]=k.useState({studentId:"",amount:"",description:""}),[d,f]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const w=(await Te(ye(ce(W,"students")))).docs.map(M=>({id:M.id,...M.data()}));n(w);const O=(await Te(ye(ce(W,"fees")))).docs.map(M=>({id:M.id,...M.data()}));s(O)}finally{o(!1)}})()},[]);const p=E=>{u({...a,[E.target.name]:E.target.value})},m=async E=>{if(E.preventDefault(),!(!a.studentId||!a.amount)){f(!0);try{const _=re(ce(W,"fees")),w={uid:_.id,studentId:a.studentId,amount:Number(a.amount),description:a.description||"",status:"unpaid",createdAt:new Date};await Et(_,w),s([{id:_.id,...w},...r]),u({studentId:"",amount:"",description:""})}finally{f(!1)}}},y=async E=>{await gm(re(W,"fees",E),{status:"paid"}),s(r.map(_=>_.id===E?{..._,status:"paid"}:_))},S=async E=>{window.confirm("Delete this fee record?")&&(await cn(re(W,"fees",E)),s(r.filter(_=>_.id!==E)))};if(i)return c.jsx("div",{className:"text-center p-10",children:"Loading..."});const N=E=>{const _=e.find(w=>w.id===E);return _?`${_.firstName} ${_.lastName}`:E};return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Manage Fees"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("form",{onSubmit:m,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Student"}),c.jsxs("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700",name:"studentId",value:a.studentId,onChange:p,required:!0,children:[c.jsx("option",{value:"",children:"Select Student"}),e.map(E=>c.jsxs("option",{value:E.id,children:[E.firstName," ",E.lastName]},E.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Amount"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700",type:"number",name:"amount",value:a.amount,onChange:p,required:!0,min:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),c.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700",type:"text",name:"description",value:a.description,onChange:p})]})]}),c.jsx("div",{className:"flex items-center justify-end mt-6",children:c.jsx("button",{className:`bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded ${d?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:d,children:d?"Saving...":"Create Fee"})})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Student"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:r.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No fee records."})}):r.map(E=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:N(E.studentId)}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["PKR ",E.amount]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm capitalize",children:E.status}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[E.status!=="paid"&&c.jsx("button",{onClick:()=>y(E.id),className:"text-green-600 hover:text-green-800 mr-4",children:"Mark Paid"}),c.jsx("button",{onClick:()=>S(E.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},E.id))})]})})]})},m2=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g2=["Dars-e-Nizami","Hifz","Tajweed"],y2=["Mutwasta","Aama Arzbic (A)","Aama Arabic (B)","Aama English","Khasa - I","Khasa - II","Matric","Intermediate (IX)","Aalia - I (X)","Aalia - II (XI)","Aalamia - I (XII)","Almia - II (XI)"],v2=["Amer Bin Khatab","Abdullah Bin Masood","Zaid Bin Sabit","Musab Bin Omair","Abdullah Bin Abbas","Osman Ghani","Abee Bin Kaab","Abu Bakar Siddique","Ali-ul-Murtazi","Naseerah Murseed"],_2=["Class 1st year","Class IInd year"],x2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState({department:"",className:"",day:"",subject:"",startTime:"",endTime:"",teacherId:""}),[i,o]=k.useState(!0),[a,u]=k.useState(!1);k.useEffect(()=>{(async()=>{const S=(await Te(ye(ce(W,"timetables")))).docs.map(N=>({id:N.id,...N.data()}));n(S),o(!1)})()},[]);const d=m=>s({...r,[m.target.name]:m.target.value}),f=async m=>{m.preventDefault(),u(!0);const y=re(ce(W,"timetables")),S={uid:y.id,department:r.department,className:r.className,day:r.day,subject:r.subject,startTime:r.startTime,endTime:r.endTime,teacherId:r.teacherId||null,createdAt:new Date};await Et(y,S),n([{id:y.id,...S},...e]),s({department:"",className:"",day:"",subject:"",startTime:"",endTime:"",teacherId:""}),u(!1)},p=async m=>{await cn(re(W,"timetables",m)),n(e.filter(y=>y.id!==m))};return i?c.jsx("div",{className:"p-10 text-center",children:"Loading..."}):c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Manage Timetable"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("form",{onSubmit:f,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department"}),c.jsxs("select",{name:"department",value:r.department,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Department"}),g2.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Class"}),c.jsxs("select",{name:"className",value:r.className,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),(r.department==="Dars-e-Nizami"?y2:r.department==="Hifz"?v2:r.department==="Tajweed"?_2:[]).map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Day"}),c.jsxs("select",{name:"day",value:r.day,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Day"}),m2.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Subject"}),c.jsx("input",{name:"subject",value:r.subject,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Start Time"}),c.jsx("input",{type:"time",name:"startTime",value:r.startTime,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"End Time"}),c.jsx("input",{type:"time",name:"endTime",value:r.endTime,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Teacher UID (optional)"}),c.jsx("input",{name:"teacherId",value:r.teacherId,onChange:d,className:"shadow border rounded w-full py-2 px-3"})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{type:"submit",disabled:a,className:`px-4 py-2 bg-blue-600 text-white rounded ${a?"opacity-50 cursor-not-allowed":""}`,children:a?"Saving...":"Add Entry"})})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Department"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Class"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Day"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Time"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:e.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"5",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No entries."})}):e.map(m=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:m.department}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:m.className}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:m.day}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:m.subject}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[m.startTime," - ",m.endTime]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("button",{onClick:()=>p(m.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},m.id))})]})})]})},w2=["Dars-e-Nizami","Hifz","Tajweed"],I2=["Mutwasta","Aama Arzbic (A)","Aama Arabic (B)","Aama English","Khasa - I","Khasa - II","Matric","Intermediate (IX)","Aalia - I (X)","Aalia - II (XI)","Aalamia - I (XII)","Almia - II (XI)"],E2=["Amer Bin Khatab","Abdullah Bin Masood","Zaid Bin Sabit","Musab Bin Omair","Abdullah Bin Abbas","Osman Ghani","Abee Bin Kaab","Abu Bakar Siddique","Ali-ul-Murtazi","Naseerah Murseed"],b2=["Class 1st year","Class IInd year"],T2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState(!0),[i,o]=k.useState(!1),[a,u]=k.useState({department:"",className:"",subject:"",date:"",startTime:"",endTime:""});k.useEffect(()=>{(async()=>{const S=(await Te(ye(ce(W,"exams")))).docs.map(N=>({id:N.id,...N.data()}));n(S),s(!1)})()},[]);const d=m=>u({...a,[m.target.name]:m.target.value}),f=async m=>{m.preventDefault(),o(!0);const y=re(ce(W,"exams")),S={uid:y.id,department:a.department,className:a.className,subject:a.subject,date:a.date,startTime:a.startTime,endTime:a.endTime,createdAt:new Date};await Et(y,S),n([{id:y.id,...S},...e]),u({department:"",className:"",subject:"",date:"",startTime:"",endTime:""}),o(!1)},p=async m=>{await cn(re(W,"exams",m)),n(e.filter(y=>y.id!==m))};return r?c.jsx("div",{className:"p-10 text-center",children:"Loading..."}):c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Manage Exams"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("form",{onSubmit:f,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department"}),c.jsxs("select",{name:"department",value:a.department,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Department"}),w2.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Class"}),c.jsxs("select",{name:"className",value:a.className,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),(a.department==="Dars-e-Nizami"?I2:a.department==="Hifz"?E2:a.department==="Tajweed"?b2:[]).map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Subject"}),c.jsx("input",{name:"subject",value:a.subject,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Date"}),c.jsx("input",{type:"date",name:"date",value:a.date,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Start Time"}),c.jsx("input",{type:"time",name:"startTime",value:a.startTime,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"End Time"}),c.jsx("input",{type:"time",name:"endTime",value:a.endTime,onChange:d,className:"shadow border rounded w-full py-2 px-3",required:!0})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 bg-orange-600 text-white rounded ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Saving...":"Schedule Exam"})})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Class"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date/Time"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:e.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No exams scheduled."})}):e.map(m=>c.jsxs("tr",{children:[c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["Class ",m.className]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:m.subject}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[m.date," ",m.startTime,"-",m.endTime]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("button",{onClick:()=>p(m.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},m.id))})]})})]})},S2=["Dars-e-Nizami","Hifz","Tajweed"],N2=["Mutwasta","Aama Arzbic (A)","Aama Arabic (B)","Aama English","Khasa - I","Khasa - II","Matric","Intermediate (IX)","Aalia - I (X)","Aalia - II (XI)","Aalamia - I (XII)","Almia - II (XI)"],A2=["Amer Bin Khatab","Abdullah Bin Masood","Zaid Bin Sabit","Musab Bin Omair","Abdullah Bin Abbas","Osman Ghani","Abee Bin Kaab","Abu Bakar Siddique","Ali-ul-Murtazi","Naseerah Murseed"],R2=["Class 1st year","Class IInd year"],C2=()=>{const t=Ie(),{currentUser:e}=Nn(),[n,r]=k.useState(()=>new Date().toISOString().slice(0,10)),[s,i]=k.useState(""),[o,a]=k.useState(""),[u,d]=k.useState([]),[f,p]=k.useState(!1),[m,y]=k.useState(!1),S=async()=>{if(o){p(!0);try{const _=ce(W,"students"),w=s?ye(_,Qt("department","==",s),Qt("className","==",o)):ye(_,Qt("className","==",o)),O=(await Te(w)).docs.map(M=>({id:M.id,...M.data(),status:"present"}));d(O)}finally{p(!1)}}};k.useEffect(()=>{S()},[o]);const N=(_,w)=>{d(u.map(b=>b.id===_?{...b,status:w}:b))},E=async()=>{if(!(!n||!o||u.length===0)){y(!0);try{const _=u.map(async w=>{const b=`${n}_${o}_${w.id}`;await Et(re(W,"attendance",b),{uid:b,date:n,department:s,className:o,studentId:w.id,status:w.status,teacherId:(e==null?void 0:e.uid)||null,createdAt:new Date})});await Promise.all(_),alert("Attendance submitted"),t("/dashboard")}finally{y(!1)}}};return c.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Take Attendance"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Date"}),c.jsx("input",{type:"date",value:n,onChange:_=>r(_.target.value),className:"shadow border rounded w-full py-2 px-3"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department"}),c.jsxs("select",{value:s,onChange:_=>i(_.target.value),className:"shadow border rounded w-full py-2 px-3",children:[c.jsx("option",{value:"",children:"Select Department"}),S2.map(_=>c.jsx("option",{value:_,children:_},_))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Class"}),c.jsxs("select",{value:o,onChange:_=>a(_.target.value),className:"shadow border rounded w-full py-2 px-3",children:[c.jsx("option",{value:"",children:"Select Class"}),(s==="Dars-e-Nizami"?N2:s==="Hifz"?A2:s==="Tajweed"?R2:[]).map(_=>c.jsx("option",{value:_,children:_},_))]})]}),c.jsx("div",{className:"flex items-end",children:c.jsx("button",{onClick:S,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Load Students"})})]})}),f?c.jsx("div",{className:"text-center p-10",children:"Loading students..."}):u.length===0?c.jsx("div",{className:"text-center p-10 text-gray-500",children:"Select a class to load students."}):c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Student"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"})]})}),c.jsx("tbody",{children:u.map(_=>c.jsxs("tr",{children:[c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[_.firstName," ",_.lastName]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("div",{className:"flex gap-2",children:["present","absent","late"].map(w=>c.jsx("button",{onClick:()=>N(_.id,w),className:`px-3 py-1 rounded border ${_.status===w?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700"}`,children:w},w))})})]},_.id))})]})}),c.jsx("div",{className:"flex items-center justify-end mt-6",children:c.jsx("button",{onClick:E,disabled:m||u.length===0,className:`px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Submitting...":"Submit Attendance"})})]})},P2=()=>{const t=Ie(),{currentUser:e}=Nn(),[n,r]=k.useState([]),[s,i]=k.useState(""),[o,a]=k.useState([]),[u,d]=k.useState(!0),[f,p]=k.useState(!1);k.useEffect(()=>{(async()=>{const E=await Te(ye(ce(W,"exams")));r(E.docs.map(_=>({id:_.id,..._.data()}))),d(!1)})()},[]);const m=async N=>{if(i(N),!N)return a([]);const _=(await Cs(re(W,"exams",N))).data(),w=ce(W,"students"),b=_.department?ye(w,Qt("department","==",_.department),Qt("className","==",_.className)):ye(w,Qt("className","==",_.className)),M=(await Te(b)).docs.map(P=>({id:P.id,...P.data(),marks:""}));a(M)},y=(N,E)=>{a(o.map(_=>_.id===N?{..._,marks:E}:_))},S=async()=>{if(!s)return;p(!0);const N=o.map(async E=>{var w;const _=`${s}_${E.id}`;await Et(re(W,"examResults",_),{uid:_,examId:s,department:((w=n.find(b=>b.id===s))==null?void 0:w.department)||null,studentId:E.id,marks:Number(E.marks||0),teacherId:(e==null?void 0:e.uid)||null,createdAt:new Date})});await Promise.all(N),alert("Grades saved"),t("/dashboard"),p(!1)};return u?c.jsx("div",{className:"p-10 text-center",children:"Loading..."}):c.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Enter Grades"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-6",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Exam"}),c.jsxs("select",{value:s,onChange:N=>m(N.target.value),className:"shadow border rounded w-full py-2 px-3",children:[c.jsx("option",{value:"",children:"Select an exam"}),n.map(N=>c.jsxs("option",{value:N.id,children:[N.department?N.department+" - ":"",N.className," - ",N.subject," - ",N.date]},N.id))]})]}),s&&c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Student"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Marks"})]})}),c.jsx("tbody",{children:o.map(N=>c.jsxs("tr",{children:[c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[N.firstName," ",N.lastName]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("input",{type:"number",min:"0",className:"shadow border rounded w-24 py-1 px-2",value:N.marks,onChange:E=>y(N.id,E.target.value)})})]},N.id))})]})}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:S,disabled:!s||f,className:`px-4 py-2 bg-yellow-600 text-white rounded ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Saving...":"Submit Grades"})})]})},k2=()=>{const t=Ie(),{currentUser:e}=Nn(),[n,r]=k.useState([]),[s,i]=k.useState(!0);if(k.useEffect(()=>{e&&(async()=>{const u=ye(ce(W,"timetables"),Qt("teacherId","==",e.uid)),d=await Te(u);r(d.docs.map(f=>f.data())),i(!1)})()},[e]),s)return c.jsx("div",{className:"p-10 text-center",children:"Loading..."});const o=n.reduce((a,u)=>(a[u.day]=a[u.day]||[],a[u.day].push(u),a),{});return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"My Timetable"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),Object.keys(o).length===0?c.jsx("div",{className:"text-center p-10 text-gray-500",children:"No timetable entries."}):Object.keys(o).map(a=>c.jsxs("div",{className:"bg-white shadow-md rounded",children:[c.jsx("div",{className:"px-6 py-3 border-b",children:c.jsx("span",{className:"font-semibold",children:a})}),c.jsx("ul",{className:"divide-y",children:o[a].sort((u,d)=>u.startTime.localeCompare(d.startTime)).map((u,d)=>c.jsxs("li",{className:"px-6 py-3 flex justify-between",children:[c.jsxs("span",{children:[u.subject," (Class ",u.className,")"]}),c.jsxs("span",{className:"text-gray-600",children:[u.startTime," - ",u.endTime]})]},d))})]},a))]})},D2=()=>{const t=Ie(),{currentUser:e}=Nn(),[n,r]=k.useState([]),[s,i]=k.useState(!0);if(k.useEffect(()=>{e&&(async()=>{try{const f=ye(ce(W,"attendance"),Qt("studentId","==",e.uid)),m=(await Te(f)).docs.map(y=>y.data());r(m)}finally{i(!1)}})()},[e]),s)return c.jsx("div",{className:"text-center p-10",children:"Loading..."});const o=n.length,a=n.filter(d=>d.status==="present").length,u=o?Math.round(a/o*100):0;return c.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"My Attendance"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Overall"}),c.jsxs("p",{className:"text-3xl font-bold text-teal-600",children:[u,"%"]}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[a," of ",o," days present"]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Class"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"})]})}),c.jsx("tbody",{children:n.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No attendance records."})}):n.sort((d,f)=>d.date.localeCompare(f.date)).map(d=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:d.date}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["Class ",d.className]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm capitalize",children:d.status})]},`${d.date}_${d.studentId}`))})]})})]})},j2=()=>{const t=Ie(),{currentUser:e}=Nn(),[n,r]=k.useState(""),[s,i]=k.useState(""),[o,a]=k.useState([]),[u,d]=k.useState(!0);if(k.useEffect(()=>{e&&(async()=>{const m=re(W,"students",e.uid),y=await Cs(m),S=y.exists()?y.data():{},N=S.className||"",E=S.department||"";if(r(N),i(E),N){const _=ce(W,"timetables"),w=E?ye(_,Qt("department","==",E),Qt("className","==",String(N))):ye(_,Qt("className","==",String(N))),O=(await Te(w)).docs.map(M=>M.data());a(O)}d(!1)})()},[e]),u)return c.jsx("div",{className:"p-10 text-center",children:"Loading..."});const f=o.reduce((p,m)=>(p[m.day]=p[m.day]||[],p[m.day].push(m),p),{});return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsxs("div",{className:"text-sm text-gray-500",children:["My Timetable (",s?s+" - ":"",n,")"]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),Object.keys(f).length===0?c.jsx("div",{className:"text-center p-10 text-gray-500",children:"No timetable entries."}):Object.keys(f).map(p=>c.jsxs("div",{className:"bg-white shadow-md rounded",children:[c.jsx("div",{className:"px-6 py-3 border-b",children:c.jsx("span",{className:"font-semibold",children:p})}),c.jsx("ul",{className:"divide-y",children:f[p].sort((m,y)=>m.startTime.localeCompare(y.startTime)).map((m,y)=>c.jsxs("li",{className:"px-6 py-3 flex justify-between",children:[c.jsx("span",{children:m.subject}),c.jsxs("span",{className:"text-gray-600",children:[m.startTime," - ",m.endTime]})]},y))})]},p))]})},V2=()=>{const t=Ie(),{currentUser:e}=Nn(),[n,r]=k.useState([]),[s,i]=k.useState(!0);return k.useEffect(()=>{e&&(async()=>{const a=ye(ce(W,"examResults"),Qt("studentId","==",e.uid)),u=await Te(a),d=await Promise.all(u.docs.map(async f=>{const p=f.data(),m=await Cs(re(W,"exams",p.examId)),y=m.exists()?m.data():{};return{id:f.id,...p,exam:y}}));r(d),i(!1)})()},[e]),s?c.jsx("div",{className:"p-10 text-center",children:"Loading..."}):c.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"My Results"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Class"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Marks"})]})}),c.jsx("tbody",{children:n.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No results yet."})}):n.sort((o,a)=>o.exam.date.localeCompare(a.exam.date)).map(o=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:o.exam.subject}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["Class ",o.exam.className]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:o.exam.date}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:o.marks})]},o.id))})]})})]})},O2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState([]),[i,o]=k.useState({name:"",description:""}),[a,u]=k.useState({categoryId:"",amount:"",date:"",description:""}),[d,f]=k.useState(!0),[p,m]=k.useState(!1),[y,S]=k.useState(!1);k.useEffect(()=>{(async()=>{const I=await Te(ye(ce(W,"incomeCategories"))),x=await Te(ye(ce(W,"incomeTransactions")));n(I.docs.map(T=>({id:T.id,...T.data()}))),s(x.docs.map(T=>({id:T.id,...T.data()}))),f(!1)})()},[]);const N=P=>o({...i,[P.target.name]:P.target.value}),E=P=>u({...a,[P.target.name]:P.target.value}),_=async P=>{P.preventDefault(),m(!0);const I=re(ce(W,"incomeCategories"));await Et(I,{uid:I.id,name:i.name,description:i.description,createdAt:new Date}),n([{id:I.id,uid:I.id,...i},...e]),o({name:"",description:""}),m(!1)},w=async P=>{await cn(re(W,"incomeCategories",P)),n(e.filter(I=>I.id!==P))},b=async P=>{P.preventDefault(),S(!0);const I=re(ce(W,"incomeTransactions"));await Et(I,{uid:I.id,categoryId:a.categoryId,amount:Number(a.amount||0),date:a.date,description:a.description,createdAt:new Date}),s([{id:I.id,uid:I.id,...a,amount:Number(a.amount||0)},...r]),u({categoryId:"",amount:"",date:"",description:""}),S(!1)},O=async P=>{await cn(re(W,"incomeTransactions",P)),s(r.filter(I=>I.id!==P))};if(d)return c.jsx("div",{className:"text-center p-10",children:"Loading..."});const M=P=>{const I=e.find(x=>x.id===P);return I?I.name:P};return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Manage Income"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("form",{onSubmit:_,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Category"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("input",{name:"name",value:i.name,onChange:N,placeholder:"Name",className:"shadow border rounded w-full py-2 px-3",required:!0}),c.jsx("input",{name:"description",value:i.description,onChange:N,placeholder:"Description",className:"shadow border rounded w-full py-2 px-3"}),c.jsx("button",{type:"submit",disabled:p,className:`px-4 py-2 bg-green-600 text-white rounded ${p?"opacity-50 cursor-not-allowed":""}`,children:p?"Saving...":"Add"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:e.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No categories."})}):e.map(P=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.name}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.description}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("button",{onClick:()=>w(P.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},P.id))})]})}),c.jsxs("form",{onSubmit:b,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Transaction"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[c.jsxs("select",{name:"categoryId",value:a.categoryId,onChange:E,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Category"}),e.map(P=>c.jsx("option",{value:P.id,children:P.name},P.id))]}),c.jsx("input",{type:"number",name:"amount",value:a.amount,onChange:E,placeholder:"Amount",className:"shadow border rounded w-full py-2 px-3",required:!0,min:"0"}),c.jsx("input",{type:"date",name:"date",value:a.date,onChange:E,className:"shadow border rounded w-full py-2 px-3",required:!0}),c.jsx("input",{name:"description",value:a.description,onChange:E,placeholder:"Description",className:"shadow border rounded w-full py-2 px-3"}),c.jsx("button",{type:"submit",disabled:y,className:`px-4 py-2 bg-blue-600 text-white rounded ${y?"opacity-50 cursor-not-allowed":""}`,children:y?"Saving...":"Add"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:r.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"5",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No transactions."})}):r.sort((P,I)=>P.date.localeCompare(I.date)).map(P=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.date}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:M(P.categoryId)}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["PKR ",P.amount]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.description}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("button",{onClick:()=>O(P.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},P.id))})]})})]})},L2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState([]),[i,o]=k.useState({name:"",description:""}),[a,u]=k.useState({categoryId:"",amount:"",date:"",description:""}),[d,f]=k.useState(!0),[p,m]=k.useState(!1),[y,S]=k.useState(!1);k.useEffect(()=>{(async()=>{const I=await Te(ye(ce(W,"expenseCategories"))),x=await Te(ye(ce(W,"expenseTransactions")));n(I.docs.map(T=>({id:T.id,...T.data()}))),s(x.docs.map(T=>({id:T.id,...T.data()}))),f(!1)})()},[]);const N=P=>o({...i,[P.target.name]:P.target.value}),E=P=>u({...a,[P.target.name]:P.target.value}),_=async P=>{P.preventDefault(),m(!0);const I=re(ce(W,"expenseCategories"));await Et(I,{uid:I.id,name:i.name,description:i.description,createdAt:new Date}),n([{id:I.id,uid:I.id,...i},...e]),o({name:"",description:""}),m(!1)},w=async P=>{await cn(re(W,"expenseCategories",P)),n(e.filter(I=>I.id!==P))},b=async P=>{P.preventDefault(),S(!0);const I=re(ce(W,"expenseTransactions"));await Et(I,{uid:I.id,categoryId:a.categoryId,amount:Number(a.amount||0),date:a.date,description:a.description,createdAt:new Date}),s([{id:I.id,uid:I.id,...a,amount:Number(a.amount||0)},...r]),u({categoryId:"",amount:"",date:"",description:""}),S(!1)},O=async P=>{await cn(re(W,"expenseTransactions",P)),s(r.filter(I=>I.id!==P))};if(d)return c.jsx("div",{className:"text-center p-10",children:"Loading..."});const M=P=>{const I=e.find(x=>x.id===P);return I?I.name:P};return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Manage Expense"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("form",{onSubmit:_,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Category"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("input",{name:"name",value:i.name,onChange:N,placeholder:"Name",className:"shadow border rounded w-full py-2 px-3",required:!0}),c.jsx("input",{name:"description",value:i.description,onChange:N,placeholder:"Description",className:"shadow border rounded w-full py-2 px-3"}),c.jsx("button",{type:"submit",disabled:p,className:`px-4 py-2 bg-red-600 text-white rounded ${p?"opacity-50 cursor-not-allowed":""}`,children:p?"Saving...":"Add"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:e.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No categories."})}):e.map(P=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.name}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.description}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("button",{onClick:()=>w(P.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},P.id))})]})}),c.jsxs("form",{onSubmit:b,className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Transaction"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[c.jsxs("select",{name:"categoryId",value:a.categoryId,onChange:E,className:"shadow border rounded w-full py-2 px-3",required:!0,children:[c.jsx("option",{value:"",children:"Select Category"}),e.map(P=>c.jsx("option",{value:P.id,children:P.name},P.id))]}),c.jsx("input",{type:"number",name:"amount",value:a.amount,onChange:E,placeholder:"Amount",className:"shadow border rounded w-full py-2 px-3",required:!0,min:"0"}),c.jsx("input",{type:"date",name:"date",value:a.date,onChange:E,className:"shadow border rounded w-full py-2 px-3",required:!0}),c.jsx("input",{name:"description",value:a.description,onChange:E,placeholder:"Description",className:"shadow border rounded w-full py-2 px-3"}),c.jsx("button",{type:"submit",disabled:y,className:`px-4 py-2 bg-blue-600 text-white rounded ${y?"opacity-50 cursor-not-allowed":""}`,children:y?"Saving...":"Add"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:r.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"5",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No transactions."})}):r.sort((P,I)=>P.date.localeCompare(I.date)).map(P=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.date}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:M(P.categoryId)}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["PKR ",P.amount]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:P.description}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:c.jsx("button",{onClick:()=>O(P.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},P.id))})]})})]})},M2=()=>{const t=Ie(),[e,n]=k.useState([]),[r,s]=k.useState([]),[i,o]=k.useState(!0),[a,u]=k.useState({start:"",end:""}),d=async()=>{const E=await Te(ye(ce(W,"incomeTransactions"))),_=await Te(ye(ce(W,"expenseTransactions")));n(E.docs.map(w=>w.data())),s(_.docs.map(w=>w.data())),o(!1)};k.useEffect(()=>{d()},[]);const f=E=>!a.start||!a.end?!0:E>=a.start&&E<=a.end,p=e.filter(E=>f(E.date)),m=r.filter(E=>f(E.date)),y=p.reduce((E,_)=>E+Number(_.amount||0),0),S=m.reduce((E,_)=>E+Number(_.amount||0),0),N=y-S;return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Finance Reports"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsx("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Start"}),c.jsx("input",{type:"date",value:a.start,onChange:E=>u({...a,start:E.target.value}),className:"shadow border rounded w-full py-2 px-3"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"End"}),c.jsx("input",{type:"date",value:a.end,onChange:E=>u({...a,end:E.target.value}),className:"shadow border rounded w-full py-2 px-3"})]}),c.jsx("div",{className:"flex items-end",children:c.jsx("div",{className:"text-sm text-gray-600",children:a.start&&a.end?`Showing ${a.start} to ${a.end}`:"Showing all"})})]})}),c.jsx("div",{className:"p-6 bg-white rounded-lg shadow-md",children:c.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600",children:"Income"}),c.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["PKR ",y.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600",children:"Expense"}),c.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["PKR ",S.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-600",children:"Net"}),c.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["PKR ",N.toLocaleString()]})]})]})}),c.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-6 py-3 border-b font-semibold",children:"Income Transactions"}),c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"})]})}),c.jsx("tbody",{children:p.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No records."})}):p.sort((E,_)=>E.date.localeCompare(_.date)).map((E,_)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:E.date}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["PKR ",Number(E.amount||0)]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:E.description})]},_))})]})]}),c.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-6 py-3 border-b font-semibold",children:"Expense Transactions"}),c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Description"})]})}),c.jsx("tbody",{children:m.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"3",className:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-center",children:"No records."})}):m.sort((E,_)=>E.date.localeCompare(_.date)).map((E,_)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:E.date}),c.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:["PKR ",Number(E.amount||0)]}),c.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:E.description})]},_))})]})]})]})},Qd=["students","teachers","users","fees","timetables","exams","examResults","attendance","incomeCategories","expenseCategories","incomeTransactions","expenseTransactions"],T_=t=>{if(!t||t.length===0)return"";const e=Array.from(t.reduce((i,o)=>(Object.keys(o).forEach(a=>i.add(a)),i),new Set));e.includes("uid")||e.unshift("uid");const n=e.join(","),r=i=>{const o=i==null?"":String(i);return/[,"]/.test(o)?'"'+o.replace(/"/g,'""')+'"':o},s=t.map(i=>e.map(o=>r(i[o])).join(",")).join(`
`);return n+`
`+s},F2=async t=>{const n=(await t.text()).split(/\r?\n/).filter(o=>o.trim().length>0),r=n[0].split(",").map(o=>o.trim()),s=o=>o.startsWith('"')&&o.endsWith('"')?o.slice(1,-1).replace(/""/g,'"'):o;return n.slice(1).map(o=>{const a=[];let u="",d=!1;for(let p=0;p<o.length;p++){const m=o[p];m==='"'?d&&o[p+1]==='"'?(u+='"',p++):d=!d:m===","&&!d?(a.push(u),u=""):u+=m}a.push(u);const f={};return r.forEach((p,m)=>f[p]=s(a[m]||"")),f})},S_=(t,e)=>{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},U2=()=>{const t=Ie(),[e,n]=k.useState(""),[r,s]=k.useState(""),[i,o]=k.useState(!1),[a,u]=k.useState(!1),d=async()=>{if(e){u(!0);try{const y=(await Te(ye(ce(W,e)))).docs.map(N=>({uid:N.id,...N.data()})),S=T_(y);S_(`${e}.csv`,S)}finally{u(!1)}}},f=async()=>{u(!0);try{for(const m of Qd){const S=(await Te(ye(ce(W,m)))).docs.map(E=>({uid:E.id,...E.data()})),N=T_(S);S_(`${m}.csv`,N)}}finally{u(!1)}},p=async m=>{if(!(!m||!r)){o(!0);try{const y=await F2(m);for(const S of y){const N=S.uid&&String(S.uid).trim().length?String(S.uid):void 0,E=N?re(W,r,N):re(ce(W,r)),_={...S,uid:N||E.id};await Et(E,_)}alert("Restore completed")}catch(y){alert("Restore failed: "+y.message)}finally{o(!1)}}};return c.jsxs("div",{className:"max-w-6xl mx-auto p-8 space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$e,alt:"Institution Logo",className:"h-10 w-10 object-contain"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Idara Misbah ul Quran Mangment System"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Backup & Restore"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Download PDF"}),c.jsx("button",{onClick:()=>t("/dashboard"),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Back"})]})]}),c.jsxs("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Collection"}),c.jsxs("select",{value:e,onChange:m=>n(m.target.value),className:"shadow border rounded w-full py-2 px-3",children:[c.jsx("option",{value:"",children:"Select Collection"}),Qd.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"flex items-end gap-3",children:[c.jsx("button",{onClick:d,disabled:!e||a,className:`px-4 py-2 bg-blue-600 text-white rounded ${a?"opacity-50 cursor-not-allowed":""}`,children:a?"Exporting...":"Export Selected CSV"}),c.jsx("button",{onClick:f,disabled:a,className:`px-4 py-2 bg-purple-600 text-white rounded ${a?"opacity-50 cursor-not-allowed":""}`,children:a?"Exporting...":"Export All CSVs"})]})]})]}),c.jsxs("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Restore"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Target Collection"}),c.jsxs("select",{value:r,onChange:m=>s(m.target.value),className:"shadow border rounded w-full py-2 px-3",children:[c.jsx("option",{value:"",children:"Select Collection"}),Qd.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"CSV File"}),c.jsx("input",{type:"file",accept:".csv,text/csv",onChange:m=>p(m.target.files[0]),className:"shadow border rounded w-full py-2 px-3"})]}),c.jsx("div",{className:"flex items-end",children:c.jsx("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded",children:i?"Restoring...":"Upload starts automatically"})})]})]})]})},qe=({children:t,allowedRoles:e})=>{const{currentUser:n,userRole:r}=Nn();return n?e&&!e.includes(r)?c.jsx("div",{className:"p-10 text-center text-red-600",children:"You do not have permission to view this page."}):t:c.jsx(Zx,{to:"/"})},B2=({children:t})=>{const{currentUser:e}=Nn();return e?t:c.jsx(Zx,{to:"/"})};function z2(){return c.jsx(Bj,{children:c.jsx("div",{className:"min-h-screen bg-gray-100",children:c.jsxs(QN,{children:[c.jsx(Ae,{path:"/",element:c.jsx($j,{})}),c.jsx(Ae,{path:"/seed-admin",element:c.jsx(Yj,{})}),c.jsx(Ae,{path:"/dashboard",element:c.jsx(B2,{children:c.jsx(Xj,{})})}),c.jsx(Ae,{path:"/admin/add-student",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(t2,{})})}),c.jsx(Ae,{path:"/admin/students",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(a2,{})})}),c.jsx(Ae,{path:"/admin/students/edit/:id",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(o2,{})})}),c.jsx(Ae,{path:"/admin/add-teacher",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(d2,{})})}),c.jsx(Ae,{path:"/admin/teachers",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(h2,{})})}),c.jsx(Ae,{path:"/admin/teachers/edit/:id",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(f2,{})})}),c.jsx(Ae,{path:"/admin/fees",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(p2,{})})}),c.jsx(Ae,{path:"/admin/timetable",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(x2,{})})}),c.jsx(Ae,{path:"/admin/exams",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(T2,{})})}),c.jsx(Ae,{path:"/teacher/attendance",element:c.jsx(qe,{allowedRoles:["teacher"],children:c.jsx(C2,{})})}),c.jsx(Ae,{path:"/teacher/grades",element:c.jsx(qe,{allowedRoles:["teacher"],children:c.jsx(P2,{})})}),c.jsx(Ae,{path:"/teacher/timetable",element:c.jsx(qe,{allowedRoles:["teacher"],children:c.jsx(k2,{})})}),c.jsx(Ae,{path:"/student/attendance",element:c.jsx(qe,{allowedRoles:["student"],children:c.jsx(D2,{})})}),c.jsx(Ae,{path:"/student/timetable",element:c.jsx(qe,{allowedRoles:["student"],children:c.jsx(j2,{})})}),c.jsx(Ae,{path:"/student/results",element:c.jsx(qe,{allowedRoles:["student"],children:c.jsx(V2,{})})}),c.jsx(Ae,{path:"/admin/finance/income",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(O2,{})})}),c.jsx(Ae,{path:"/admin/finance/expense",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(L2,{})})}),c.jsx(Ae,{path:"/admin/finance/reports",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(M2,{})})}),c.jsx(Ae,{path:"/admin/backup",element:c.jsx(qe,{allowedRoles:["admin"],children:c.jsx(U2,{})})})]})})})}Xd.createRoot(document.getElementById("root")).render(c.jsx(L_.StrictMode,{children:c.jsx(JN,{children:c.jsx(z2,{})})}));
